webpackJsonp([180],{"54op":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{Kehu:"",CusId:"",RepairName:"",RepairNameEn:"",MobilePhone:"",Tel:"",Email:"",AddressDetail:"",POCode:"",BelongCompany:"",options:[{lable:"技术公司",value:"技术公司"},{lable:"服务公司",value:"服务公司"}],CFclick:!0}},computed:{},watch:{},methods:{CreateMSO:function(){var e=this;if(!this.CFclick)return this.$message.error("请勿连续点击！"),!1;this.CFclick=!1;var t=setTimeout(function(){e.CFclick=!0,clearTimeout(t)},3e3);if(!this.POCode)return this.$message.error("没有输入采购单编号！"),!1;if(!this.CusId)return this.$message.error("没有输入供应商！"),!1;if(!this.BelongCompany)return this.$message.error("没有选择隶属公司！"),!1;var a={data:{POCode:this.POCode,CusId:this.CusId,CusLinkMan:{ChineseName:this.RepairName,Address:this.AddressDetail,MobilePhone:this.MobilePhone,EMail:this.Email},BelongCompany:this.BelongCompany,type:"PO"},api:"post",url:this.$store.state.http+"MachineSO/CreateMPO"};this.$https(a).then(function(t){e.$message({message:"创建成功！",type:"success"}),e.$router.push({path:"/sp-procurement-edit",query:{Id:t.Data}}),e.$emit("refresh")})},querySearch:function(e,t){if(console.log(e),void 0==e)return e="",!1;""==e&&(e="北京");var a={data:{search:e,type:"供应商"},api:"get",url:this.$store.state.http+"CRM/GetCustomerMini",header:this.$store.state.token};this.$https(a).then(function(e){console.log(e.Data.Dtos);if(0==e.Data.Dtos.length)return t([]),!1;for(var a=0;a<e.Data.Dtos.length;a++)e.Data.Dtos[a].value=e.Data.Dtos[a].FullName;t(e.Data.Dtos)})},querySearchs:function(e,t){if(""==this.CusId)return!1;var a={data:{cusId:this.CusId},api:"get",url:this.$store.state.http+"CRM/GetCusLinkManMini",header:this.$store.state.token};this.$https(a).then(function(e){console.log(e.Data.Dtos);if(0==e.Data.Dtos.length)return t([]),!1;for(var a=0;a<e.Data.Dtos.length;a++)e.Data.Dtos[a].value=e.Data.Dtos[a].Name;t(e.Data.Dtos)})},handleSelects:function(e){console.log(e),this.RepairName=e.Name,this.RepairNameEn=e.NameEn,this.MobilePhone=e.Mobile,this.Tel=e.Tel,this.Email=e.Email,this.AddressDetail=e.Address},handleSelect:function(e){console.log(e),this.CusId=e.CusId}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box_s"},[a("div",{staticClass:"retrieve"},[a("span",{staticClass:"retrieveSpan"},[e._v("创建零配件采购")]),e._v(" "),a("saxo-button",{staticStyle:{float:"right"},attrs:{type:"success",mini:""},on:{click:function(t){return e.CreateMSO()}}},[e._v("创 建")])],1),e._v(" "),a("div",{staticClass:"From"},[a("span",[e._v("采购单编号")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.POCode,callback:function(t){e.POCode=t},expression:"POCode"}})],1),e._v(" "),a("div",{staticClass:"From"},[a("span",[e._v("供应商")]),e._v(" "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},on:{select:e.handleSelect},model:{value:e.Kehu,callback:function(t){e.Kehu=t},expression:"Kehu"}})],1),e._v(" "),a("div",{staticClass:"From"},[a("span",[e._v("隶属公司")]),e._v(" "),a("el-select",{staticStyle:{width:"300px",marginTop:"5px"},attrs:{placeholder:"请选择客户类型",clearable:""},model:{value:e.BelongCompany,callback:function(t){e.BelongCompany=t},expression:"BelongCompany"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,o,!1,function(e){a("JSLx")},"data-v-13d39d20",null);t.default=i.exports},JSLx:function(e,t){}});