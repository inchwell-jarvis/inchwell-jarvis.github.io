webpackJsonp([202],{Xstr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),r=a.n(i),n=a("mvHQ"),s=a.n(n),l={data:function(){return{types:[{label:"工程师App",value:1,index:1},{label:"客户端App",value:2,index:2},{label:"电脑端网站",value:3,index:3},{label:"其它",value:4,index:4}],status:[{label:"等待审核",value:1,index:1},{label:"已审核",value:2,index:2},{label:"研发中",value:3,index:3},{label:"已完成",value:4,index:4},{label:"未采纳",value:5,index:5}],UpdaterType:"",Content:"",SHitem:{},retrieval:{search:"",type:"",state:"",pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:""},Data:[],total:0}},created:function(){this.start()},computed:{retrievalJT:function(){return s()(this.retrieval)}},watch:{retrievalJT:function(t,e){this.WatchFenYe(t,e)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{start:function(){var t=this;this.API_GET("System/GetITUpdaterRec",this.retrieval).then(function(e){t.total=e.DataBars,t.Data=e.Dtos.map(function(t){return r()({},t,{CreateDate:t.CreateDate.split("T")[0],BeginDate:t.BeginDate?t.BeginDate.split("T")[0]:" - ",CompleteDate:t.CompleteDate?t.CompleteDate.split("T")[0]:" - "})}),console.log(t.Data)})},deleteData:function(){this.Content="",this.UpdaterType="",this.$refs.success.start()},addtrue:function(){var t=this;if(""==this.UpdaterType)return this.$message.warning("请选择类型"),!1;if(""==this.Content)return this.$message.warning("请输入内容"),!1;var e={Content:this.Content,UpdaterType:this.UpdaterType};this.API_POST("System/MakeSuggestion",e).then(function(e){t.$message.success("我们将会尽快审核"),t.deleteData(),t.start()})},SHContent:function(t){this.$refs.primary.start(),this.SHitem=t},Shtrue:function(t,e){var a=this;if(2==t&&2==e)this.$prompt("请输入拒绝原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var r=i.value,n={Id:a.SHitem.ID,Adopt:t,ToBeState:e,RefuseMsg:r};a.API_POST("System/UpdateSuggestion",n).then(function(t){a.$refs.primary.start(),a.start()})}).catch(function(){a.$message.info("未审核")});else{var i={Id:this.SHitem.ID,Adopt:t,ToBeState:e};this.API_POST("System/UpdateSuggestion",i).then(function(t){a.$refs.primary.start(),a.start()})}},func:function(t,e){this.retrieval.numPerPage=t,this.retrieval.pageNum=e,this.start()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[t._v("\n            "+t._s(t.$route.meta.title)+"\n        ")]),t._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[t._v("检索")]),t._v(" "),a("el-input",{attrs:{placeholder:"检索",size:"mini"},model:{value:t.retrieval.search,callback:function(e){t.$set(t.retrieval,"search",e)},expression:"retrieval.search"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("类型")]),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择类型",clearable:""},model:{value:t.retrieval.type,callback:function(e){t.$set(t.retrieval,"type",e)},expression:"retrieval.type"}},t._l(t.types,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("状态")]),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择状态",clearable:""},model:{value:t.retrieval.state,callback:function(e){t.$set(t.retrieval,"state",e)},expression:"retrieval.state"}},t._l(t.status,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-top":"15px"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.$refs.success.start()}}},[t._v("添加")]),t._v(" "),a("saxo-pop",{ref:"success",attrs:{type:"success",title:"提出意见",width:"800px"},on:{close:function(e){return t.$refs.success.start()}}},[a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择意见类型"},model:{value:t.UpdaterType,callback:function(e){t.UpdaterType=e},expression:"UpdaterType"}},t._l(t.types,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-input",{staticStyle:{marginTop:"20px"},attrs:{type:"textarea","min-height":"30px",autosize:{minRows:5,maxRows:7},placeholder:"请输入内容"},model:{value:t.Content,callback:function(e){t.Content=e},expression:"Content"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.deleteData()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.addtrue()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{fixed:"",prop:"Creater",label:"提议者",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"Content",label:"意见"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdaterStateStr",label:"意见状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdaterTypeStr",label:"意见类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"提议时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BeginDate",label:"开始时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CompleteDate",label:"完成时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"审核",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[1==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("审核")]):t._e(),t._v(" "),2==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("开始研发")]):t._e(),t._v(" "),3==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("完成")]):t._e(),t._v(" "),4==e.row.UpdaterState||5==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("查看")]):t._e()],1)]}}])})],1)],1),t._v(" "),a("saxo-pop",{ref:"primary",attrs:{type:"primary",title:"审核意见",width:"800px"},on:{close:function(e){return t.$refs.primary.start()}}},[a("div",{staticStyle:{padding:"10px 10px 30px","box-sizing":"border-box"}},[a("h4",[t._v(t._s(t.SHitem.Creater))]),t._v(" "),a("p",{staticStyle:{color:"#909399","text-indent":"2em",padding:"10px","box-sizing":"border-box"}},[t._v(t._s(t.SHitem.Content))]),t._v(" "),a("br"),t._v(" "),null!=t.SHitem.RefuseMsg?a("h4",[t._v("拒绝原因")]):t._e(),t._v(" "),null!=t.SHitem.RefuseMsg?a("p",{staticStyle:{color:"#e16161","text-indent":"2em",padding:"10px","box-sizing":"border-box"}},[t._v(t._s(t.SHitem.RefuseMsg))]):t._e()]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$refs.primary.start()}}},[t._v("取 消")]),t._v(" "),1==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.Shtrue(2,2)}}},[t._v("审核不通过")]):t._e(),t._v(" "),1==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.Shtrue(1,2)}}},[t._v("审核通过")]):t._e(),t._v(" "),2==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.Shtrue(1,3)}}},[t._v("开始研发")]):t._e(),t._v(" "),3==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.Shtrue(1,4)}}},[t._v("完成")]):t._e()],1)]),t._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:t.total},on:{func:t.func}})],1)},staticRenderFns:[]},c=a("VU/8")(l,o,!1,null,null,null);e.default=c.exports}});