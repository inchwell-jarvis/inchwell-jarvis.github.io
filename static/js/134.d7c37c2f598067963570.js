webpackJsonp([134],{s2Nj:function(t,e){},zAgJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("pFYg"),l=a.n(o),n=a("t4zo"),i=a.n(n),r=a("uXZL"),s=a.n(r),c={data:function(){return{checked:!1,EngineerList:[],tableData:[],IDShow:"",drawer:!1,RightViewData:{},quarter:"",chooseQ:!1,dialogVisible:!1,year:""}},computed:{},watch:{},methods:{chooseQX:function(t){t||(this.tableData=[]);for(var e=0;e<this.EngineerList.length;e++){this.EngineerList[e].show=t}this.chooseQ=t;for(var a=0;a<this.EngineerList.length;a++){var o=this.EngineerList[a];o.show&&this.EngineerSOQuarterBonus(o)}},handleClick:function(t){console.log(t),this.drawer=!0,this.RightViewData=t},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},getValue:function(t){console.log(t),this.quarter=t.year+"-0"+t.quarter,this.tableData=[];for(var e=0;e<this.EngineerList.length;e++){this.EngineerList[e].show=!1}},GetQuarter:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,o="0"+Math.ceil(a/3);this.quarter=e+"-"+o},GetEmployeeMini:function(){var t=this,e={api:"get",url:this.$store.state.http+"System/GetEmployeeMini",data:{type:7}};this.$https(e).then(function(e){console.log(e.Data),t.EngineerList=e.Data;for(var a=0;a<t.EngineerList.length;a++){var o=t.EngineerList[a];t.$set(o,"show",!1)}})},choose:function(t){this.EngineerList[t].show=!0},AtTime:function(t){for(var e=[],a=0;a<this.EngineerList.length;a++){var o=this.EngineerList[a];o.show&&e.push(o)}console.log(e),this.check(e)},check:function(t){var e=this;if(0==this.tableData.length)this.EngineerSOQuarterBonus(t[0]),console.log("第一种情况 初始表格没数据");else if(0==t.length)console.log("格已有数据  但传来了空集合"),this.tableData=[];else{console.log("格已有数据  传来了数据");for(var a=0;a<t.length;a++){var o=t[a];-1==this.IDShow.indexOf(o.EmployeeId)?(this.EngineerSOQuarterBonus(o),console.log("添加"+o.ChineseName)):console.log("已有"+o.ChineseName)}for(var n=function(a){var o=e.tableData[a];if(r=!0,t.forEach(function(t){t.UserName==o.UserName&&(console.log("没有删除"),r=!1)}),r){e.tableData.splice(a,1),e.IDShow="";for(var l=0;l<t.length;l++)e.IDShow+=String(t[l].EmployeeId)+"-";return console.log(e.IDShow),{v:!1}}},i=0;i<this.tableData.length;i++){var r,s=n(i);if("object"===(void 0===s?"undefined":l()(s)))return s.v}}this.IDShow="";for(var c=0;c<t.length;c++)this.IDShow+=String(t[c].EmployeeId)+"-";console.log(this.IDShow)},EngineerSOQuarterBonus:function(t){var e=this,a={api:"get",url:this.$store.state.http+"Finance/CusSerSOYearBonus",data:{username:t.UserName,year:this.year}};this.$https(a).then(function(a){var o=a.Data;if(o.UserName=t.UserName,o.AsSales=o.Bonus.AsSales,o.SoSales=o.Bonus.SoSales,o.Area=o.EmployeeInfo.Area,o.Proportion=o.Bonus.Proportion,o.BonusAmount=o.Bonus.BonusAmount,o.BeforeSoSales=o.Bonus.BeforeSoSales,o.ChineseName=o.EmployeeInfo.ChineseName,o.PersonalSoSales=o.Bonus.PersonalSoSales,console.log(o),e.tableData.push(a.Data),console.log(e.tableData),0!=e.tableData.length){var l={};e.tableData=e.tableData.reduce(function(t,e){return!l[e.UserName]&&(l[e.UserName]=t.push(e)),t},[])}})},exportExcelTo:function(t){var e=s.a.utils.table_to_book(document.querySelector(t),{raw:!0}),a=s.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{i.a.saveAs(new Blob([a],{type:"application/octet-stream"}),"未命名.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,a)}return a}},created:function(){console.log(this.$route.query.index),this.GetEmployeeMini(),this.GetQuarter();var t=new Date;this.year=String(t.getFullYear())},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[a("div",{staticClass:"Left"},[a("el-date-picker",{staticStyle:{width:"100%",marginBottom:"20px"},attrs:{type:"year",size:"mini",placeholder:"选择年","value-format":"yyyy"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}}),t._v(" "),a("el-checkbox",{on:{change:t.chooseQX},model:{value:t.chooseQ,callback:function(e){t.chooseQ=e},expression:"chooseQ"}},[a("span",{staticStyle:{color:"#409EFF","font-weight":"bold"}},[t._v("全选")])]),t._v(" "),t._l(t.EngineerList,function(e,o){return a("el-checkbox",{key:o,on:{click:function(e){return t.choose(o)},change:t.AtTime},model:{value:e.show,callback:function(a){t.$set(e,"show",a)},expression:"item.show"}},[a("div",{staticStyle:{width:"80px",float:"left"}},[t._v(t._s(e.Area)+" ")]),t._v("\n      "+t._s(e.Name)+"\n    ")])})],2),t._v(" "),a("div",{staticClass:"Right"},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.exportExcelTo("#out-table")}}},[t._v("打 印")]),t._v(" "),a("saxo-pop",{ref:"primary",attrs:{type:"primary",title:"客服零配件年度奖金",width:"600px"},on:{close:function(e){return t.$refs.primary.start()}}},[a("h1",[t._v("客服零配件年度奖金")]),t._v(" "),a("br"),t._v(" "),a("p",[a("span",{staticClass:"spanTxt"},[t._v("1、")]),t._v(" 订单来源：隶属于自己且付款日期(财务操作付款的日期)在当前年的订单")]),t._v(" "),a("p",[a("span",{staticClass:"spanTxt"},[t._v("2、")]),t._v(" 计算方式：根据全部门总销售额计算奖金比例 * 自己的有效销售额")]),t._v(" "),a("p",[a("span",{staticClass:"spanTxt"},[t._v("3、")]),t._v(" 有效销售额：单个订单的有效销售额 = 订单总金额 - 订单返点额 - 订单退货额")]),t._v(" "),a("p",[a("span",{staticClass:"spanTxt"},[t._v("4、")]),t._v(" 统计日期：上一年的最后一个月的26号(含) 至 本年的最后一个月的25号(含)")])]),t._v(" "),a("el-button",{staticStyle:{float:"right",marginRight:"10px"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.$refs.primary.start()}}},[t._v("\n      查看奖金配置")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"mini",id:"out-table","default-sort":{prop:"Area",order:"descending"}}},[a("el-table-column",{attrs:{label:"",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.$index+1)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"ChineseName",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"Area",label:"区域",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"SoSales",label:"总销售额",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"PersonalSoSales",label:"个人销售额"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"BeforeSoSales",label:"季度之前退货&返点额"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"BonusAmount",label:"最终奖金"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("明细")])]}}])})],1)],1),t._v(" "),a("el-drawer",{attrs:{visible:t.drawer,"with-header":!1,"modal-append-to-body":!1,size:"50%"},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"rightView"},[a("h2",[t._v(t._s(t.RightViewData.ChineseName)+" "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.RightViewData.Area))])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("区域销售额 "+t._s(t.RightViewData.SoSales))]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.exportExcelTo("#out-table2")}}},[t._v("打 印")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.RightViewData.SOSalesDtos,size:"mini",id:"out-table2"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"报价单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DiscountAmount",label:"优惠总金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ReturnedPurchaseAmount",label:"退货金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"RebateAmount",label:"返点金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Sales",label:"销售",width:"100"}})],1),a("br"),t._v(" "),a("p",[t._v("大包销售额 "+t._s(t.RightViewData.AsSales))]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.exportExcelTo("#out-table3")}}},[t._v("打 印")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.RightViewData.ASSalesDtos,size:"mini",id:"out-table3"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DiscountAmount",label:"回款金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"RebateAmount",label:"返点金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Sales",label:"销售",width:"100"}})],1),a("br"),t._v(" "),a("p",[t._v("个人销售额 "+t._s(t.RightViewData.PersonalSoSales))]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.exportExcelTo("#out-table4")}}},[t._v("打 印")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.RightViewData.PersonalSOSalesDtos,size:"mini",id:"out-table4"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"报价单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DiscountAmount",label:"优惠总金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ReturnedPurchaseAmount",label:"退货金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"RebateAmount",label:"返点金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Proportion",label:"比例",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"占比",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(parseInt(100/e.row.OtherInt)+"%")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Sales",label:"销售",width:"100"}})],1),a("br"),t._v(" "),a("p",[t._v("季度之前退货&返点额 "+t._s(t.RightViewData.BeforeSoSales))]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.exportExcelTo("#out-table5")}}},[t._v("打 印")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.RightViewData.BeforeSOSalesDtos,size:"mini",id:"out-table5"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"报价单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ReturnedPurchaseAmount",label:"退货金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"RebateAmount",label:"返点金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Proportion",label:"比例",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"占比",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(parseInt(100/e.row.OtherInt)+"%")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Sales",label:"销售",width:"100"}})],1),a("br"),t._v(" "),a("p",[t._v("奖金比例配置 ")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.exportExcelTo("#out-table6")}}},[t._v("打 印")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.RightViewData.BonusConfigDtos,size:"mini",id:"out-table6"}},[a("el-table-column",{attrs:{label:"到达档位"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Selectd?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#67C23A",fontWeight:"bold"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Proportion",label:"比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Price",label:"金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BonusDate",label:"年份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ConfigType",label:"名称"}})],1),a("br")],1)])],1)},staticRenderFns:[]};var h=a("VU/8")(c,u,!1,function(t){a("s2Nj")},"data-v-3ff7d462",null);e.default=h.exports}});