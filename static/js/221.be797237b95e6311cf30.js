webpackJsonp([221],{mmbB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("bOdI"),a=n.n(o),l=n("t4zo"),r=n.n(l),s=n("uXZL"),i=n.n(s),u={data:function(){var t;return{tableData:[],tableDataExcel:[],headerCellStyle:(t={background:"#f7f8fd",fontSize:"12px",fontWeight:400,fontStyle:"normal"},a()(t,"fontSize","11px"),a()(t,"padding","5px"),t),cellStyle:{height:"48px",fontSize:"12px"},kufang:-1,kufangs:[{label:"全部",value:-1},{label:"实库",value:1},{label:"供应商库",value:2}],location:"",proCode:"",desc:"",brand:"",total:0,pageNum:1,longcode:"",numPerPage:this.$store.state.DisplayNumber}},computed:{},watch:{},methods:{exportExcelToStart:function(){var t=this,e={data:{location:this.location,proCode:this.proCode,desc:this.desc,brand:this.brand,longcode:this.longcode,kufang:this.kufang,pageNum:1,numPerPage:999999999,orderField:"",orderDirection:""},api:"get",url:this.$store.state.http+"StorageRoom/MacInventorys"};this.$https(e).then(function(e){t.tableDataExcel=e.Data.Dtos;for(var n=0;n<t.tableDataExcel.length;n++){var o=t.tableDataExcel[n];o.Number2=o.Inventory+" - "+o.Number}var a=t;setTimeout(function(){a.exportExcelTo()},1e3)})},exportExcelTo:function(){var t=i.a.utils.table_to_book(document.querySelector("#out-table"),{raw:!0}),e=i.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"整机库存.xlsx"),this.tableData2=null}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},router:function(t,e){this.$router.push({path:"/StorageRoom2",query:{State:t,data:e,to:2,ProductId:e.ProductId,row:e}})},SaxoClick:function(t){console.log(t)},CreateMSO:function(){this.$router.push({path:"/CreateMSO"})},MachineSO:function(t){console.log(t),this.$router.push({path:"/machine-sales-edit",query:{Id:t.ID}})},start:function(){var t=this,e={data:{location:this.location,proCode:this.proCode,desc:this.desc,brand:this.brand,longcode:this.longcode,kufang:this.kufang,pageNum:this.pageNum,numPerPage:this.numPerPage,orderField:"",orderDirection:""},api:"get",url:this.$store.state.http+"StorageRoom/MacInventorys"};this.$https(e).then(function(e){console.log(e),t.tableData=e.Data.Dtos;for(var n=0;n<t.tableData.length;n++){var o=t.tableData[n];o.Number2=o.Inventory+" - "+o.Number}t.total=e.Data.DataBars})},func:function(t,e){this.numPerPage=t,this.pageNum=e,this.start()},querySearch:function(t,e){if(void 0==t)return t="",e(this.Optios),!1;if(""==t)return e(this.Optios),!1;for(var n=t,o=this.Optios,a=[],l=(n.split("")[0],0);l<o.length;l++){var r=o[l];-1!=r.value.indexOf(n)&&a.push(r)}e(a)},Manufacturer:function(){var t=this,e={url:this.$store.state.http+"System/GetBrand",api:"get"};this.$https(e).then(function(e){t.Optios=e.Data;for(var n=0;n<t.Optios.length;n++)t.Optios[n].value=t.Optios[n].Value;console.log(t.Optios)})}},created:function(){this.Manufacturer(),this.start()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("router-view",{on:{refresh:t.start}}),t._v(" "),n("div",{staticClass:"retrieve"},[n("div",{staticClass:"leftSpan"},[t._v("\n            整机库存\n        ")]),t._v(" "),n("div",{staticClass:"ConView",staticStyle:{width:"calc(100% - 400px)"}},[n("div",{staticClass:"department"},[n("span",[t._v("库位")]),t._v(" "),n("el-input",{attrs:{placeholder:"库位",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.location,callback:function(e){t.location=e},expression:"location"}})],1),t._v(" "),n("div",{staticClass:"department"},[n("span",[t._v("对内编码")]),t._v(" "),n("el-input",{attrs:{placeholder:"对内编码",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.proCode,callback:function(e){t.proCode=e},expression:"proCode"}})],1),t._v(" "),n("div",{staticClass:"department"},[n("span",[t._v("内部编码")]),t._v(" "),n("el-input",{attrs:{placeholder:"内部编码",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.longcode,callback:function(e){t.longcode=e},expression:"longcode"}})],1),t._v(" "),n("div",{staticClass:"department"},[n("span",[t._v("产品描述")]),t._v(" "),n("el-input",{attrs:{placeholder:"产品描述",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1),t._v(" "),n("div",{staticClass:"department"},[n("span",[t._v("库房")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择库房",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.kufang,callback:function(e){t.kufang=e},expression:"kufang"}},t._l(t.kufangs,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),n("div",{staticClass:"department"},[n("span",[t._v("品牌")]),t._v(" "),n("el-autocomplete",{staticClass:"inline-input",attrs:{id:"autocomplete",size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearch,placeholder:"请选择品牌",clearable:""},on:{input:function(e){return t.start(1)}},model:{value:t.brand,callback:function(e){t.brand=e},expression:"brand"}})],1)]),t._v(" "),n("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"success"},on:{click:function(e){return t.router("入库","none")}}},[t._v("入库")]),t._v(" "),n("saxo-button",{staticStyle:{float:"right","margin-top":"13px","margin-right":"13px"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.exportExcelToStart()}}},[t._v("导出")]),t._v(" "),n("saxo-button",{staticStyle:{float:"right","margin-top":"13px","margin-right":"13px"},attrs:{mini:"",type:"primary"},on:{click:function(e){return t.start()}}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"content2"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":t.headerCellStyle,"cell-style":t.cellStyle,stripe:"",height:"100%"}},[n("el-table-column",{attrs:{prop:"Location",label:"库位",width:"150","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{prop:"ProductCode",label:"对内编码",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"InchwellCode",label:"对外编码",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"采购中",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[0])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"在途",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[1])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"在库",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[2])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"库存合计",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(Number(e.row.NetInventory.split("*")[0])+Number(e.row.NetInventory.split("*")[1])+Number(e.row.NetInventory.split("*")[2]))+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"销售量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[3])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"净库存",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[4])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"Describe",label:" 产品描述","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{prop:"Brand",label:"品牌",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Number",label:"本库位库存",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Unit",label:"单位",width:"60"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("nav",{staticStyle:{"text-align":"center"}},[n("saxo-button",{attrs:{mini:"",type:"primary"},on:{click:function(n){return t.router("出库",e.row)}}},[t._v("出库")]),t._v(" "),n("saxo-button",{attrs:{mini:"",type:"success"},on:{click:function(n){return t.router("入库",e.row)}}},[t._v("入库")]),t._v(" "),n("saxo-button",{attrs:{mini:"",type:"success"},on:{click:function(n){return t.router("转库",e.row)}}},[t._v("转库")])],1)]}}])})],1),t._v(" "),n("el-table",{staticStyle:{display:"none"},attrs:{data:t.tableDataExcel,id:"out-table"}},[n("el-table-column",{attrs:{prop:"Location",label:"库位",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"ProductCode",label:"对内编码",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"InchwellCode",label:"对外编码",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"采购中",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[0])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"在途",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[1])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"在库",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[2])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"库存合计",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(Number(e.row.NetInventory.split("*")[0])+Number(e.row.NetInventory.split("*")[1])+Number(e.row.NetInventory.split("*")[2]))+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"销售量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[3])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"净库存",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.NetInventory.split("*")[4])+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"Describe",label:" 产品描述","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{prop:"Brand",label:"品牌",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Number",label:"本库位库存",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Unit",label:"单位",width:"60"}})],1)],1),t._v(" "),n("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}})],1)},staticRenderFns:[]},p=n("VU/8")(u,c,!1,null,null,null);e.default=p.exports}});