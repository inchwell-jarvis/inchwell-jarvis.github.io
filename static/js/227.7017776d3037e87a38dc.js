webpackJsonp([227],{EKJi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),l=a.n(n),r={data:function(){return{options:[{value:-1,label:"全部"},{value:9,label:"可用资金"},{value:1,label:"未认领"},{value:2,label:"部分认领"},{value:3,label:"全部认领"}],tableData:[],total:0,retrieval:{search:"",state:9,pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:""}}},computed:{retrievalJT:function(){return l()(this.retrieval)}},watch:{retrievalJT:function(t,e){this.WatchFenYe(t,e)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{printer:function(){var t=this,e=JSON.parse(l()(this.retrieval));e.pageNum=1,e.numPerPage=999999,this.API_GET("CRM/GetBBOCs",e).then(function(e){var a={th:["供应商名称","创建人","创建时间","状态","业务来源类型","发票状态","可用性","资金量","使用量","剩余量"]};a.td=e.Dtos.map(function(e){return[e.BusinessLicenseName,e.Creater,e.CreateDate.split("T")[0],e.StateStr,e.SourceType,e.InvoiceStateStr,e.Enable?"可用":"待审核",t.FinancialAmountFormat(e.Amount),t.FinancialAmountFormat(e.UsageAmount),t.FinancialAmountFormat(e.Amount-e.UsageAmount)]}),t.NewDownloadTable(a,t.$route.meta.title)})},EnableBBOC:function(t){var e=this;this.API_POST("CRM/EnableBBOC",{Id:t.ID}).then(function(t){e.$message({message:"审核成功！",type:"success"}),e.start()})},AddBBOC:function(){this.$router.push({path:"/supplier-account-pending-create"})},start:function(){var t=this;this.API_GET("CRM/GetBBOCOfSuppliers",this.retrieval).then(function(e){console.log(e),t.tableData=e.Dtos,t.total=e.DataBars;for(var a=0;a<t.tableData.length;a++){var n=t.tableData[a];n.CreateDate=n.CreateDate.split("T")[0],n.SystemInfo?n.SystemInfo2=n.SystemInfo.split("@"):n.SystemInfo2=[]}})},SaxoFenYe:function(t,e){this.retrieval.numPerPage=t,this.retrieval.pageNum=e,this.start()}},created:function(){this.start()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:t.start}}),t._v(" "),a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[t._v("\n            "+t._s(t.$route.meta.title)+"\n            "),a("i",{staticClass:"el-icon-printer",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.printer()}}})]),t._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[t._v("供应商名称")]),t._v(" "),a("el-input",{attrs:{placeholder:"供应商名称",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.retrieval.search,callback:function(e){t.$set(t.retrieval,"search",e)},expression:"retrieval.search"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"状态",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.retrieval.state,callback:function(e){t.$set(t.retrieval,"state",e)},expression:"retrieval.state"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"success"},on:{click:function(e){return t.AddBBOC()}}},[t._v("创 建")])],1),t._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"BusinessLicenseName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"BelongCompany",label:"隶属公司",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"创建人",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SourceType",label:"业务来源类型",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"InvoiceStateStr",label:"发票状态",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"可用性",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.Enable?"可用":"待审核"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"资金量",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.Amount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.UsageAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"剩余量",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.Amount-e.row.UsageAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"系统信息",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top-start",title:"系统信息",trigger:"hover"}},[t._l(e.row.SystemInfo2,function(e,n){return a("p",{key:n},[t._v(t._s(e))])}),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("系统信息"),a("i",{staticClass:"el-icon-warning-outline"})])],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Enable?t._e():a("saxo-button",{attrs:{mini:""},on:{click:function(a){return t.EnableBBOC(e.row)}}},[t._v("审核")])]}}])})],1)],1),t._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:t.total},on:{func:t.SaxoFenYe}})],1)},staticRenderFns:[]},s=a("VU/8")(r,o,!1,null,null,null);e.default=s.exports}});