webpackJsonp([153],{Eza5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("t4zo"),l=a.n(n),s=a("uXZL"),o=a.n(s),r={data:function(){return{month:"",GetKPIsEsach:{pageNum:1,numPerPage:10,orderField:"",orderDirection:"",month:"",name:"",area:"",state:"-1"},DataStr:[],areaS:[],total:0,StateList:[{name:"全部",value:"-1"},{name:"已初核",value:"1"},{name:"已复核",value:"2"}],Data:[]}},computed:{},watch:{},methods:{tableRowClassName:function(t){return 1==t.row.Status?"color568248533242":""},init:function(){var t=this;null==this.month?this.GetKPIsEsach.month="":this.GetKPIsEsach.month=this.month;var e={api:"get",url:this.$store.state.http+"PCenter/GetTravelAllowances",data:this.GetKPIsEsach};this.$https(e).then(function(e){console.log(e.Data),t.Data=e.Data.Dtos,t.total=e.Data.DataBars;for(var a=0;a<t.Data.length;a++){var n=t.Data[a];1==n.Status?n.StatusStr="已初核":n.StatusStr="已复核"}})},initGetArea:function(){var t=this,e={url:this.$store.state.http+"System/GetArea",api:"get"};this.$https(e).then(function(e){t.areaS=e.Data})},func:function(t,e){this.GetKPIsEsach.numPerPage=t,this.GetKPIsEsach.pageNum=e,this.init()},initKPI:function(){this.$router.push({path:"AddTravelAllowance"})},look:function(t){this.$store.state.Vuex.Id=t.Id,this.$router.push({path:"PreserverLook"})},edit:function(t){console.log(t),this.$router.push({path:"review-travel-allowance",query:{ID:t.Id}})},Excel:function(){var t=this;null==this.month?this.GetKPIsEsach.month="":this.GetKPIsEsach.month=this.month;var e=this.GetKPIsEsach;e.pageNum=1,e.numPerPage=999;var a={api:"get",url:this.$store.state.http+"PCenter/GetTravelAllowances",data:e};this.$https(a).then(function(e){console.log(e.Data),t.DataStr=e.Data.Dtos;for(var a=0;a<t.Data.length;a++){var n=t.Data[a];1==n.Status?n.StatusStr="已初核":n.StatusStr="已复核"}var l=t;setTimeout(function(){l.exportExcel()},500)})},exportExcel:function(){var t=o.a.utils.table_to_book(document.getElementById("#out-table"),{raw:!0}),e=o.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{l.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"index.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e}},created:function(){this.GetKPIsEsach.numPerPage=this.$store.state.DisplayNumber,this.init(),this.initGetArea()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:t.init}}),t._v(" "),a("div",{staticClass:"TopSerch"},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入姓名"},on:{change:function(e){return t.init(1)}},model:{value:t.GetKPIsEsach.name,callback:function(e){t.$set(t.GetKPIsEsach,"name",e)},expression:"GetKPIsEsach.name"}}),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM",size:"mini",type:"month",placeholder:"选择月"},on:{change:function(e){return t.init(1)}},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择状态"},on:{change:function(e){return t.init(1)}},model:{value:t.GetKPIsEsach.state,callback:function(e){t.$set(t.GetKPIsEsach,"state",e)},expression:"GetKPIsEsach.state"}},t._l(t.StateList,function(t){return a("el-option",{key:t.Value,attrs:{label:t.name,value:t.value}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",clearable:"",placeholder:"请选择区域"},on:{change:function(e){return t.init(1)}},model:{value:t.GetKPIsEsach.area,callback:function(e){t.$set(t.GetKPIsEsach,"area",e)},expression:"GetKPIsEsach.area"}},t._l(t.areaS,function(t){return a("el-option",{key:t.Value,attrs:{label:t.Value,value:t.Value}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.init(1)}}},[t._v("检索")]),t._v(" "),a("el-button",{attrs:{type:"info",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.Excel()}}},[t._v("导出Excel")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.initKPI()}}},[t._v("创建")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,size:"mini",height:this.$store.state.TableOptimumHeight,"row-class-name":t.tableRowClassName,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"Date",label:"月份",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Quyu",label:"区域",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EnginnerName",label:"工程师",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Days",label:"天数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"FirstInspection",label:"初审人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ToReview",label:"复核人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StatusStr",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.Status?a("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-search"},on:{click:function(a){return t.look(e.row)}}}):t._e(),t._v(" "),1==e.row.Status?a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}}):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"content",staticStyle:{display:"none"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.DataStr,size:"mini",id:"#out-table",height:this.$store.state.TableOptimumHeight,"row-class-name":t.tableRowClassName,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"Date",label:"月份",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Quyu",label:"区域",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EnginnerName",label:"工程师",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Days",label:"天数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"FirstInspection",label:"初审人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ToReview",label:"复核人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StatusStr",label:"状态"}})],1)],1),t._v(" "),a("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,i,!1,function(t){a("SUSg")},null,null);e.default=c.exports},SUSg:function(t,e){}});