webpackJsonp([82],{R1Op:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),l=a.n(i),s=a("mvHQ"),n=a.n(s),r=a("a52U"),o=a.n(r),c={data:function(){return{retrieval:{pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:"",province:"",role:"",name:""},total:0,citys:o.a,Provinces:[],Roles:[],Employ:[],data:[],dialogTableVisible:!1,CJData:{Name:"",province:"",Role:"",Mobile:"",Tel:"",Other:""},EditandAdd:!0,shape:"success"}},computed:{retrievalJT:function(){return n()(this.retrieval)}},watch:{retrievalJT:function(e,t){this.WatchFenYe(e,t)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},created:function(){this.GeyNeed(),this.start()},methods:{func:function(e,t){this.retrieval.numPerPage=e,this.retrieval.pageNum=t,this.start()},start:function(){var e=this;this.API_GET("System/GetInchwellLMs",this.retrieval).then(function(t){e.total=t.DataBars,e.data=t.Dtos.map(function(t){var a=e.Provinces.find(function(e){return e.value===t.Province});return l()({},t,{Provincelabel:a?a.label:""})})})},GeyNeed:function(){var e=this;this.Provinces=this.citys,this.API_GET("System/GetRoles",{one:""}).then(function(t){e.Roles=t}),this.API_GET("System/GetEmployeeMini",{type:3}).then(function(t){e.Employ=t.map(function(e){return{UserName:e.UserName,value:e.Name}})})},selectGroup:function(e){console.log(e),this.retrieval.province=e.key},selectGroups:function(e){console.log(e),this.retrieval.name=e.value},querySearch:function(e,t){if(void 0==e||""==e)return t(this.Provinces);for(var a=e,i=this.Provinces,l=[],s=0;s<i.length;s++){var n=i[s];-1!=n.value.indexOf(a)&&l.push(n)}t(l)},querySearchname:function(e,t){if(void 0==e||""==e)return t(this.Employ);for(var a=e,i=this.Employ,l=[],s=0;s<i.length;s++){var n=i[s];-1!=n.value.indexOf(a)&&l.push(n)}t(l)},selectGroupsCJ:function(e){console.log(e),this.CJData=e},selectGroupCJ:function(e){console.log(e),this.CJData.province=e.key},querySearchRole:function(e,t){for(var a=[],i=0;i<this.Roles.length;i++)a.push({value:this.Roles[i].Name});if(void 0==e||""==e)return t(a);for(var l=e,s=a,n=[],r=0;r<s.length;r++){var o=s[r];-1!=o.value.indexOf(l)&&n.push(o)}t(n)},AddOrder:function(){var e=this;return""==this.CJData.Name||null==this.CJData.Name?(this.$message.warning("请选择员工！"),!1):""==this.CJData.Province||null==this.CJData.Province?(this.$message.warning("请选择省份！"),!1):""==this.CJData.Role||null==this.CJData.Role?(this.$message.warning("请选择角色！"),!1):""==this.CJData.Mobile||null==this.CJData.Mobile?(this.$message.warning("请输入手机号！"),!1):""==this.CJData.Tel||null==this.CJData.Tel?(this.$message.warning("请输入座机号！"),!1):void(this.EditandAdd?this.API_POST("System/AddInchwellLM",this.CJData).then(function(t){e.delCJData(),e.start()}):this.API_POST("System/UpdateInchwellLM",this.CJData).then(function(t){e.delCJData(),e.start()}))},delCJData:function(){this.CJData={},this.nameCJ="",this.provinceCJ="",this.dialogTableVisible=!1,this.$refs.success.start()},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(a){e(),t.delCJData()}).catch(function(e){})},Edit:function(e){this.CJData=JSON.parse(n()(e)),this.EditandAdd=!1,this.shape="primary",this.dialogTableVisible=!0,this.$refs.success.start()}},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[e._v("\n            "+e._s(e.$route.meta.title)+"\n        ")]),e._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[e._v("姓名")]),e._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"150px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":e.querySearchname,placeholder:"请选择姓名",clearable:""},on:{select:e.selectGroups},model:{value:e.retrieval.name,callback:function(t){e.$set(e.retrieval,"name",t)},expression:"retrieval.name"}})],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("省份")]),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择省份",clearable:""},model:{value:e.retrieval.province,callback:function(t){e.$set(e.retrieval,"province",t)},expression:"retrieval.province"}},e._l(e.Provinces,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.value,clearable:""}})}),1)],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("角色")]),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择角色",clearable:""},model:{value:e.retrieval.role,callback:function(t){e.$set(e.retrieval,"role",t)},expression:"retrieval.role"}},e._l(e.Roles,function(e){return a("el-option",{key:e.Name,attrs:{label:e.Name,value:e.Name}})}),1)],1)]),e._v(" "),a("saxo-button",{staticStyle:{"margin-top":"15px",float:"right"},attrs:{type:"success",mini:""},on:{click:function(t){e.$refs.success.start(),e.EditandAdd=!0,e.shape="success"}}},[e._v("创建")])],1),e._v(" "),a("div",{staticClass:"content2"},[a("el-table",{attrs:{data:e.data,"header-cell-style":e.$store.state.headerCellStyle,"cell-style":e.$store.state.cellStyle,height:"100%"}},[a("el-table-column",{attrs:{prop:"Name",label:"姓名",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Role",label:"角色",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Provincelabel",label:"省份",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Mobile",label:"手机号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Tel",label:"座机",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Other",label:"备注","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("saxo-button",{attrs:{mini:""},on:{click:function(a){return e.Edit(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("saxo-pop",{ref:"success",attrs:{type:e.shape,title:"添加联系人",width:"600px"},on:{close:function(t){return e.$refs.success.start()}}},[a("div",{staticClass:"dial",staticStyle:{width:"100%",height:"350px"}},[a("div",{staticClass:"li"},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"300px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":e.querySearchname,placeholder:"选择员工",clearable:""},on:{select:e.selectGroupsCJ},model:{value:e.CJData.Name,callback:function(t){e.$set(e.CJData,"Name",t)},expression:"CJData.Name"}},[a("template",{slot:"prepend"},[e._v("选择员工")])],2)],1),e._v(" "),a("div",{staticClass:"li"},[a("div",{staticClass:"liLefttext"},[e._v("选择省份")]),e._v(" "),a("el-select",{staticStyle:{width:"209px"},attrs:{size:"mini",placeholder:"请选择省份",clearable:""},model:{value:e.CJData.Province,callback:function(t){e.$set(e.CJData,"Province",t)},expression:"CJData.Province"}},e._l(e.Provinces,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"li"},[a("div",{staticClass:"liLefttext"},[e._v("选择角色")]),e._v(" "),a("el-select",{staticStyle:{width:"209px"},attrs:{size:"mini",placeholder:"请选择角色",clearable:""},model:{value:e.CJData.Role,callback:function(t){e.$set(e.CJData,"Role",t)},expression:"CJData.Role"}},e._l(e.Roles,function(e){return a("el-option",{key:e.Name,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("div",{staticClass:"li"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入手机号",size:"mini"},model:{value:e.CJData.Mobile,callback:function(t){e.$set(e.CJData,"Mobile",t)},expression:"CJData.Mobile"}},[a("template",{slot:"prepend"},[e._v("手机号")])],2)],1),e._v(" "),a("div",{staticClass:"li"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入座机",size:"mini"},model:{value:e.CJData.Tel,callback:function(t){e.$set(e.CJData,"Tel",t)},expression:"CJData.Tel"}},[a("template",{slot:"prepend"},[e._v("座机号")])],2)],1),e._v(" "),a("div",{staticClass:"li"},[a("el-input",{staticStyle:{float:"left",width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"备注"},model:{value:e.CJData.Other,callback:function(t){e.$set(e.CJData,"Other",t)},expression:"CJData.Other"}})],1)]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.delCJData()}}},[e._v("取 消")]),e._v(" "),a("saxo-button",{attrs:{mini:"",type:e.shape},on:{click:function(t){return e.AddOrder()}}},[e._v("确 定 ")])],1)]),e._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:e.total},on:{func:e.func}})],1)},staticRenderFns:[]};var v=a("VU/8")(c,u,!1,function(e){a("pqaF")},"data-v-7345d7ec",null);t.default=v.exports},pqaF:function(e,t){}});