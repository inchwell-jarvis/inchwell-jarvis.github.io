webpackJsonp([30],{F4Uy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),l={data:function(){return{total:0,Data:[],GetTargetSalesList:{pageNum:1,numPerPage:10,orderField:"",orderDirection:"",title:"",name:"",dep:"",range:0},Bumen:["客服部","保养部","销售部"],JTime:[{key:0,name:"全部"},{key:1,name:"当前年"},{key:2,name:"当前季"},{key:3,name:"当前月"}],dialogTableVisible:!1,dialogTableVisibleTrue:!1,name:"个人",Time:"",Selectgeren:"",SelectStaff:{},SelectSector:"",TargetSales:{Responsible:"",ResponsibleId:"",Amount:"",Begin:"",End:"",Type:1,Title:""},YGList:[],item:{}}},computed:{},watch:{},methods:{formatPrice:function(e,t){!t&&(t=",");var i=e.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),i.join(".")},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.deleteadddata()}).catch(function(e){})},func:function(e,t){this.GetTargetSalesList.numPerPage=e,this.GetTargetSalesList.pageNum=t,this.init()},init:function(e){var t=this;1==e&&(this.GetTargetSalesList.pageNum=1),this.API_GET("PCenter/GetTargetSales",this.GetTargetSalesList).then(function(e){console.log(e),t.total=e.DataBars,t.Data=e.Dtos;for(var i=0;i<t.Data.length;i++){var a=t.Data[i];a.Begin=a.Begin.slice(0,7),a.End=a.End.slice(0,7)}})},GetEmployeeMini:function(){var e=this;this.API_GET("System/GetEmployeeMini",{type:3}).then(function(t){e.YGList=t.map(function(e){return s()({},e,{value:e.Name})})})},querySearch:function(e,t){if(void 0==e)return e="",!1;for(var i=[],a=0;a<this.YGList.length;a++){var s=this.YGList[a];-1!=s.value.indexOf(e)&&i.push(s)}t(i)},handleSelect:function(e){console.log(e),this.SelectStaff=e},create:function(){var e=this;if("个人"==this.name&&(this.TargetSales.Responsible=this.SelectStaff.Name,this.TargetSales.ResponsibleId=this.SelectStaff.EmployeeId),"部门"==this.name&&(this.TargetSales.Responsible=this.SelectSector,this.TargetSales.ResponsibleId=this.SelectSector),""==this.Time)return this.$message.warning("未选择时间！");this.TargetSales.Begin=this.Time[0],this.TargetSales.End=this.Time[1],this.API_POST("PCenter/AddTargetSales",this.TargetSales).then(function(t){e.TargetSales={},e.Selectgeren="",e.Time="",e.dialogTableVisible=!1,e.$refs.success.start(),e.init()})},look:function(e){var t=this;this.item=e,this.API_GET("PCenter/StatTargetSales",{TSID:e.ID}).then(function(i){console.log(i),console.log(e),t.item.Data=Number(i),t.item.schedule="dev",t.item.schedule=(Number(i)/Number(t.item.Amount)*100).toFixed(2)+"%",console.log(t.item.schedule),t.$refs.primary.start(),setTimeout(function(){document.getElementById("JDT").style.width=t.item.schedule},100)})}},created:function(){this.GetTargetSalesList.numPerPage=this.$store.state.DisplayNumber,this.init(),this.GetEmployeeMini()}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("router-view",{on:{refresh:e.init}}),e._v(" "),i("div",{staticClass:"TopSerch"},[i("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入标题"},on:{change:function(t){return e.init(1)}},model:{value:e.GetTargetSalesList.title,callback:function(t){e.$set(e.GetTargetSalesList,"title",t)},expression:"GetTargetSalesList.title"}}),e._v(" "),i("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入姓名"},on:{change:function(t){return e.init(1)}},model:{value:e.GetTargetSalesList.name,callback:function(t){e.$set(e.GetTargetSalesList,"name",t)},expression:"GetTargetSalesList.name"}}),e._v(" "),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",clearable:"",placeholder:"请选择部门"},on:{change:function(t){return e.init(1)}},model:{value:e.GetTargetSalesList.dep,callback:function(t){e.$set(e.GetTargetSalesList,"dep",t)},expression:"GetTargetSalesList.dep"}},e._l(e.Bumen,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",clearable:"",placeholder:"请选择时间"},on:{change:function(t){return e.init(1)}},model:{value:e.GetTargetSalesList.range,callback:function(t){e.$set(e.GetTargetSalesList,"range",t)},expression:"GetTargetSalesList.range"}},e._l(e.JTime,function(e){return i("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1),e._v(" "),i("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(t){return e.init(1)}}},[e._v("检索")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(t){return e.$refs.success.start()}}},[e._v("创建")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:e.Data,"highlight-current-row":"",height:this.$store.state.TableOptimumHeight,border:"","header-cell-style":{background:"#e1e1e1"}}},[i("el-table-column",{attrs:{fixed:"",prop:"Title","show-overflow-tooltip":!0,label:"标题"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Creater",width:"150",label:"创建人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Responsible",width:"150",label:"目标人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Department",width:"100",label:"隶属部门"}}),e._v(" "),i("el-table-column",{attrs:{width:"150",label:"目标金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticClass:"textR"},[e._v("￥"+e._s(parseInt(t.row.Amount).toLocaleString()))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"Begin",width:"100",label:"开始时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"End",width:"100",label:"结束时间"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.look(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),i("saxo-pop",{ref:"success",attrs:{type:"success",title:"创建目标",width:"800px"},on:{close:function(t){return e.$refs.success.start()}}},[i("div",{staticClass:"dial",staticStyle:{width:"100%",height:"300px"}},[i("div",{staticClass:"li"},[i("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入标题",size:"mini"},model:{value:e.TargetSales.Title,callback:function(t){e.$set(e.TargetSales,"Title",t)},expression:"TargetSales.Title"}},[i("template",{slot:"prepend"},[e._v("标题")])],2)],1),e._v(" "),i("div",{staticClass:"li"},[i("el-radio-group",{attrs:{size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[i("el-radio-button",{attrs:{label:"个人"}}),e._v(" "),i("el-radio-button",{attrs:{label:"部门"}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"个人"==e.name,expression:"name == '个人' "}],staticClass:"li"},[i("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"350px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":e.querySearch,placeholder:"请输入关键词",clearable:""},on:{select:e.handleSelect},model:{value:e.Selectgeren,callback:function(t){e.Selectgeren=t},expression:"Selectgeren"}},[i("template",{slot:"prepend"},[e._v("选择员工")])],2)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"个人"!=e.name,expression:"name != '个人' "}],staticClass:"li"},[i("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",clearable:"",placeholder:"请选择部门"},model:{value:e.SelectSector,callback:function(t){e.SelectSector=t},expression:"SelectSector"}},e._l(e.Bumen,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),i("div",{staticClass:"li"},[i("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入目标金额",size:"mini"},model:{value:e.TargetSales.Amount,callback:function(t){e.$set(e.TargetSales,"Amount",t)},expression:"TargetSales.Amount"}},[i("template",{slot:"prepend"},[e._v("目标金额")])],2)],1),e._v(" "),i("div",{staticClass:"li"},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"monthrange",size:"mini","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:e.Time,callback:function(t){e.Time=t},expression:"Time"}})],1)]),e._v(" "),i("div",{staticStyle:{width:"100%","text-align":"right"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.success.start()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.create}},[e._v("确 定")])],1)]),e._v(" "),i("saxo-pop",{ref:"primary",attrs:{type:"primary",title:"目标进度",width:"600px"},on:{close:function(t){return e.$refs.primary.start()}}},[i("div",{staticClass:"dial",staticStyle:{width:"100%",height:"300px"}},[i("div",{staticClass:"li"},[i("span",[e._v("目标标题")]),e._v(e._s(e.item.Title)+"\n            ")]),e._v(" "),i("div",{staticClass:"li"},[i("span",[e._v("目标人")]),e._v(e._s(e.item.Responsible)+"\n            ")]),e._v(" "),i("div",{staticClass:"li"},[i("span",[e._v("目标部门")]),e._v(e._s(e.item.Department)+"\n            ")]),e._v(" "),i("div",{staticClass:"li"},[i("span",[e._v("目标金额")]),e._v(e._s(e.FinancialAmountFormat(e.item.Amount))+"\n            ")]),e._v(" "),i("div",{staticClass:"li"},[i("span",[e._v("实现金额")]),e._v(e._s(e.FinancialAmountFormat(e.item.Data))+"\n            ")]),e._v(" "),i("div",{staticClass:"li"},[i("span",[e._v("时间范围")]),e._v(e._s(e.item.Begin+" 至 "+e.item.End)+"\n            ")]),e._v(" "),i("div",{staticClass:"li"},[i("span",[e._v("目标进度")]),e._v(" "),i("div",{staticClass:"JD"},[i("div",{attrs:{id:"JDT"}})]),e._v(" "),i("p",{staticStyle:{float:"right"}},[e._v(e._s(e.item.schedule))])])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogTableVisibleTrue=!1}}},[e._v("确 定")])],1)]),e._v(" "),i("SaxoFenYe",{attrs:{total:e.total},on:{func:e.func}})],1)},staticRenderFns:[]};var r=i("VU/8")(l,n,!1,function(e){i("krBw")},"data-v-fdea3d40",null);t.default=r.exports},krBw:function(e,t){}});