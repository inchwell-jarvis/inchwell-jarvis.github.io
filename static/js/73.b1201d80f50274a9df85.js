webpackJsonp([73],{"570O":function(t,e){},bJJ5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),n=a.n(s),o=a("t4zo"),i=a.n(o),l=a("uXZL"),r=a.n(l),u={name:"",data:function(){return{pageNum:1,pagesize:0,search:"",enginner:"",area:"",state:"",areaS:[],CustomerType:"",options:[{label:"全部",value:"-1",index:2},{label:"已申请",value:1,index:3},{label:"已付款",value:2,index:4},{label:"已驳回",value:3,index:5},{label:"合同取消",value:8,index:6},{label:"不需付款",value:9,index:7},{label:"退货待确认",value:99,index:7}],total:0,Data:[],optionss:[],loading:!1,value:"",dialogFormVisible:!1,SOId:"",ddd:0,dialogVisible:!1,UData:{},title:"",ReturnPopup:!1,Data2:[],PLSK:!1,PLSKData:"",PLSK2:!1,PLSK2s:[],PLSK2sindex:0,PLSK2Data:[],SaxoDrawer:!1,CapitalPoolDtos:[],Subscription:0,SOId2:"",DiscountAmount:0}},created:function(){this.pagesize=this.$store.state.DisplayNumber,this.init(),this.initGetArea()},computed:{newCapitalPoolDtos:function(){return JSON.parse(n()(this.CapitalPoolDtos))}},watch:{newCapitalPoolDtos:function(t){var e=this;this.Subscription=0,t.forEach(function(t){t.Number>0&&(e.Subscription+=Number(t.Number))})}},components:{},methods:{BatchCollection:function(){if(console.log(this.PLSKData),""!=this.PLSKData){var t=" ";t=-1==this.PLSKData.indexOf(" ")?"\t":" ";var e=this.PLSKData.split("\n");console.log(e),this.PLSK2s=[];for(var a=0;a<e.length;a++){var s=e[a];""!=s&&this.PLSK2s.push({table:s.split(t)[0],value:s.split(t)[1]})}this.PLSK=!1,this.PLSK2=!0,this.Guodu()}else this.$message.error("请输入需要收款的订单号！")},Guodu:function(){this.PLSK2sindex!=this.PLSK2s.length&&this.UpdateSOPayState2(this.PLSK2s[this.PLSK2sindex])},UpdateSOPayState2:function(t){var e=this;this.this.API_POST("Finance/UpdateSOPayState2",data,!1,!0).then(function(a){console.log(a),0!=a.Code?e.PLSK2Data.push({table:t.table,value:t.value,state:a.Msg}):e.PLSK2Data.push({table:t.table,value:t.value,state:200}),e.PLSK2sindex+=1,e.Guodu()})},exportExcel:function(){var t=this,e=this.state;e=""==e?-1:e;var a={api:"get",url:this.$store.state.http+"Finance/GetSOPays",data:{pageNum:this.pageNum,numPerPage:9999999,orderField:"",orderDirection:"",search:this.search,enginner:this.enginner,area:this.area,state:e,cusType:this.CustomerType}};this.$https(a).then(function(e){console.log(e),t.Data2=e.Data.Dtos,t.Data2.forEach(function(t){if(t.CustomerConfirmTime&&(t.CustomerConfirmTime=t.CustomerConfirmTime.split("T")[0]),t.PayDate&&(t.PayDate=t.PayDate.split("T")[0]),null!=t.ReturnedPurchases)for(var e=0;e<t.ReturnedPurchases.length;e++){var a=t.ReturnedPurchases[e];a.RefundDt&&(a.RefundDt=a.RefundDt.split("T")[0]),a.ReceiveDt&&(a.ReceiveDt=a.ReceiveDt.split("T")[0])}if(t.return=-1,t.ReturnedPurchases.length!=[]){t.return=0;for(var s=0;s<t.ReturnedPurchases.length;s++){"已退款"!=t.ReturnedPurchases[s].StateStr&&(t.return+=1)}}}),console.log(t.Data2),setTimeout(function(){t.exportExcelTo()},1e3)})},exportExcelTo:function(){var t=r.a.utils.table_to_book(document.querySelector("#out-table"),{raw:!0}),e=r.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{i.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"零配件订单收款列表.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},TuiKuan:function(t){var e=this,a={api:"post",url:this.$store.state.http+"Finance/SRPRefund",data:{Id:t.ID}};this.$https(a).then(function(a){e.init(),e.$message({message:"退款成功!",type:"success"});for(var s=0;s<e.UData.ReturnedPurchases.length;s++){var n=e.UData.ReturnedPurchases[s];n.ID==t.ID&&(n.StateStr="已退款",n.StateStr="已退款")}})},ReturnPopupTC:function(t){console.log(t),this.ReturnPopup=!0,this.UData=t},GetCusCapitalPool:function(t){var e=this;console.log(t),this.DiscountAmount=t.DiscountAmount,this.SOId2=t.SOId,this.SaxoDrawer=!0;var a={api:"get",url:this.$store.state.http+"CRM/GetCusCapitalPool",data:{cusId:t.CusId,onlyPart:!0,includebboc:!0,includebuming:!0}};this.$https(a).then(function(t){e.CapitalPoolDtos=[];var a=t.Data,s=a.BBOCDtos,n=a.CapitalPoolDtos;console.log(s),console.log(n),null!=s&&t.Data.BBOCDtos.forEach(function(t){t.LB="挂帐款",t.CreateDate=t.CreateDate.split("T")[0],e.$set(t,"Number",""),""!=t.SystemInfo&&null!=t.SystemInfo?t.SystemInfo2=t.SystemInfo.split("@"):element.SystemInfo2=[],e.CapitalPoolDtos.push(t)}),null!=n&&n.forEach(function(t){t.LB=t.Type,t.CreateDate=t.CreateDate.split("T")[0],e.$set(t,"Number",""),""!=t.SystemInfo&&null!=t.SystemInfo?t.SystemInfo2=t.SystemInfo.split("@"):element.SystemInfo2=[],e.CapitalPoolDtos.push(t)})})},AddMSOPaymentFun:function(){var t=this;console.log(this.CapitalPoolDtos);for(var e=[],a=0;a<this.CapitalPoolDtos.length;a++){var s=this.CapitalPoolDtos[a];isNaN(parseFloat(s.Number))||e.push({SourceId:s.ID,UsageAmount:Number(s.Number),From:"资金池"==s.LB||"不明款"==s.LB?1:2})}if(0==e.length)return this.$message.error("请输入使用量"),!1;console.log(e);var n={api:"post",url:this.$store.state.http+"SO/AddSOPayment",data:{Id:this.SOId2,PayAmount:this.Subscription,UsageFeeDtos:e}};this.$https(n).then(function(e){t.SaxoDrawer=!1,t.$message({showClose:!0,message:"认款成功!",type:"success"}),t.init()})},operate:function(t,e){if("认款"==t)return this.UData=e,this.SaxoDrawer=!1,this.GetCusCapitalPool(e),!1;console.log(t,e),this.UData=e,this.dialogVisible=!0,this.title=t},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){t(),e.value=""}).catch(function(t){})},pays:function(t,e){var a=this,s={api:"post",url:this.$store.state.http+"Finance/UpdateSOPayState",data:{Id:this.UData.SOId,ToState:t}};this.$https(s).then(function(t){a.init(),a.dialogVisible=!1,a.$message.success("成功")})},init:function(t){var e=this;1==t&&(this.pageNum=1);var a=this.state;a=""==a?-1:a;var s={api:"get",url:this.$store.state.http+"Finance/GetSOPays",data:{pageNum:this.pageNum,numPerPage:this.pagesize,orderField:"",orderDirection:"",search:this.search,enginner:this.enginner,area:this.area,state:a,cusType:this.CustomerType}};this.$https(s).then(function(t){console.log(t),e.total=t.Data.DataBars,e.Data=t.Data.Dtos,e.Data.forEach(function(t){if(t.CustomerConfirmTime&&(t.CustomerConfirmTime=t.CustomerConfirmTime.split("T")[0]),t.PayDate&&(t.PayDate=t.PayDate.split("T")[0]),null!=t.ReturnedPurchases)for(var e=0;e<t.ReturnedPurchases.length;e++){var a=t.ReturnedPurchases[e];a.RefundDt&&(a.RefundDt=a.RefundDt.split("T")[0]),a.ReceiveDt&&(a.ReceiveDt=a.ReceiveDt.split("T")[0])}t.PayLogsText=[];for(var s=0;s<t.PayLogs.length;s++)t.PayLogsText.push(t.PayLogs[s].LogContent.split("--\x3e")[1]+" - "+t.CreateDate);if(t.return=-1,t.ReturnedPurchases.length!=[]){t.return=0;for(var n=0;n<t.ReturnedPurchases.length;n++){"已退款"!=t.ReturnedPurchases[n].StateStr&&(t.return+=1)}}})})},initGetArea:function(){var t=this,e={url:this.$store.state.http+"System/GetArea",api:"get"};this.$https(e).then(function(e){t.areaS=e.Data})},func:function(t,e){this.pagesize=t,this.pageNum=e,this.init()},tableRowClassName:function(t){var e=t.row;return 1==e.PayStatus?"color423423243234":2==e.PayStatus?"color1212312312312":3==e.PayStatus?"color234234234234":void 0}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:t.init}}),t._v(" "),a("div",{staticClass:"TopSerch",staticStyle:{padding:"5px"}},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入客户、单号、报价单号"},on:{change:function(e){return t.init(1)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入工程师"},on:{change:function(e){return t.init(1)}},model:{value:t.enginner,callback:function(e){t.enginner=e},expression:"enginner"}}),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择状态",clearable:""},on:{change:function(e){return t.init(1)}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.options,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",clearable:"",placeholder:"请选择区域"},on:{change:function(e){return t.init(1)}},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},t._l(t.areaS,function(t){return a("el-option",{key:t.Value,attrs:{label:t.Value,value:t.Value}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",clearable:"",placeholder:"请选择客户类型"},on:{change:function(e){return t.init(1)}},model:{value:t.CustomerType,callback:function(e){t.CustomerType=e},expression:"CustomerType"}},t._l(this.$store.state.Vuex.CustomerTypes,function(t){return a("el-option",{key:t+"2",attrs:{label:t,value:t}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.init(1)}}},[t._v("检索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){t.PLSK2Data=[],t.PLSK2sindex=0,t.PLSKData="",t.PLSK=!0}}},[t._v("批量收款")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.exportExcel()}}},[t._v("导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,size:"mini",height:this.$store.state.TableOptimumHeight,"row-class-name":t.tableRowClassName,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"QuoteCode",label:"报价单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CusName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Amount",label:"总金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DiscountAmount",label:"优惠后金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"TKAmount",label:"退款金额",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZZAmount",label:"最终金额",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"付款状态",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.PayStatusStr)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"CustomerConfirmTime",label:"确认日期",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"付款日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},t._l(e.row.PayLogsText,function(e){return a("span",[t._v(t._s(e)),a("br"),a("br")])}),0),t._v(" "),a("p",[t._v(" "+t._s(e.row.PayDate))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"BelongEnginners",label:"隶属工程师","show-overflow-tooltip":!0,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Sales",label:"隶属销售","show-overflow-tooltip":!0,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"退货",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("nav",{staticStyle:{"text-align":"center"}},[e.row.return>0?a("div",{staticClass:"gezi1",on:{click:function(a){return t.ReturnPopupTC(e.row)}}},[t._v(t._s(e.row.return))]):t._e(),t._v(" "),0==e.row.return?a("div",{staticClass:"gezi2",on:{click:function(a){return t.ReturnPopupTC(e.row)}}},[t._v(t._s(e.row.ReturnedPurchases.length))]):t._e(),t._v(" "),-1==e.row.return?a("div",{staticClass:"gezi2",on:{click:function(a){return t.ReturnPopupTC(e.row)}}},[t._v("无")]):t._e()])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("nav",{staticStyle:{"text-align":"center"}},[a("el-button-group",["申请付款中"==e.row.PayStatusStr?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.operate("认款",e.row)}}},[t._v("认款")]):t._e(),t._v(" "),"申请付款中"!=e.row.PayStatusStr?a("el-button",{attrs:{type:"info",size:"mini"}},[t._v("认款")]):t._e(),t._v(" "),"申请付款中"==e.row.PayStatusStr?a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return t.operate("驳回",e.row)}}},[t._v("驳回")]):t._e(),t._v(" "),"申请付款中"!=e.row.PayStatusStr?a("el-button",{attrs:{type:"info",size:"mini"}},[t._v("驳回")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.operate("取消",e.row)}}},[t._v("取消")])],1)],1)]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{data:t.Data2,id:"out-table",size:"mini",height:this.$store.state.TableOptimumHeight,"row-class-name":t.tableRowClassName,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"QuoteCode",label:"报价单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CusName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Amount",label:"总金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DiscountAmount",label:"优惠后金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"TKAmount",label:"退款金额",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ZZAmount",label:"最终金额",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"付款状态",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.PayStatusStr)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"CustomerConfirmTime",label:"确认日期",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"PayDate",label:"付款日期",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BelongEnginners",label:"隶属工程师","show-overflow-tooltip":!0,width:"150"}})],1),t._v(" "),a("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%","before-close":t.handleClose,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("客户名")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.CusName))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("总金额")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.Amount))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("优惠价格")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.DiscountAmount))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("物流费")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.LogisticCharge))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("状态")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.StateStr))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("区域")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.Area))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("订单编号")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.SOCode))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("隶属工程师")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.BelongEnginners))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("创建日期")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.CreateDateStr))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),"收款"==t.title?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.pays(2,"收款")}}},[t._v("确认收款")]):t._e(),t._v(" "),"驳回"==t.title?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.pays(3,"驳回")}}},[t._v("确认驳回")]):t._e(),t._v(" "),"取消"==t.title?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.pays(8,"取消")}}},[t._v("取消合同")]):t._e()],1)]),t._v(" "),a("el-dialog",{attrs:{title:"退款",visible:t.ReturnPopup,width:"50%","before-close":t.handleClose,"append-to-body":!0},on:{"update:visible":function(e){t.ReturnPopup=e}}},[a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("客户名")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.CusName))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("总金额")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.Amount))]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("span",[t._v("优惠价格")]),t._v(" "),a("span",{staticClass:"#SPan"}),t._v(t._s(t.UData.DiscountAmount))]),t._v(" "),a("div",{staticStyle:{height:"30px",float:"left",color:"Transparent"}},[t._v("空格")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.UData.ReturnedPurchases,size:"mini"}},[a("el-table-column",{attrs:{prop:"SourceType",label:"业务类型","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"ProductCode",label:"内部编码",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Quantity",label:"数量",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"退款人",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return null!=e.row.RefundEr?[t._v("\n                    "+t._s(e.row.RefundEr+"("+e.row.RefundDt+")")+"\n                ")]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"收货人",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return null!=e.row.Receiver?[t._v("\n                    "+t._s(e.row.Receiver+"("+e.row.ReceiveDt+")")+"\n                ")]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"TotalAmount",label:"退款金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("nav",{staticStyle:{"text-align":"center"}},["已退款"!=e.row.StateStr?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.TuiKuan(e.row)}}},[t._v("确认退款")]):t._e(),t._v(" "),"已退款"==e.row.StateStr?a("el-link",{attrs:{type:"success"}},[t._v("已退款")]):t._e()],1)]}}])})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.ReturnPopup=!1}}},[t._v("关闭")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"批量收款",visible:t.PLSK,width:"30%",center:"","append-to-body":!0},on:{"update:visible":function(e){t.PLSK=e}}},[a("el-input",{attrs:{type:"textarea",id:"text1",autosize:{minRows:2,maxRows:15},placeholder:"请输入单号 金额 多条回车  \n  例如： \n  ABC12345678 888 \n  ABC12345678 888 "},model:{value:t.PLSKData,callback:function(e){t.PLSKData=e},expression:"PLSKData"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.PLSK=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.BatchCollection()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"批量收款",visible:t.PLSK2,width:"30%",center:""},on:{"update:visible":function(e){t.PLSK2=e}}},[a("div",t._l(t.PLSK2Data,function(e,s){return a("p",{key:s},[t._v(t._s(e.table+" —— "+e.value+" —— ")+"\n                "),200!=e.state?a("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(e.state))]):t._e(),t._v(" "),200==e.state?a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67C23A"}}):t._e()])}),0),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.PLSK2=!1}}},[t._v("确 定")])],1)]),t._v(" "),a("SaxoDrawer",{attrs:{show:t.SaxoDrawer,title:t.UData.CusName+"(挂账款 & 不明款 & 资金池)"},on:{ShowFalse:function(e){t.SaxoDrawer=!1}}},[a("div",{staticClass:"DeawerBox"},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.CapitalPoolDtos,height:"100%"}},[a("el-table-column",{attrs:{label:"类别",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["挂帐款"==e.row.LB?a("span",[t._v(" "+t._s(e.row.LB+"("+e.row.InvoiceStateStr+")"))]):t._e(),t._v(" "),"挂帐款"!=e.row.LB?a("span",[t._v(" "+t._s(e.row.LB))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"资金量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.Amount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.UsageAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"创建人",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"系统信息","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top-start",title:"系统信息",trigger:"hover"},scopedSlots:t._u([{key:"default",fn:function(s){return t._l(e.row.SystemInfo2,function(e,s){return a("p",{key:s},[t._v(t._s(e))])})}}],null,!0)},[t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("系统信息"),a("i",{staticClass:"el-icon-warning-outline"})])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Memo",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",fixed:"right",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",type:"number",placeholder:"请输入使用量"},model:{value:e.row.Number,callback:function(a){t.$set(e.row,"Number",a)},expression:"scope.row.Number"}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"but"},[a("div",[t._v("认款合计 ￥"),a("span",[t._v(" "+t._s(t.Subscription))])]),t._v(" "),a("div",[t._v("优惠后价格 ￥"),a("span",[t._v(" "+t._s(t.DiscountAmount))])]),t._v(" "),a("saxo-button",{staticClass:"butState",attrs:{mini:"",type:"primary"},on:{click:t.AddMSOPaymentFun}},[t._v("确认")])],1)])])],1)},staticRenderFns:[]};var p=a("VU/8")(u,c,!1,function(t){a("570O")},null,null);e.default=p.exports}});