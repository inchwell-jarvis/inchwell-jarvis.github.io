webpackJsonp([28],{"+6Bu":function(t,e,a){"use strict";e.__esModule=!0,e.default=function(t,e){var a={};for(var l in t)e.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(t,l)&&(a[l]=t[l]);return a}},hRQp:function(t,e){},ji5s:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("Dd8w"),i=a.n(l),r=a("+6Bu"),n=a.n(r),o=a("mvHQ"),s=a.n(o),c=a("t4zo"),u=a.n(c),p=a("uXZL"),d=a.n(p),v={data:function(){return{initData:{pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:"",fullname:"",enginner:"",begin:"",end:"",area:"",type:""},Data:[],DataExcel:[],total:0,pickerDate:"",category:["保养","维修","安装","培训","VIP回访","实验","钣喷回访","VIP与钣喷回访回访","回访","地基勘探","乘车","调休","年假","事假","其他"]}},mounted:function(){this.start()},computed:{retrievalJT:function(){return s()(this.initData)}},watch:{retrievalJT:function(t,e){this.WatchFenYe(t,e)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{start:function(){var t=this;this.API_GET("PCenter/GetWorkDailiys",this.initData).then(function(e){var a=e.WorkDailyDtos,l=e.DataBars;t.total=l,t.Data=a.map(function(e){var a=e.CreateDate,l=e.ServiceDate,r=n()(e,["CreateDate","ServiceDate"]);return i()({},r,{CreateDate:t.formatDate(a),ServiceDate:t.formatDate(l)})})})},tableRowClassName:function(t){if(!t.row.State)return"color568248533242"},func:function(t,e){this.initData.numPerPage=t,this.initData.pageNum=e,this.start()},pick:function(t){console.log(t),null==t?(this.initData.begin="",this.initData.end=""):(this.initData.begin=t[0],this.initData.end=t[1])},see:function(t){this.$store.state.Vuex.Id=t.WorkdailyId,this.$router.push({path:"work-log-look",query:{Id:t.WorkdailyId}})},DeleWork:function(t){var e=this;this.API_POST("PCenter/DelWorkDaily",{Id:t.WorkdailyId}).then(function(t){e.$message.success("删除成功！"),e.start()})},edit:function(t){console.log(t.WorkdailyId),this.$store.state.Vuex.Id=t.WorkdailyId,this.$router.push({path:"work-log-edit"})},Excel:function(){var t=this,e=JSON.parse(s()(this.initData));e.pageNum=1,e.numPerPage=99999999,this.API_GET("PCenter/GetWorkDailiys",e).then(function(e){e.WorkDailyDtos.forEach(function(t){t.CreateDate=t.CreateDate.split("T")[0],t.ServiceDate=t.ServiceDate.split("T")[0]}),t.DataExcel=e.WorkDailyDtos;var a=t;setTimeout(function(){a.exportExcel()},500)})},exportExcel:function(){var t=d.a.utils.table_to_book(document.querySelector("#out-table"),{raw:!0}),e=d.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{u.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"工作日报.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},createDaily:function(){this.$router.push({path:"work-log-create"})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:function(e){return t.start()}}}),t._v(" "),a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[t._v("客户名称")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入客户名称、单号",size:"mini"},model:{value:t.initData.fullname,callback:function(e){t.$set(t.initData,"fullname",e)},expression:"initData.fullname"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("工程师")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入产品编码",size:"mini"},model:{value:t.initData.enginner,callback:function(e){t.$set(t.initData,"enginner",e)},expression:"initData.enginner"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("区域")]),t._v(" "),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择区域"},model:{value:t.initData.area,callback:function(e){t.$set(t.initData,"area",e)},expression:"initData.area"}},t._l(t.$store.state.Vuex.Area,function(t){return a("el-option",{key:t.Value,attrs:{label:t.Value,value:t.Value}})}),1)],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("类别")]),t._v(" "),a("el-select",{attrs:{placeholder:"类别",size:"mini",clearable:""},model:{value:t.initData.type,callback:function(e){t.$set(t.initData,"type",e)},expression:"initData.type"}},t._l(t.category,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"department",staticStyle:{width:"300px"}},[a("span",[t._v("时间")]),t._v(" "),a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"datetimerange",size:"mini","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","default-time":["12:00:00"]},on:{change:t.pick},model:{value:t.pickerDate,callback:function(e){t.pickerDate=e},expression:"pickerDate"}})],1)]),t._v(" "),a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"success"},on:{click:function(e){return t.createDaily()}}},[t._v("创 建")]),t._v(" "),a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.Excel()}}},[t._v("导出Excel")])],1),t._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"CustomerName",label:"客户名","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ServiceType",label:"类型",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Engineer",label:"工程师",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ServiceDate",label:"服务日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"LinkMan",label:"联系人",width:"90","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"Tel",label:"电话",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Email",label:"邮箱","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsOver",label:"是否完结",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.State?a("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-search"},on:{click:function(a){return t.see(e.row)}}}):t._e(),t._v(" "),e.row.State?t._e():a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}}),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.DeleWork(e.row)}}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"content",staticStyle:{display:"none"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.DataExcel,size:"mini",id:"out-table",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"CustomerName",label:"客户名","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ServiceType",label:"类型",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Engineer",label:"工程师",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ServiceDate",label:"服务日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"LinkMan",label:"联系人",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Tel",label:"电话",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Email",label:"邮箱","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsOver",label:"是否完结",width:"90"}})],1)],1),t._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:t.total,old:""},on:{func:t.func}})],1)},staticRenderFns:[]};var m=a("VU/8")(v,h,!1,function(t){a("hRQp")},"data-v-57a381a5",null);e.default=m.exports}});