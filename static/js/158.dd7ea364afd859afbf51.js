webpackJsonp([158],{KNCD:function(t,e){},qqjq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),l={name:"GetPermis",data:function(){return{retrieval:{roleId:"",contrall:"",action:"",pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:""},TableData:[],total:0,MemberRole:[],RoleId:"",Content:"",Controller:"",Action:""}},created:function(){this.GetRoles(),this.start()},computed:{retrievalJT:function(){return a()(this.retrieval)}},watch:{retrievalJT:function(t,e){this.WatchFenYe(t,e)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{GetRoles:function(){var t=this;this.API_GET("System/GetRoles").then(function(e){console.log(e),t.MemberRole=e})},start:function(){var t=this;this.API_GET("System/GetPermis",this.retrieval).then(function(e){t.TableData=e.Dtos,t.total=e.DataBars})},func:function(t,e){this.retrieval.numPerPage=t,this.retrieval.pageNum=e,this.start()},refresh:function(){var t=this;this.API_POST("System/ArrangePermis").then(function(e){t.start()})},delefalde:function(){this.$refs.success.start(),this.RoleId="",this.Content="",this.Action="",this.Controller=""},addtrue:function(){var t=this;if(""==this.RoleId)return this.$message.warning("请选择类型！"),!1;if(""==this.Controller)return this.$message.warning("请输入控制器！"),!1;if(""==this.Action)return this.$message.warning("请输入方法！"),!1;if(""==this.Content)return this.$message.warning("请输入备注！"),!1;var e={RoleId:this.RoleId,Controller:this.Controller,Action:this.Action,Desc:this.Content};this.API_POST("System/AddPermiss",e).then(function(e){t.start(),t.delefalde()})},elswit:function(t){var e=this;this.API_POST("System/EnablePermis",{Id:t.Id}).then(function(t){e.start()})}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"retrieve"},[i("div",{staticClass:"leftSpan"},[t._v("\n            "+t._s(t.$route.meta.title)+"\n        ")]),t._v(" "),i("div",{staticClass:"ConView"},[i("div",{staticClass:"department"},[i("span",[t._v("角色")]),t._v(" "),i("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择角色"},model:{value:t.retrieval.roleId,callback:function(e){t.$set(t.retrieval,"roleId",e)},expression:"retrieval.roleId"}},t._l(t.MemberRole,function(t,e){return i("el-option",{key:e,attrs:{label:t.Name,value:t.ID}})}),1)],1),t._v(" "),i("div",{staticClass:"department"},[i("span",[t._v("控制器")]),t._v(" "),i("el-input",{attrs:{placeholder:"控制器",size:"mini"},model:{value:t.retrieval.contrall,callback:function(e){t.$set(t.retrieval,"contrall",e)},expression:"retrieval.contrall"}})],1),t._v(" "),i("div",{staticClass:"department"},[i("span",[t._v("方法")]),t._v(" "),i("el-input",{attrs:{placeholder:"方法",size:"mini"},model:{value:t.retrieval.action,callback:function(e){t.$set(t.retrieval,"action",e)},expression:"retrieval.action"}})],1)]),t._v(" "),i("saxo-button",{staticStyle:{"margin-top":"13px"},attrs:{mini:"",type:"success"},on:{click:function(e){return t.refresh()}}},[i("i",{staticClass:"el-icon-refresh"})]),t._v(" "),i("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"success"},on:{click:function(e){return t.$refs.success.start()}}},[i("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),i("div",{staticClass:"content2"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.TableData,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"}},[i("el-table-column",{attrs:{fixed:"",prop:"RoleName",label:"RoleName"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Controller",label:"Controller"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Action",label:"Action"}}),t._v(" "),i("el-table-column",{attrs:{prop:"ActionName",label:"ActionName"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{on:{change:function(i){return t.elswit(e.row)}},model:{value:e.row.Enable,callback:function(i){t.$set(e.row,"Enable",i)},expression:"scope.row.Enable"}})]}}])})],1)],1),t._v(" "),i("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:t.total},on:{func:t.func}}),t._v(" "),i("saxo-pop",{ref:"success",attrs:{type:"success",title:"添加权限",width:"500px"},on:{close:function(e){return t.$refs.success.start()}}},[i("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择权限角色"},model:{value:t.RoleId,callback:function(e){t.RoleId=e},expression:"RoleId"}},t._l(t.MemberRole,function(t){return i("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})}),1),t._v(" "),i("div",{staticClass:"tablediv"},[i("div",{staticClass:"leftdiv"},[t._v("控制器")]),t._v(" "),i("div",{staticClass:"rightdiv"},[i("el-input",{attrs:{size:"mini"},model:{value:t.Controller,callback:function(e){t.Controller=e},expression:"Controller"}})],1)]),t._v(" "),i("div",{staticClass:"tablediv"},[i("div",{staticClass:"leftdiv"},[t._v("方法")]),t._v(" "),i("div",{staticClass:"rightdiv"},[i("el-input",{attrs:{size:"mini"},model:{value:t.Action,callback:function(e){t.Action=e},expression:"Action"}})],1)]),t._v(" "),i("el-input",{staticStyle:{marginTop:"20px"},attrs:{type:"textarea","min-height":"30px",autosize:{minRows:2,maxRows:8},placeholder:"请输入描述"},model:{value:t.Content,callback:function(e){t.Content=e},expression:"Content"}}),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"right",marginTop:"20px"}},[i("el-button",{attrs:{size:"mini"},on:{click:t.delefalde}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addtrue}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(l,n,!1,function(t){i("KNCD")},"data-v-26f9c0cc",null);e.default=r.exports}});