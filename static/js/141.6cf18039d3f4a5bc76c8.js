webpackJsonp([141],{OTm1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),s=a("bOdI"),o=a.n(s),r={data:function(){var t;return{show:!1,UData:[],PayAmount:0,UsageFeeDtos:0,headerCellStyle:(t={background:"#f7f8fd",fontSize:"12px",fontWeight:400,fontStyle:"normal"},o()(t,"fontSize","11px"),o()(t,"padding","5px"),o()(t,"paddingLeft","0px"),t),cellStyle:{height:"48px",fontSize:"12px"},twoClick:!0,TableData:[],selected:[]}},computed:{newArray:function(){return JSON.parse(i()(this.TableData))}},watch:{UsageFeeDtos:function(t){console.log(t)}},methods:{AtRedInvoice:function(){this.$router.push({path:"/fw-redinvoice",query:{Id:this.UData.ID,Amount:this.UData.Amount,BuyingCurrency:this.UData.BuyingCurrency}})},RejectInvoice:function(){var t=this;this.API_POST("Finance/RejectInvoice",{id:this.UData.ID}).then(function(e){t.$message.success("发票已驳回！"),t.start()})},InvoiceInvalidated:function(){var t=this,e={data:{Id:this.UData.ID},api:"post",url:this.$store.state.http+"Finance/VoideInvoice"};this.$https(e).then(function(e){t.$message({showClose:!0,message:"作废成功!",type:"success"}),t.start()})},SelectConfirm:function(){for(var t=[],e=0;e<this.TableData.length;e++){var a=this.TableData[e];isNaN(parseFloat(a.amount))||(this.selected.push(a),t.push({SourceId:a.ID,UsageAmount:Number(a.amount)}))}if(0==t.length)return this.$message.error("请输入使用量"),!1;this.show=!1},WriteAnInvoice:function(){var t=this,e={data:{Id:this.UData.ID,PayAmount:this.UData.Amount,Other:""},api:"post",url:this.$store.state.http+"Finance/WriteAnInvoice"};this.$https(e).then(function(e){t.$message({showClose:!0,message:"收票成功!",type:"success"}),t.start()})},start:function(){var t=this,e={data:{search:"",creater:"",invoicestate:-1,pageNum:1,numPerPage:99,type:"",orderField:"",orderDirection:"",id:this.ID},api:"get",url:this.$store.state.http+"Finance/GetPOFinanceInvoices"};this.$https(e).then(function(e){console.log(e),t.UData=e.Data.InvoiceDtos[0],console.log(t.UData.Type),t.PayAmount=t.UData.Amount,console.log(t.UData),null==t.UData.BuyingCurrency&&(t.UData.BuyingCurrency="￥"),"RMB"==t.UData.BuyingCurrency&&(t.UData.BuyingCurrency="￥"),"USD"==t.UData.BuyingCurrency&&(t.UData.BuyingCurrency="$"),"EUR"==t.UData.BuyingCurrency&&(t.UData.BuyingCurrency="€"),"JPY "==t.UData.BuyingCurrency&&(t.UData.BuyingCurrency="J￥")})}},created:function(){this.ID=this.$route.query.Id,console.log(this.ID),this.start()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.$emit("refresh")},destroyed:function(){}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[a("router-view",{on:{refresh:t.start}}),t._v(" "),a("div",{staticClass:"retrieve"},[a("span",{staticClass:"retrieveSpan"},[t._v("编辑财务发票")]),t._v(" "),8==t.UData.InvoiceState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{mini:"",type:"danger"},on:{click:function(e){return t.AtRedInvoice()}}},[t._v("发票冲红")]):t._e(),t._v(" "),2==t.UData.InvoiceState||8==t.UData.InvoiceState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{mini:"",type:"danger"},on:{click:function(e){return t.InvoiceInvalidated()}}},[t._v("发票作废")]):t._e(),t._v(" "),1==t.UData.InvoiceState||11==t.UData.InvoiceState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{mini:"",type:"primary"},on:{click:function(e){return t.WriteAnInvoice()}}},[t._v("收到发票")]):t._e(),t._v(" "),1==t.UData.InvoiceState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{mini:"",type:"danger"},on:{click:function(e){return t.RejectInvoice()}}},[t._v("驳回发票")]):t._e()],1),t._v(" "),a("div",{staticClass:"Con"},[a("el-descriptions",{staticClass:"margin-top",attrs:{title:"基础信息",column:3,size:"mini",border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    客户名称\n                ")]),t._v("\n                "+t._s("  "+t.UData.CusFullName)+"\n            ")],2),t._v(" "),t.UData.CreateDate?a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n                    创建时间\n                ")]),t._v("\n                "+t._s("  "+t.UData.CreateDate.split("T")[0])+"\n            ")],2):t._e(),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    类别\n                ")]),t._v("\n                "+t._s("  "+t.UData.Type)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    隶属公司\n                ")]),t._v("\n                "+t._s("  "+t.UData.BelongCompany)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    申请人\n                ")]),t._v("\n                "+t._s("  "+t.UData.Creater)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    单号\n                ")]),t._v("\n                "+t._s("  "+t.UData.POCode)+"\n            ")],2),t._v(" "),t.UData.Amount?a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),t._v("\n                    金额\n                ")]),t._v("\n                "+t._s("  "+t.UData.BuyingCurrency+t.UData.Amount.toFixed(2))+"\n            ")],2):t._e(),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    发票状态\n                ")]),t._v("\n                "+t._s("  "+t.UData.InvoiceStateStr)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    物流单号\n                ")]),t._v("\n                "+t._s("  "+t.UData.Logistics)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),t._v("\n                    备注\n                ")]),t._v("\n                "+t._s("  "+(t.UData.Memo||"无"))+"\n            ")],2)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"el-descriptions__title"},[t._v("金额")]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"price"},[t._v(t._s(t.UData.BuyingCurrency)),a("span",[t._v(t._s(t.UData.Amount))])]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"联系人姓名"}},[t._v("\n                    "+t._s(t.UData.Receiver)+"\n                ")]),t._v(" "),a("el-form-item",{attrs:{label:"联系人电话"}},[t._v("\n                    "+t._s(t.UData.ReceiverTel)+"\n                ")]),t._v(" "),a("el-form-item",{attrs:{label:"联系人邮箱"}},[t._v("\n                    "+t._s(t.UData.ReceiverEmail)+"\n                ")]),t._v(" "),a("el-form-item",{attrs:{label:"联系人地址"}},[t._v("\n                    "+t._s(t.UData.ReceiverAddress)+"\n                ")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("wkls")},"data-v-37b570f8",null);e.default=c.exports},wkls:function(t,e){}});