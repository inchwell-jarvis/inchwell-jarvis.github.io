webpackJsonp([183],{YiYF:function(t,e){},ZVNN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={data:function(){return{retrieval:{time:"",begin:"",end:""},Data:{}}},created:function(){},mounted:function(){},computed:{},watch:{},methods:{pickerChange:function(t){console.log(t),this.retrieval.begin=t[0],this.retrieval.end=t[1],this.start()},start:function(){var t=this;this.API_GET("Finance/GetCompanyJS",this.retrieval).then(function(e){console.log(e),t.Data=e})},downloadTableFun:function(){var t=this;if(!this.retrieval.begin)return this.$message.warning("请选择时间！");var e="<tr><th>客户名称</th><th>合同类型</th><th>合同号</th><th>金额</th><th>类型</th>",a="<tr><th>客户名称</th><th>合同类型</th><th>合同号</th><th>金额</th><th>类型</th>",l="<tr><th>客户名称</th><th>合同类型</th><th>合同号</th><th>金额</th><th>类型</th>",n="<tr><th>客户名称</th><th>合同类型</th><th>合同号</th><th>金额</th><th>类型</th>";this.Data.CompanyJSDtos.forEach(function(t){"1"==t.BusType.split(".")[0]&&(e+="<tr><td>"+t.CusFullName+"</td><td>"+t.BusType+"</td><td>"+t.ContractCode+"</td><td>"+t.InvAmount+"</td><td>"+t.InvType+"</td></tr>"),"2"==t.BusType.split(".")[0]&&(a+="<tr><td>"+t.CusFullName+"</td><td>"+t.BusType+"</td><td>"+t.ContractCode+"</td><td>"+t.InvAmount+"</td><td>"+t.InvType+"</td></tr>"),"3"==t.BusType.split(".")[0]&&(l+="<tr><td>"+t.CusFullName+"</td><td>"+t.BusType+"</td><td>"+t.ContractCode+"</td><td>"+t.InvAmount+"</td><td>"+t.InvType+"</td></tr>"),"4"==t.BusType.split(".")[0]&&(n+="<tr><td>"+t.CusFullName+"</td><td>"+t.BusType+"</td><td>"+t.ContractCode+"</td><td>"+t.InvAmount+"</td><td>"+t.InvType+"</td></tr>")}),e+="</tr>",a+="</tr>",l+="</tr>",n+="</tr>";var o=" \n            <tr> <td>时间</td><td>"+this.retrieval.begin+"-"+this.retrieval.end+"</td></tr>\n            <tr> <td>总计结算</td> <td>"+this.FinancialAmountFormat(this.Data.WOAmount+this.Data.SOAmount+this.Data.MCAmount+this.Data.ASAmount)+"</td> </tr>\n            <tr> <td>客服部</td> <td>"+this.FinancialAmountFormat(this.Data.WOAmount+this.Data.SOAmount)+"</td> </tr>\n            <tr> <td>保养部</td> <td>"+this.FinancialAmountFormat(this.Data.MCAmount+this.Data.ASAmount)+"</td> </tr>\n\n            <tr><th>工单总结</th></tr>\n            "+e+"\n            <tr><th>零配件总结</th></tr>\n            "+a+"\n            <tr><th>保养总结</th></tr>\n            "+l+"\n            <tr><th>大包总结</th></tr>\n            "+n+"\n            ";this.$prompt("请输入下载文件名称，默认为下载","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"下载"}).then(function(e){var a=e.value;console.log(o,a),t.downloadTable(o,a||"下载")}).catch(function(){t.$message.info("已取消下载")})}},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SaxoPage",{scopedSlots:t._u([{key:"title",fn:function(){return[a("i",{staticClass:"el-icon-takeaway-box",staticStyle:{cursor:"pointer",float:"left","margin-left":"-120px","line-height":"60px","font-size":"16px"},on:{click:t.downloadTableFun}}),t._v(" "),a("div",{staticClass:"department",staticStyle:{width:"500px"}},[a("span",[t._v("日期")]),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.pickerChange},model:{value:t.retrieval.time,callback:function(e){t.$set(t.retrieval,"time",e)},expression:"retrieval.time"}})],1)]},proxy:!0},{key:"content",fn:function(){return[t.Data.WOSum?a("div",{staticClass:"table"},[a("p",[a("span",[t._v("总计结算:")]),t._v(t._s(t.FinancialAmountFormat(t.Data.WOAmount+t.Data.SOAmount+t.Data.MCAmount+t.Data.ASAmount)))]),t._v(" "),a("p",[a("span",[t._v("客服部:")]),t._v(t._s(t.FinancialAmountFormat(t.Data.WOAmount+t.Data.SOAmount)))]),t._v(" "),a("p",[a("span",[t._v("保养部:")]),t._v(t._s(t.FinancialAmountFormat(t.Data.MCAmount+t.Data.ASAmount)))]),t._v(" "),a("br"),a("br"),t._v(" "),a("el-collapse",[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("span",{staticStyle:{width:"150px",display:"block",float:"left"}},[t._v("工单总结")]),t._v("\n                        "+t._s(t.Data.WOSum)+"\n                    ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data.CompanyJSDtos.filter(function(t){return"1"==t.BusType.split(".")[0]}),"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"BusType",label:"合同类型",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"金额",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.FinancialAmountFormat(e.row.InvAmount)))]}}],null,!1,1222081991)}),t._v(" "),a("el-table-column",{attrs:{prop:"InvType",label:"类型",width:"180"}})],1)],2),t._v(" "),a("el-collapse-item",{attrs:{title:"零配件总结",name:"2"}},[a("template",{slot:"title"},[a("span",{staticStyle:{width:"150px",display:"block",float:"left"}},[t._v("零配件总结")]),t._v("\n                        "+t._s(t.Data.SOSum)+"\n                    ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data.CompanyJSDtos.filter(function(t){return"2"==t.BusType.split(".")[0]}),"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"BusType",label:"合同类型",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"金额",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.FinancialAmountFormat(e.row.InvAmount)))]}}],null,!1,1222081991)}),t._v(" "),a("el-table-column",{attrs:{prop:"InvType",label:"类型",width:"180"}})],1)],2),t._v(" "),a("el-collapse-item",{attrs:{title:"保养总结",name:"3"}},[a("template",{slot:"title"},[a("span",{staticStyle:{width:"150px",display:"block",float:"left"}},[t._v("保养总结")]),t._v("\n                        "+t._s(t.Data.MCSum)+"\n                    ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data.CompanyJSDtos.filter(function(t){return"3"==t.BusType.split(".")[0]}),"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"BusType",label:"合同类型",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"金额",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.FinancialAmountFormat(e.row.InvAmount)))]}}],null,!1,1222081991)}),t._v(" "),a("el-table-column",{attrs:{prop:"InvType",label:"类型",width:"180"}})],1)],2),t._v(" "),a("el-collapse-item",{attrs:{title:"大包总结",name:"4"}},[a("template",{slot:"title"},[a("span",{staticStyle:{width:"150px",display:"block",float:"left"}},[t._v("大包总结")]),t._v("\n                        "+t._s(t.Data.ASSum)+"\n                    ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data.CompanyJSDtos.filter(function(t){return"4"==t.BusType.split(".")[0]}),"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"BusType",label:"合同类型",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"金额",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.FinancialAmountFormat(e.row.InvAmount)))]}}],null,!1,1222081991)}),t._v(" "),a("el-table-column",{attrs:{prop:"InvType",label:"类型",width:"180"}})],1)],2)],1)],1):t._e()]},proxy:!0}])})},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(t){a("YiYF")},"data-v-1122ba84",null);e.default=o.exports}});