webpackJsonp([238],{"9iHc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("bOdI"),l=a.n(n),o=a("t4zo"),r=a.n(o),s=a("uXZL"),i=a.n(s),u={data:function(){var t;return{options:[{value:-1,label:"全部"},{value:1,label:"票款差异"},{value:2,label:"票款一致"}],optionsGS:[{value:"",label:"全部"},{value:"服务公司",label:"服务公司"},{value:"技术公司",label:"技术公司"}],tableData:[],total:0,Pays:[],headerCellStyle:(t={background:"#f7f8fd",fontSize:"12px",fontWeight:400,fontStyle:"normal"},l()(t,"fontSize","11px"),l()(t,"padding","5px"),t),cellStyle:{height:"48px",fontSize:"12px"},search:"",state:-1,cusType:"",belongCompany:"",pageNum:1,numPerPage:0,tableData2:[],Pays2:[]}},methods:{simplicity:function(t){return this.FinancialAmountFormat(t.Otherdec,this.FinancialAmountSymbol(t.BuyingCurrency))},simplicity2:function(t){return this.FinancialAmountFormat(t.Otherdec,"")},exportExcelTo:function(){var t=i.a.utils.table_to_book(document.querySelector("#out_table"),{raw:!0}),e=i.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"采购款票对账.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},start:function(){var t=this,e={data:{search:this.search,state:this.state,cusType:this.cusType,belongCompany:this.belongCompany,pageNum:this.pageNum,numPerPage:this.numPerPage,orderField:"",orderDirection:""},api:"get",url:this.$store.state.http+"Finance/GetPOPayInvCheck"};this.$https(e).then(function(e){t.tableData=e.Data.Dtos,t.total=e.Data.DataBars,console.log(t.tableData);for(var a=0,n=[],l=function(e){var l=t.tableData[e];l.ConfirmDt=l.ConfirmDt.split("T")[0],l.NumberIndex=e,l.PayDtos.length>0&&l.PayDtos.forEach(function(t){t.BuyingCurrency=l.BuyingCurrency}),n.push(l.PayDtos),l.PayDtos.length>a&&(a=l.PayDtos.length)},o=0;o<t.tableData.length;o++)l(o);a>0&&n.forEach(function(t){var e=a-t.length;if(e>0)for(var n=0;n<e;n++)t.push({Otherdec:"-",Other:"-",BuyingCurrency:"-"})}),t.Pays=n})},start2:function(){var t=this,e={data:{search:this.search,state:this.state,cusType:this.cusType,belongCompany:this.belongCompany,pageNum:1,numPerPage:999999,orderField:"",orderDirection:""},api:"get",url:this.$store.state.http+"Finance/GetPOPayInvCheck"};this.$https(e).then(function(e){t.tableData2=e.Data.Dtos,console.log(t.tableData2);for(var a=0,n=[],l=function(e){var l=t.tableData2[e];l.ConfirmDt=l.ConfirmDt.split("T")[0],l.NumberIndex=e,l.PayDtos.length>0&&l.PayDtos.forEach(function(t){t.BuyingCurrency=l.BuyingCurrency}),n.push(l.PayDtos),l.PayDtos.length>a&&(a=l.PayDtos.length)},o=0;o<t.tableData2.length;o++)l(o);a>0&&n.forEach(function(t){var e=a-t.length;if(e>0)for(var n=0;n<e;n++)t.push({Otherdec:"-",Other:"-",BuyingCurrency:"-"})}),t.Pays2=n,console.log(t.Pays2),setTimeout(function(){t.exportExcelTo()},1e3)})},SaxoFenYe:function(t,e){this.numPerPage=t,this.pageNum=e,this.start()}},created:function(){this.numPerPage=this.$store.state.NewDisplayNumber,this.start()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:t.start}}),t._v(" "),a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[t._v("\n            采购票款对账\n        ")]),t._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department",staticStyle:{width:"360px"}},[a("span",{staticStyle:{width:"180px"}},[t._v("客户名称、合同号、采购员")]),t._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"客户名称、合同号、采购员",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择状态",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("隶属公司")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择隶属公司",size:"mini"},on:{change:function(e){return t.start()}},model:{value:t.belongCompany,callback:function(e){t.belongCompany=e},expression:"belongCompany"}},t._l(t.optionsGS,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("客户类型：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择客户类型",size:"mini",clearable:""},on:{change:function(e){return t.start()}},model:{value:t.cusType,callback:function(e){t.cusType=e},expression:"cusType"}},t._l(this.$store.state.CustomerType,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})}),1)],1)]),t._v(" "),a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.start2()}}},[t._v("导 出")]),t._v(" "),a("saxo-button",{staticStyle:{float:"right","margin-top":"13px","margin-right":"10px"},attrs:{mini:"",type:"primary"},on:{click:function(e){return t.start()}}},[t._v("搜 索")])],1),t._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":t.headerCellStyle,"cell-style":t.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"CusType",label:"客户类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BelongCompany",label:"隶属公司",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ConfirmDt",label:"确认日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Sent",label:"货物状态",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BuyingCurrency",label:"币种",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.ContractAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发票合计",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.InvAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"付款合计",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.PayAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),t._l(t.Pays.length>0?t.Pays[0].length:0,function(e,n){return 0!=t.Pays.length?a("el-table-column",{key:n+"2",attrs:{width:"160",label:"第"+String(n+1)+"次付款"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.Pays[e.row.NumberIndex][n].Other.split("-")[0]))]),t._v(" "),a("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(t.simplicity(t.Pays[e.row.NumberIndex][n])))]),t._v(" "),a("p",[t._v(t._s(t.Pays[e.row.NumberIndex][n].Other.split("-")[1]))])]}}],null,!0)}):t._e()}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"采购员",width:"100"}})],2),t._v(" "),a("el-table",{staticStyle:{display:"none"},attrs:{data:t.tableData2,id:"out_table"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"CusType",label:"客户类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BelongCompany",label:"隶属公司",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ConfirmDt",label:"确认日期",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Sent",label:"货物状态",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BuyingCurrency",label:"合计金额币种",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.ContractAmount,"")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发票合计",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.InvAmount,"")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"付款合计",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.PayAmount,"")))])]}}])}),t._v(" "),t._l(t.Pays2.length>0?t.Pays2[0].length:0,function(e,n){return 0!=t.Pays2.length?a("div",{key:n+"2"},[a("el-table-column",{attrs:{width:"170",label:"第"+String(n+1)+"次付款"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(t.simplicity2(t.Pays2[e.row.NumberIndex][n])))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{width:"170",label:"第"+String(n+1)+"次付款_记录"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.Pays2[e.row.NumberIndex][n].Other.split("-")[1]))])]}}],null,!0)})],1):t._e()}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"采购员",width:"150"}})],2)],1),t._v(" "),a("SaxoFenYe",{attrs:{total:t.total},on:{func:t.SaxoFenYe}})],1)},staticRenderFns:[]},p=a("VU/8")(u,c,!1,null,null,null);e.default=p.exports}});