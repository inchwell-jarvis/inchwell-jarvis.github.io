webpackJsonp([37],{"+qBn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"",data:function(){return{search:"",options:[{label:"全部",value:0,index:1},{label:"正在回访",value:1,index:2},{label:"已回访",value:2,index:3}],optionssatisfied:[{label:"满意度",value:0,index:1},{label:"不满意",value:1,index:2},{label:"一般",value:2,index:3},{label:"满意",value:3,index:4}],select:1,satisfied:0,Timeweek:"",pageNum:1,pagesize:10,total:0,data:[],area:"",areaS:[],load:!1}},created:function(){this.pagesize=this.$store.state.DisplayNumber,this.init(),this.initGetArea()},components:{},methods:{initGetArea:function(){var e=this,t={url:this.$store.state.http+"System/GetArea",api:"get"};this.$https(t).then(function(t){e.areaS=t.Data})},sele:function(){},init:function(e){var t=this;console.log(e),1==e&&(this.pageNum=1);var a=0;a=""==this.Timeweek?0:this.Timeweek;var i={data:{search:this.search,state:this.select,week:a,pageNum:this.pageNum,numPerPage:this.pagesize,satisfied:this.satisfied,area:this.area,orderField:"",orderDirection:""},api:"get",url:this.$store.state.http+"CRM/GetCusSerVisits"};this.$https(i).then(function(e){console.log(e),t.total=e.Data.DataBars,t.data=e.Data.Dtos;for(var a=0;a<t.data.length;a++){var i=t.data[a];i.CreateDate=i.CreateDate.split("T")[0],i.Creationweek=i.Year+" - "+i.Week}})},Generaterecords:function(){var e=this,t={api:"post",url:this.$store.state.http+"CRM/CreateCusSerVisit"};this.$https(t).then(function(t){console.log(t),e.init()})},func:function(e,t){this.pagesize=e,this.pageNum=t,this.init()},edit:function(e,t){this.$store.state.router_Returnvisitdetails_ID=e.Id,1==t?this.$router.push({path:"/Customer_score"}):this.$router.push({path:"/Customer_Returnvisitdetails"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("router-view"),e._v(" "),a("div",{staticClass:"TopSerch"},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择状态"},on:{change:function(t){return e.init(1)}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.options,function(e){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择状态"},on:{change:function(t){return e.init(1)}},model:{value:e.satisfied,callback:function(t){e.satisfied=t},expression:"satisfied"}},e._l(e.optionssatisfied,function(e){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",clearable:"",placeholder:"请选择区域"},on:{change:function(t){return e.init(1)}},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.areaS,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Value,value:e.Value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",maxlength:"2",oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"请输入当前日期在本年的周数"},model:{value:e.Timeweek,callback:function(t){e.Timeweek=t},expression:"Timeweek"}}),e._v(" "),a("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(t){return e.init(1)}}},[e._v("检索")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-document-add",circle:""},on:{click:function(t){return e.Generaterecords()}}})],1),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,size:"mini",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{fixed:"",prop:"CreateDate",label:"创建日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Creationweek",width:"100",label:"创建周"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"CusFullName",label:"客户全称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Reporter",label:"回访人",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Score",label:"得分",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"当前状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",["正在回访"==t.row.StateStr||"等待中"==t.row.StateStr?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row,1)}}},[e._v("评分")]):e._e(),e._v(" "),"已完成"==t.row.StateStr?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row,2)}}},[e._v("查看")]):e._e()],1)]}}])})],1)],1),e._v(" "),a("SaxoFenYe",{attrs:{total:e.total},on:{func:e.func}})],1)},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(e){a("Vdh4")},"data-v-f1dbd6f0",null);t.default=s.exports},Vdh4:function(e,t){}});