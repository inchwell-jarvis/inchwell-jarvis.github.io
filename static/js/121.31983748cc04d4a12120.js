webpackJsonp([121],{KLwA:function(t,e){},w245:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{form:{Position:"",Belong:"",Memo:""},drawer:!1,Data:[],pageNum:1,pagesize:10,total:0,productCode:"",barcodeMemo:"",man:"",desc:"",memo:"",GDProIdData:{}}},computed:{},watch:{},methods:{Manufacturer:function(){var t=this,e={url:this.$store.state.http+"System/GetBrand",api:"get"};this.$https(e).then(function(e){t.options=e.Data;for(var a=0;a<t.options.length;a++)t.options[a].value=t.options[a].Value;console.log(t.options)})},querySearchPP:function(t,e){if(void 0==t)return t="",e(this.options),!1;if(""==t)return e(this.options),!1;for(var a=t,o=this.options,i=[],r=(a.split("")[0],0);r<o.length;r++){var s=o[r];-1!=s.value.indexOf(a)&&i.push(s)}e(i)},handleSelect:function(t){console.log(t),this.man=t.value},onSubmit:function(){var t=this;if(void 0==this.GDProIdData.Characteristics)return this.$message.warning("请选择整机！"),!1;if(""==this.form.Position)return this.$message.warning("请输入库位！"),!1;if(""==this.form.Belong)return this.$message.warning("请选择隶属公司"),!1;var e={api:"post",url:this.$store.state.http+"StorageRoom/AddStandby",data:{ProId:this.GDProIdData.ID,Position:this.form.Position,Memo:this.form.Memo,Belong:"客服部"==this.form.Belong?1:2}};this.$https(e).then(function(e){t.$emit("refresh"),t.$router.push({path:"/SparePartsStorehouse"}),t.$message.success("添加成功！")})},GDProId:function(){this.drawer=!0},select:function(t){var e=this;void 0==t&&null==t||(this.pageNum=1);var a={api:"get",url:this.$store.state.http+"Product/GetProducts2",data:{pageNum:this.pageNum,numPerPage:this.pagesize,orderField:"",orderDirection:"",proType:"2",productCode:this.productCode,barcodeMemo:this.barcodeMemo,man:this.man,desc:this.desc,memo:this.memo}};this.$https(a).then(function(t){console.log(),e.Data=t.Data.Dtos,e.total=t.Data.DataBars,e.gridData=t.Data.Dtos;for(var a=0;a<e.gridData.length;a++)e.gridData[a].UpdateDate=e.gridData[a].UpdateDate.split("T")[0];console.log(e.gridData)})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},onSubmitON:function(){this.$emit("refresh"),this.$router.push({path:"/SparePartsStorehouse"})},func:function(t,e){this.pagesize=t,this.pageNum=e,this.select()},adds:function(t){console.log(t),this.GDProIdData=t,this.drawer=!1}},created:function(){this.select(),this.Manufacturer()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[a("div",{staticStyle:{width:"800px"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品"}},[void 0==t.GDProIdData.Characteristics?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.GDProId}},[t._v("选择产品")]):t._e(),t._v(" "),void 0!=t.GDProIdData.Characteristics?a("el-card",{staticClass:"box-card",attrs:{size:"mini"}},[a("div",{staticClass:"clearfix",staticStyle:{margin:"-10px"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.GDProIdData.Characteristics))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.GDProId}},[t._v("重新选择")])],1),t._v(" "),a("div",{staticStyle:{margin:"-15px"}},[a("p",[a("span",{staticStyle:{marginRight:"100px"}},[t._v("产品编号")]),t._v(" "+t._s(t.GDProIdData.ProductCode))]),t._v(" "),a("p",[a("span",{staticStyle:{marginRight:"100px"}},[t._v("内部编码")]),t._v(" "+t._s(t.GDProIdData.BarcodeMemo))]),t._v(" "),a("p",[a("span",{staticStyle:{marginRight:"100px"}},[t._v(t._s("品牌  ")+" ")]),t._v(" "+t._s(t.GDProIdData.Manufacturer))])])]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"库位"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini"},model:{value:t.form.Position,callback:function(e){t.$set(t.form,"Position",e)},expression:"form.Position"}}),t._v(" "),a("el-link",{attrs:{underline:!1,type:"info"}},[t._v("如果此库位不存在，系统会自动添加库位")])],1),t._v(" "),a("el-form-item",{attrs:{label:"隶属"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.form.Belong,callback:function(e){t.$set(t.form,"Belong",e)},expression:"form.Belong"}},[a("el-radio",{attrs:{label:"客服部"}}),t._v(" "),a("el-radio",{attrs:{label:"培训室"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},size:"mini"},model:{value:t.form.Memo,callback:function(e){t.$set(t.form,"Memo",e)},expression:"form.Memo"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:t.onSubmitON}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")])],1)],1)],1),t._v(" "),a("el-drawer",{staticStyle:{width:"200%"},attrs:{visible:t.drawer,direction:"ltr",modal:!1,title:"添加设备","before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"top_init_data",staticStyle:{marginbottom:"10px"}},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入产品编码"},on:{change:function(e){return t.select()}},model:{value:t.productCode,callback:function(e){t.productCode=e},expression:"productCode"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入内部编码"},on:{change:function(e){return t.select()}},model:{value:t.barcodeMemo,callback:function(e){t.barcodeMemo=e},expression:"barcodeMemo"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入产品描述"},on:{change:function(e){return t.select()}},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入产品备注"},on:{change:function(e){return t.select()}},model:{value:t.memo,callback:function(e){t.memo=e},expression:"memo"}}),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"200px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearchPP,placeholder:"请选择品牌",clearable:""},on:{select:t.handleSelect},model:{value:t.man,callback:function(e){t.man=e},expression:"man"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.select()}}},[t._v("检索")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{marginbottom:"10px"},attrs:{data:t.Data,size:"mini",height:this.$store.state.TableOptimumHeight,border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"ProductCode",label:"产品编号",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BarcodeMemo",label:"内部编码",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SN",label:"序列号",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Manufacturer",label:"品牌",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Characteristics",label:"产品描述","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.adds(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,i,!1,function(t){a("KLwA")},"data-v-49bf1e7e",null);e.default=r.exports}});