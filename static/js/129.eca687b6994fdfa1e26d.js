webpackJsonp([129],{DK5S:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:function(){return{State:0,Data:{},imgList:[],WoCodeCost:0,options:[{value:"OnlineRepair",label:"现场维修"},{value:"SmallRepair",label:"小件维修"},{value:"MulDeu",label:"MUL&DBL维修"}],TypeWorkOrder:"",activeName:"",RepairWos:[],SODtos:[],Other:""}},created:function(){this.init()},components:{},methods:{AddOrdeTypeWorkOrderr:function(){var t=this;if(console.log(this.TypeWorkOrder),""==this.TypeWorkOrder)return this.$message.warning("请选择工单类型！"),!1;var e={url:this.$store.state.http+"WO/SelectOrderType",api:"post",data:{Id:this.Data.RepairBase.RepairId,Str:this.TypeWorkOrder,Other:this.Other}};this.$https(e).then(function(e){console.log(e),t.$message.success("创建了一条工单！"),t.$store.state.Vuex.Id=e.Data,"OnlineRepair"==t.TypeWorkOrder&&t.$router.push({path:"/OnSiteMaintenance"}),"SmallRepair"==t.TypeWorkOrder&&t.$router.push({path:"/MinorMaintenance"}),"MulDeu"==t.TypeWorkOrder&&t.$router.push({path:"/DBLMaintenance"})})},init:function(){var t=this,e={url:this.$store.state.http+"WO/GetRepairDetailInfo",api:"get",data:{repairId:this.$store.state.Vuex.Id}};this.$https(e).then(function(e){if(console.log(e.Data),t.Data=e.Data,t.State=e.Data.RepairBase.State,t.SODtos=e.Data.SODtos,t.RepairWos=e.Data.RepairWos,t.Data.RepairCosts)for(var a=0;a<t.Data.RepairCosts.length;a++)t.WoCodeCost+=t.Data.RepairCosts[a].Cost})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[t.Data.RepairBase?a("div",[a("div",{staticClass:"segmentation"},[t._v("\n      基础信息 【"+t._s(t.Data.RepairBase.CusName)+"】\n    ")]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("p",[a("span",[t._v("报修单号:")]),t._v(t._s(t.Data.RepairBase.RepairCode))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("申请日期:")]),t._v(t._s(t.Data.RepairBase.CreateDate))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("受理日期:")]),t._v(t._s(t.Data.RepairBase.AcceptanceDate))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("解决日期:")]),t._v(t._s(t.Data.RepairBase.OverOrderDate))])]),t._v(" "),a("div",{staticStyle:{width:"100%",height:"1px",float:"left"}}),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("报修人:")]),t._v(t._s(t.Data.RepairMan.RepairName))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("英文名:")]),t._v(t._s(t.Data.RepairMan.RepairNameEn))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("手机号码:")]),t._v(t._s(t.Data.RepairMan.MobilePhone))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("固定号码:")]),t._v(t._s(t.Data.RepairMan.Tel))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"600px"}},[a("p",[a("span",[t._v("邮箱:")]),t._v(t._s(t.Data.RepairMan.Email))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"600px"}},[a("p",[a("span",[t._v("公司地址:")]),t._v(t._s(t.Data.RepairMan.AddressDetail))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentText"},[a("p",{staticStyle:{"word-break":"break-all"}},[a("span",[t._v("客户备注:")]),t._v(t._s(t.Data.RepairBase.Remark))])])]):t._e(),t._v(" "),t.Data.RepairDeviceInfo?a("div",[a("div",{staticClass:"segmentation"},[t._v("\n      故障设备\n    ")]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("产品编号:")]),t._v(t._s(t.Data.RepairDeviceInfo.DeviceCode))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("序列号:")]),t._v(t._s(t.Data.RepairDeviceInfo.DeviceSN))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("设备品牌:")]),t._v(t._s(t.Data.RepairDeviceInfo.DeviceBrand))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[a("p",[a("span",[t._v("设备描述:")]),t._v(t._s(t.Data.RepairDeviceInfo.DeviceDesc))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentText"},[a("p",{staticStyle:{"word-break":"break-all"}},[a("span",[t._v("故障描述:")]),t._v(t._s(t.Data.RepairBase.FaultDescribe))])])]):t._e(),t._v(" "),t.Data.RepairDeviceInfo?a("div",[a("div",{staticClass:"segmentation"},[t._v("\n      故障图片&视频\n    ")]),t._v(" "),t._l(t.Data.RepairFaultImages,function(e,s){return a("div",{key:s,staticClass:"demo-image__preview",staticStyle:{width:"200px",float:"left"}},["picture"==e.Type?a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.Path,fit:"fill","preview-src-list":[e.Path]}}):t._e()],1)}),t._v(" "),t._l(t.Data.RepairFaultImages,function(e,s){return a("div",{key:s+123,staticClass:"demo-image__preview",staticStyle:{width:"200px",float:"left"}},["video"==e.Type?a("video",{staticClass:"avatar video-avatar",staticStyle:{width:"100%"},attrs:{src:e.Path,controls:"controls"}},[t._v("\n        您的浏览器不支持视频播放\n      ")]):t._e()])})],2):t._e(),t._v(" "),t.Data.RepairCosts?a("div",[a("div",{staticClass:"segmentation"},[t._v("\n      费用清单\n    ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%",paddingLeft:"50px",fontSize:"12px"},attrs:{data:t.Data.RepairCosts}},[a("el-table-column",{attrs:{prop:"OrderTypeStr",label:"工单类型",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"WoCode",label:"单号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"TravelTravelInfo",label:"差旅费",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Service",label:"服务费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Cost",label:"合计"}})],1)],1):t._e(),t._v(" "),t._l(t.RepairWos,function(e,s){return a("div",{key:s+23,staticClass:"Details"},[a("div",{staticClass:"DetailsTopTitle",on:{click:function(t){e.IsShow=!e.IsShow}}},[t._v("\n      "+t._s("工单："+e.WoCode)+"\n      "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.IsShow,expression:"item.IsShow"}],staticClass:"el-icon-caret-left",staticStyle:{float:"right"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.IsShow,expression:"!item.IsShow"}],staticClass:"el-icon-caret-bottom",staticStyle:{float:"right"}})]),t._v(" "),a("div",{staticClass:"DetailsBotttomTitle",style:{"max-height":e.IsShow?"1000px":"0px"}},[a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("工程师:")]),t._v(t._s(e.Enginner))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("工单类型:")]),t._v(t._s(e.WoType))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("状态:")]),t._v(t._s(e.WoStateStr))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentText"},[a("p",{staticStyle:{"word-break":"break-all"}},[a("span",[t._v("工作内容:")]),t._v(t._s(e.WorkContent))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentText"},[a("p",{staticStyle:{"word-break":"break-all"}},[a("span",[t._v("备注:")]),t._v(t._s(e.Memo))])])])])}),t._v(" "),t._l(t.SODtos,function(e,s){return a("div",{key:s,staticClass:"Details"},[a("div",{staticClass:"DetailsTopTitle",on:{click:function(t){e.IsShow=!e.IsShow}}},[t._v("\n      "+t._s("订单："+e.SOCode)+"\n      "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.IsShow,expression:"item.IsShow"}],staticClass:"el-icon-caret-left",staticStyle:{float:"right"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.IsShow,expression:"!item.IsShow"}],staticClass:"el-icon-caret-bottom",staticStyle:{float:"right"}})]),t._v(" "),a("div",{ref:"element",refInFor:!0,staticClass:"DetailsBotttomTitle",style:{"max-height":e.IsShow?"1000px":"0px"}},[a("el-table",{staticStyle:{width:"100%",fontSize:"12px"},attrs:{data:e.SOEquipmentList}},[a("el-table-column",{attrs:{prop:"ProcodeCode",label:"产品编码",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Brand",label:"品牌",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Desc",label:"描述",width:"180","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"UnitPrice",label:"单价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Number",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"AssemblyPeice",label:"安装单价"}}),t._v(" "),a("el-table-column",{attrs:{label:"安装",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.IsAssembly?"需要":"不需要"))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"金额",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(Number(e.row.UnitPrice)*Number(e.row.Number)))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("状态:")]),t._v(t._s(e.StateStr))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("收货人:")]),t._v(t._s(e.Consignee.Name))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("联系方式:")]),t._v(t._s(e.Consignee.MobilePhone))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"400px"}},[a("p",[a("span",[t._v("邮箱:")]),t._v(t._s(e.Consignee.EMail))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentText"},[a("p",{staticStyle:{"word-break":"break-all"}},[a("span",[t._v("地址:")]),t._v(t._s(e.Consignee.Address))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentText"},[a("p",{staticStyle:{"word-break":"break-all"}},[a("span",[t._v("备注:")]),t._v(t._s(e.Memo))])])],1)])}),t._v(" "),0==t.State?a("div",[a("div",{staticClass:"segmentation"},[t._v("\n      选择工单类型\n      "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.AddOrdeTypeWorkOrderr()}}},[t._v("创建工单")])],1),t._v(" "),a("div",{staticClass:"itemmsgxx_documentSece"},[a("span",{staticClass:"leftSpan"},[t._v("选择工单类型:")]),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.TypeWorkOrder,callback:function(e){t.TypeWorkOrder=e},expression:"TypeWorkOrder"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]):t._e(),t._v(" "),0==t.State?a("div",[a("div",{staticClass:"segmentation"},[t._v("\n      备注\n    ")]),t._v(" "),a("div",{staticClass:"itemmsgxx_documentSece"},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.Other,callback:function(e){t.Other=e},expression:"Other"}})],1)]):t._e()],2)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("siG4")},"data-v-467ee960",null);e.default=l.exports},siG4:function(t,e){}});