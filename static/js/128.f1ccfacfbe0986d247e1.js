webpackJsonp([128],{"8Xtp":function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("mvHQ"),o=l.n(a),n=l("t4zo"),r=l.n(n),i=l("uXZL"),s=l.n(i),c={data:function(){return{ProductDto:{Jing:"无"},tableData:[],tableData2:[],tableDataTrue:[],tableDataFalse:[],retrieval:{productCode:"",saler:"",contractCode:"",cusId:""},kehu:""}},created:function(){},mounted:function(){},computed:{retrievalJT:function(){return o()(this.retrieval)}},watch:{retrievalJT:function(t,e){""==this.retrieval.productCode.trim()&&""==this.retrieval.saler.trim()&&""==this.retrieval.contractCode.trim()&&""==this.retrieval.cusId.trim()||this.start()}},methods:{download:function(t,e){var l=s.a.utils.table_to_book(document.querySelector(t),{raw:!0}),a=s.a.write(l,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([a],{type:"application/octet-stream"}),e+".xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,a)}return a},querySearch:function(t,e){!t&&(t="北京");var l={search:t};this.API_GET("CRM/GetCustomerMini",l).then(function(t){for(var l=[],a=0;a<t.Dtos.length;a++)t.Dtos[a].value=t.Dtos[a].FullName,l.push(t.Dtos[a]);e(l)})},handleSelect:function(t){this.retrieval.cusId=t.CusId},clear:function(){this.retrieval.cusId=""},path:function(t){this.$router.push({path:"/machine-sales-edit",query:{Id:t.ContractId,PointingDevice:this.productCode}})},start:function(){var t=this;this.tableData=[],this.tableData2=[],this.ProductDto=[],this.API_GET("MachineSO/MsoSentStat",this.retrieval).then(function(e){console.log(e),t.tableData=e.Dtos,t.tableData2=e.Dtos,t.ProductDto=e.ProductDto,t.tableDataTrue=[],t.tableDataFalse=[],t.tableData.forEach(function(e){null!=e.Dt&&(e.Dt=e.Dt.split("T")[0]),e.WaitSent>0&&t.tableDataTrue.push(e),0==e.WaitSent&&t.tableDataFalse.push(e)})})}},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},u={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("SaxoPage",{scopedSlots:t._u([{key:"title",fn:function(){return[l("div",{staticClass:"department",staticStyle:{width:"300px"}},[l("span",[t._v("客户")]),t._v(" "),l("el-autocomplete",{staticStyle:{width:"200px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容",size:"mini",clearable:""},on:{select:t.handleSelect,clear:t.clear},model:{value:t.kehu,callback:function(e){t.kehu=e},expression:"kehu"}})],1),t._v(" "),l("div",{staticClass:"department"},[l("span",[t._v("对内编码")]),t._v(" "),l("el-input",{attrs:{placeholder:"请输入对内编码",size:"mini"},model:{value:t.retrieval.productCode,callback:function(e){t.$set(t.retrieval,"productCode",e)},expression:"retrieval.productCode"}})],1),t._v(" "),l("div",{staticClass:"department"},[l("span",[t._v("合同号")]),t._v(" "),l("el-input",{attrs:{placeholder:"请输入合同号",size:"mini"},model:{value:t.retrieval.contractCode,callback:function(e){t.$set(t.retrieval,"contractCode",e)},expression:"retrieval.contractCode"}})],1),t._v(" "),l("div",{staticClass:"department"},[l("span",[t._v("销售")]),t._v(" "),l("el-input",{attrs:{placeholder:"请输入销售",size:"mini"},model:{value:t.retrieval.saler,callback:function(e){t.$set(t.retrieval,"saler",e)},expression:"retrieval.saler"}})],1)]},proxy:!0},{key:"content",fn:function(){return[t.tableData.length?l("div",[l("saxo-button",{staticStyle:{float:"right","margin-right":"13px"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.download("#table2","整机发货统计_已发货")}}},[t._v("已发货\n                "),l("i",{staticClass:"el-icon-download"})]),t._v(" "),l("saxo-button",{staticStyle:{float:"right","margin-right":"13px"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.download("#table1","整机发货统计_待发货")}}},[t._v("待发货\n                "),l("i",{staticClass:"el-icon-download"})]),t._v(" "),l("saxo-button",{staticStyle:{float:"right","margin-right":"13px"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.download("#table3","整机发货统计_全部")}}},[t._v("全部\n                "),l("i",{staticClass:"el-icon-download"})])],1):t._e(),t._v(" "),t.ProductDto&&t.ProductDto.JingDetail?l("h3",[t._v("基础信息")]):t._e(),t._v(" "),t.ProductDto&&t.ProductDto.JingDetail?l("el-descriptions",{staticClass:"margin-top",attrs:{column:3,size:"mini",border:""}},[l("el-descriptions-item",[l("template",{slot:"label"},[t._v("\n                    对内编码\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.ProductCode)+"\n            ")],2),t._v(" "),l("el-descriptions-item",[l("template",{slot:"label"},[t._v("\n                    对外编码\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.ProductCode2)+"\n\n            ")],2),t._v(" "),l("el-descriptions-item",[l("template",{slot:"label"},[t._v("\n                    采购中\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.JingDetail.split("*")[0])+"\n            ")],2),t._v(" "),l("el-descriptions-item",[l("template",{slot:"label"},[t._v("\n                    在途\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.JingDetail.split("*")[1])+"\n            ")],2),t._v(" "),l("el-descriptions-item",[l("template",{slot:"label"},[t._v("\n                    在库\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.JingDetail.split("*")[2])+"\n            ")],2),t._v(" "),l("el-descriptions-item",[l("template",{slot:"label"},[t._v("\n                    销售量\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.JingDetail.split("*")[3])+"\n            ")],2),t._v(" "),l("el-descriptions-item",{attrs:{span:"3"}},[l("template",{slot:"label"},[t._v("\n                    净库存\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.JingDetail.split("*")[4])+"\n            ")],2),t._v(" "),l("el-descriptions-item",{attrs:{span:"3"}},[l("template",{slot:"label"},[t._v("\n                    对内描述\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.Desc)+"\n            ")],2),t._v(" "),l("el-descriptions-item",{attrs:{span:"3"}},[l("template",{slot:"label"},[t._v("\n                    对外描述\n                ")]),t._v("\n                "+t._s("  "+t.ProductDto.Desc2)+"\n            ")],2)],1):t._e(),t._v(" "),t.tableData.length?l("div",[l("h3",[t._v("待发货")]),t._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataTrue,id:"table1",size:"mini"}},[l("el-table-column",{attrs:{prop:"CusFullName",label:"客户/供应商","show-overflow-tooltip":!0}}),t._v(" "),l("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"170"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ProductCode",label:"对内编码",width:"150"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Desc",label:"对内描述","show-overflow-tooltip":!0}}),t._v(" "),l("el-table-column",{attrs:{prop:"WaitSent",label:"待发量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Quantity",label:"销售量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"DeliverQuantity",label:"已发量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ReturnQuantity",label:"退货量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"NoSentQuantity",label:"前期合同已发量",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Saler",label:"销售",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Dt",label:"付款时间",width:"100"}}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-link",{attrs:{type:"primary"},on:{click:function(l){return t.path(e.row)}}},[t._v("查看")])]}}],null,!1,1905514197)})],1),t._v(" "),l("h3",[t._v("已发货")]),t._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataFalse,id:"table2",size:"mini"}},[l("el-table-column",{attrs:{prop:"CusFullName",label:"客户/供应商","show-overflow-tooltip":!0}}),t._v(" "),l("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"170"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ProductCode",label:"对内编码",width:"150"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Desc",label:"对内描述","show-overflow-tooltip":!0}}),t._v(" "),l("el-table-column",{attrs:{prop:"WaitSent",label:"待发量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Quantity",label:"销售量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"DeliverQuantity",label:"已发量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ReturnQuantity",label:"退货量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"NoSentQuantity",label:"前期合同已发量",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Saler",label:"销售",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Dt",label:"付款时间",width:"100"}}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-link",{attrs:{type:"primary"},on:{click:function(l){return t.path(e.row)}}},[t._v("查看")])]}}],null,!1,1905514197)})],1),t._v(" "),l("el-table",{staticStyle:{display:"none"},attrs:{data:t.tableData2,id:"table3"}},[l("el-table-column",{attrs:{prop:"CusFullName",label:"客户/供应商","show-overflow-tooltip":!0}}),t._v(" "),l("el-table-column",{attrs:{prop:"ContractCode",label:"合同号",width:"150"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ProductCode",label:"对内编码",width:"150"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Desc",label:"对内描述","show-overflow-tooltip":!0}}),t._v(" "),l("el-table-column",{attrs:{prop:"WaitSent",label:"待发量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Quantity",label:"销售量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"DeliverQuantity",label:"已发量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"ReturnQuantity",label:"退货量",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"NoSentQuantity",label:"前期合同已发量",width:"140"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Saler",label:"销售",width:"80"}}),t._v(" "),l("el-table-column",{attrs:{prop:"Dt",label:"付款时间",width:"100"}})],1)],1):t._e()]},proxy:!0}])})},staticRenderFns:[]};var p=l("VU/8")(c,u,!1,function(t){l("vNEX")},"data-v-46e03367",null);e.default=p.exports},vNEX:function(t,e){}});