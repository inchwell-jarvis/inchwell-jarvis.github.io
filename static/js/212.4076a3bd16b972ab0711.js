webpackJsonp([212],{hSvy:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e={name:"",data:function(){return{Data:this.$store.state.Vuex.GetFCollections,GetMCPlistDataList:0,GetMCPlistData:[],reverse:!0,FinancialConfirmed:0,FinancialUnconfirmed:0,dialogVisible:!1,admin:"",value1:"",Id:""}},created:function(){this.GetMCPlist()},components:{},methods:{GetMCPlist:function(){var t=this,a={api:"GET",url:this.$store.state.http+"maintain/GetMCPlist",data:{id:this.Data.MaintainId}};this.$https(a).then(function(a){t.GetMCPlistData=a.Data,t.GetMCPlistDataList=0;for(var s=0;s<t.GetMCPlistData.length;s++){var e=t.GetMCPlistData[s];t.GetMCPlistDataList+=e.Amount,2==e.State?(console.log(e.Amount),t.FinancialConfirmed+=e.Amount):t.FinancialUnconfirmed+=e.Amount,e.KefuBounsDate?e.KefuBounsDate=e.KefuBounsDate.split("T")[0]:e.KefuBounsDate="- - ",e.GcsBounsDate?e.GcsBounsDate=e.GcsBounsDate.split("T")[0]:e.GcsBounsDate="- - "}})},TrueSK:function(){var t=this,a={api:"post",url:this.$store.state.http+"maintain/MFCPay",data:{id:this.Data.Id}};this.$https(a).then(function(a){t.$message.success("确认收款成功！"),t.$emit("refresh"),t.$router.push({path:"/FinancialReceipts"})})},handleClose:function(t){this.$confirm("确认关闭？").then(function(a){t()}).catch(function(t){})},UpdateMCBounsDate:function(){var t=this;if(console.log(this.value1),""==this.value1)return this.$message({message:"请选择时间",type:"warning"}),!1;var a={api:"post",url:this.$store.state.http+"Maintain/UpdateMCBounsDate",data:{id:this.Id,Str:this.value1,Type:this.admin}};this.$https(a).then(function(a){t.$message({message:"修改成功！",type:"success"}),t.GetMCPlist(),t.dialogVisible=!1,t.value1=""})}}},i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"box_s"},[s("div",{staticClass:"segmentation"},[t._v("\n        基础信息\n    ")]),t._v(" "),s("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"100%"}},[s("p",[s("span",[t._v("客户名称:")]),t._v(t._s(t.Data.CusName))])]),t._v(" "),s("div",{staticClass:"itemmsgxx_document"},[s("p",[s("span",[t._v("合同号:")]),t._v(t._s(t.Data.MaintainCode))])]),t._v(" "),s("div",{staticClass:"itemmsgxx_document"},[s("p",[s("span",[t._v("当前状态:")]),t._v(t._s(t.Data.StateStr))])]),t._v(" "),s("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"calc(100% - 600px)"}},[s("p",[s("span",[t._v("创建时间:")]),t._v(t._s(t.Data.CreateDate))])]),t._v(" "),s("div",{staticClass:"itemmsgxx_document"},[s("p",[s("span",[t._v("财务确认人:")]),t._v(t._s(t.Data.Confirmer))])]),t._v(" "),s("div",{staticClass:"itemmsgxx_document"},[s("p",[s("span",[t._v("财务确认时间:")]),t._v(t._s(t.Data.ConfirmeDate))])]),t._v(" "),s("div",{staticClass:"segmentation"},[t._v("\n        本次收款金额\n        "),"财务已确认"!=t.Data.StateStr?s("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.TrueSK()}}},[t._v("确认收款")]):t._e()],1),t._v(" "),s("div",{staticClass:"itemmsgxx_document"},[s("p",[s("span",{staticStyle:{"font-size":"50px",color:"red","font-family":"Arial","line-height":"100px","margin-left":"30px"}},[t._v(t._s(t.Data.Amount))])])]),t._v(" "),s("div",{staticClass:"segmentation",staticStyle:{"margin-top":"80px"}},[t._v("收款记录\n        "),s("p",{staticStyle:{float:"right",color:"#000"}},[t._v("\n            (财务已确认："+t._s(t.FinancialConfirmed+" 元")+" )   \n        ")]),t._v(" "),s("p",{staticStyle:{float:"right",color:"#000"}},[t._v("\n            (等待确认："+t._s(t.FinancialUnconfirmed+" 元")+" )   \n        ")]),t._v(" "),s("p",{staticStyle:{float:"right",color:"#000"}},[t._v("\n            (合同总金额："+t._s(t.Data.ContractAmount+" 元")+" )   \n        ")])]),t._v(" "),s("div",{staticClass:"timeline"},[s("el-timeline",{attrs:{reverse:t.reverse}},t._l(t.GetMCPlistData,function(a,e){return s("el-timeline-item",{key:e,attrs:{color:2==a.State?"#67C23A":"#909399"}},[t._v("\n                "+t._s(a.Amount+" 元 - - "+a.StateStr)+"\n                "),t._v(" "),s("p",{staticClass:"p1",staticStyle:{color:"#909399",fontSize:"13px",marginTop:"10px",paddingLeft:"20px",cursor:"pointer"}},[t._v(" "+t._s(a.Other))]),t._v(" "),"财务已确认"==a.StateStr?s("p",{staticClass:"p1",staticStyle:{color:"#909399",fontSize:"13px",marginTop:"10px",paddingLeft:"20px",cursor:"pointer"}},[s("span",{staticStyle:{marginRight:"40px"}},[t._v(t._s("客服奖金计算日期:"+a.KefuBounsDate))]),t._v(" "),s("span",[t._v(t._s("工程师奖金计算日期:"+a.GcsBounsDate))])]):t._e()])}),1)],1)])},staticRenderFns:[]},n=s("VU/8")(e,i,!1,null,null,null);a.default=n.exports}});