webpackJsonp([230],{"8vdB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),l=a.n(r),o={data:function(){return{options:[{value:-1,label:"全部"},{value:1,label:"申请中"},{value:2,label:"已付款"},{value:3,label:"已驳回"}],SubordinateCompany:[{value:"",label:"全部"},{value:"服务公司",label:"服务公司"},{value:"技术公司",label:"技术公司"}],tableData:[],total:0,retrieval:{search:"",belongCompany:"",payState:-1,buyer:"",Id:"",pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:""},reviewrow:{},RequestRefundDialog:!1}},computed:{retrievalJT:function(){return l()(this.retrieval)}},watch:{retrievalJT:function(e,t){this.WatchFenYe(e,t)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{ReviewRefund:function(e){var t=this;console.log(e),this.API_POST("MachineSO/"+this.reviewrow.url,{Id:this.reviewrow.ID,type:e}).then(function(e){t.$message.success("审核成功！"),t.RequestRefundDialog=!1,t.start()})},review:function(e,t){console.log(e),this.reviewrow=e,this.reviewrow.url=t,this.RequestRefundDialog=!0},start:function(){var e=this;this.API_GET("MachineSO/GetMpoRefunds",this.retrieval).then(function(t){console.log(t),e.tableData=t.Dtos,e.total=t.DataBars;for(var a=0;a<e.tableData.length;a++){var r=e.tableData[a];r.CreateDate=r.CreateDate.split("T")[0]}})},SaxoFenYe:function(e,t){this.retrieval.numPerPage=e,this.retrieval.pageNum=t,this.start()}},created:function(){this.start()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:e.start}}),e._v(" "),a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[e._v("\n            "+e._s(e.$route.meta.title)+"\n        ")]),e._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[e._v("供应商、合同号")]),e._v(" "),a("el-input",{attrs:{placeholder:"供应商、合同号",size:"mini"},on:{change:function(t){return e.start()}},model:{value:e.retrieval.search,callback:function(t){e.$set(e.retrieval,"search",t)},expression:"retrieval.search"}})],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("隶属公司")]),e._v(" "),a("el-select",{attrs:{placeholder:"隶属公司",size:"mini"},on:{change:function(t){return e.start()}},model:{value:e.retrieval.belongCompany,callback:function(t){e.$set(e.retrieval,"belongCompany",t)},expression:"retrieval.belongCompany"}},e._l(e.SubordinateCompany,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("状态")]),e._v(" "),a("el-select",{attrs:{placeholder:"状态",size:"mini"},on:{change:function(t){return e.start()}},model:{value:e.retrieval.payState,callback:function(t){e.$set(e.retrieval,"payState",t)},expression:"retrieval.payState"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("采购员")]),e._v(" "),a("el-input",{attrs:{placeholder:"采购员",size:"mini"},on:{change:function(t){return e.start()}},model:{value:e.retrieval.buyer,callback:function(t){e.$set(e.retrieval,"buyer",t)},expression:"retrieval.buyer"}})],1)])]),e._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":e.$store.state.headerCellStyle,"cell-style":e.$store.state.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"CusFullName",label:"供应商名称","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"POCode",label:"合同号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Buyer",label:"采购员",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.PayState?a("span",[e._v(" "+e._s(t.row.PayStateStr))]):e._e(),e._v(" "),2==t.row.PayState?a("span",{staticStyle:{color:"#67C23A"}},[e._v(" "+e._s(t.row.PayStateStr))]):e._e(),e._v(" "),3==t.row.PayState?a("span",{staticStyle:{color:"#F56C6C"}},[e._v(" "+e._s(t.row.PayStateStr))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"POType",label:"业务来源类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"RefundTo",label:"退至",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"BelongCompany",label:"隶属公司",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"AuditorA",label:"出纳",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"AuditorB",label:"财务经理",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"退款金额",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{float:"right"}},[e._v(" "+e._s(e.FinancialAmountFormat(t.row.Amount,e.FinancialAmountSymbol(t.row.BuyingCurrency))))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.AuditorA||1!=t.row.PayState?e._e():a("saxo-button",{attrs:{mini:""},on:{click:function(a){return e.review(t.row,"MpoRefundApproveA")}}},[e._v("出纳审批")]),e._v(" "),!t.row.AuditorB&&t.row.AuditorA&&1==t.row.PayState?a("saxo-button",{attrs:{mini:""},on:{click:function(a){return e.review(t.row,"MpoRefundApproveB")}}},[e._v("财务经理审批")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"审核退款",visible:e.RequestRefundDialog,width:"800px","append-to-body":!0},on:{"update:visible":function(t){e.RequestRefundDialog=t}}},[a("el-form",{attrs:{"label-width":"100px",model:e.reviewrow,size:"mini"}},[a("el-form-item",{attrs:{label:"退款金额"}},[a("span",{staticStyle:{color:"red"},domProps:{textContent:e._s(e.FinancialAmountFormat(e.reviewrow.Amount,e.FinancialAmountSymbol(e.reviewrow.BuyingCurrency)))}})]),e._v(" "),a("el-form-item",{attrs:{label:"供应商名称"}},[a("span",[e._v(e._s(e.reviewrow.CusFullName))])]),e._v(" "),a("el-form-item",{attrs:{label:"合同号"}},[a("span",[e._v(e._s(e.reviewrow.POCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e.reviewrow.CreateDate))])]),e._v(" "),a("el-form-item",{attrs:{label:"采购员"}},[a("span",[e._v(e._s(e.reviewrow.Buyer))])]),e._v(" "),a("el-form-item",{attrs:{label:"付款状态"}},[a("span",[e._v(e._s(e.reviewrow.PayStateStr))])]),e._v(" "),a("el-form-item",{attrs:{label:"业务来源类型"}},[a("span",[e._v(e._s(e.reviewrow.POType))])]),e._v(" "),a("el-form-item",{attrs:{label:"退至"}},[a("span",[e._v(e._s(e.reviewrow.RefundTo))])]),e._v(" "),a("el-form-item",{attrs:{label:"隶属公司"}},[a("span",[e._v(e._s(e.reviewrow.BelongCompany))])])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(t){return e.ReviewRefund(2)}}},[e._v("驳回")]),e._v(" "),a("saxo-button",{attrs:{mini:"",type:"primary"},on:{click:function(t){return e.ReviewRefund(1)}}},[e._v("批准")])],1)],1)],1),e._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:e.total},on:{func:e.SaxoFenYe}})],1)},staticRenderFns:[]},i=a("VU/8")(o,n,!1,null,null,null);t.default=i.exports}});