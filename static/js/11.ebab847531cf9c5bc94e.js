webpackJsonp([11],{"2gu+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),i=a("Xxa5"),r=a.n(i),o=a("//Fk"),l=a.n(o),u=a("exGp"),c=a.n(u),_={data:function(){return{parameter:{},UData:[],data:[{name:"业务员申请",bool:!1},{name:"审批退款(经理)",bool:!1},{name:"审批退款(财务)",bool:!1},{name:"批准请款",bool:!1},{name:"请款",bool:!1},{name:"核实请款",bool:!1},{name:"退款完毕",bool:!1}],PdfStyle:{display:"none"}}},computed:{},watch:{},methods:{PrintPDF:function(){var t=this;return c()(r.a.mark(function e(){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,n=document.getElementById("pdf"),a.PdfStyle={display:"block"},e.next=5,new l.a(function(t,e){setTimeout(function(){a.$print(n),a.PdfStyle={display:"none"}},500)});case 5:case"end":return e.stop()}},e,t)}))()},MsoReturnAudit:function(t,e){var a=this;this.API_POST("MachineSO/"+t,{Id:this.UData.ID,Type:e}).then(function(t){a.$message.success("操作成功"),a.start()})},MsoReturnPay:function(){var t=this;this.API_POST("MachineSO/MsoReturnPay",{Id:this.UData.ID}).then(function(e){t.$message.success("退款成功"),t.start()})},start:function(){var t=this,e={search:"",area:"",paystate:"-1",cusType:"",saler:"",pageNum:1,numPerPage:1e3,orderField:"",orderDirection:"",ID:this.parameter.row.ID,invState:-1};this.API_GET("MachineSO/GetFinanceMSOReturns",e).then(function(e){t.UData=e.MsoReturnDtos[0],console.log(t.UData);var a=t.UData.ReturnState;if(t.data.forEach(function(t){t.bool=!1}),8==a&&(t.data[0].bool=!0),2==a&&(t.data[1].bool=!0),3==a&&(t.data[2].bool=!0),6==a&&(t.data[3].bool=!0),7==a&&(t.data[4].bool=!0),4==a&&(t.data[6].bool=!0),9==a&&(t.data=["已驳回"]),5==a&&(t.data=["无退款"]),t.UData.OtherStr&&t.UData.OtherStr.includes(",")){var n=t.UData.OtherStr.split(",");t.data[1].adverb=n[0],t.data[3].adverb=n[1]}console.log(JSON.parse(s()(t.data)))})}},created:function(){console.log(this.$route.query),this.parameter=this.$route.query,this.start()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.$emit("refresh")},destroyed:function(){}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[a("div",{staticClass:"retrieve"},[a("span",{staticClass:"retrieveSpan"},[t._v("编辑整机销售退款")]),t._v(" "),a("saxo-button",{staticStyle:{float:"right"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.PrintPDF()}}},[t._v("打印")]),t._v(" "),t.parameter.mode?a("div",[8==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAuditD",2)}}},[t._v("驳回退款")]):t._e(),t._v(" "),8==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"success",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAuditD",1)}}},[t._v("批准退款")]):t._e(),t._v(" "),2==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAudit",2)}}},[t._v("驳回退款")]):t._e(),t._v(" "),2==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"success",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAudit",1)}}},[t._v("批准退款")]):t._e(),t._v(" "),3==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAuditB",2)}}},[t._v("驳回请款")]):t._e(),t._v(" "),3==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"success",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAuditB",1)}}},[t._v("批准请款")]):t._e(),t._v(" "),6==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAuditC",2)}}},[t._v("驳回")]):t._e(),t._v(" "),6==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"success",mini:""},on:{click:function(e){return t.MsoReturnAudit("MsoReturnAuditC",1)}}},[t._v("请款")]):t._e(),t._v(" "),7==t.UData.ReturnState?a("saxo-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"success",mini:""},on:{click:function(e){return t.MsoReturnPay(1)}}},[t._v("核实请款")]):t._e()],1):t._e()],1),t._v(" "),a("div",{staticClass:"Con"},[a("div",{style:t.PdfStyle,attrs:{id:"pdf"}},[a("SaxoProgress",{key:JSON.stringify(t.data),staticStyle:{"font-size":"12px"},attrs:{data:t.data}}),t._v(" "),a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,size:"mini",border:""}},[t.UData.CreateDate?a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n                        创建时间\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.CreateDate.split("T")[0])+"\n                ")],2):t._e(),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        客户名称\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.CusFullName)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        客户类型\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.CusType)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        区域\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.Area)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        订单编号\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.SOCode)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        付款状态\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.PayStateStr)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        申请人\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.Creater)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        财务操作人\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.FinancialOperator)+"\n                ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                        任务状态\n                    ")]),t._v("\n                    "+t._s("  "+t.UData.ReturnStateStr)+"\n                ")],2)],1),t._v(" "),a("br"),t._v(" "),a("p",{staticStyle:{"font-size":"14px","line-height":"25px"}},[t._v("备注:"+t._s(t.UData.Memo||"无"))]),t._v(" "),a("p",{staticStyle:{"font-size":"14px","line-height":"25px"}},[t.UData.TotalAmount>0?a("span",[t._v("退款金额: "),a("span",{staticClass:"Amount"},[t._v(t._s(t.FinancialAmountFormat(t.UData.TotalAmount)))])]):a("span",[t._v(t._s(t.UData.InvAtRed?"未开票挂账":"已开票挂账")+" : "),a("span",{staticClass:"Amount"},[t._v(" "+t._s(t.FinancialAmountFormat(t.UData.BuyerBuyingOnCreditAmount)))])])]),t._v(" "),t.UData.SystemInfo?a("el-timeline",{staticStyle:{margin:"30px 0 0 20px"}},t._l(t.UData.SystemInfo.split("@"),function(e,n){return a("el-timeline-item",{directives:[{name:"show",rawName:"v-show",value:""!=e,expression:"activity != ''"}],key:n,staticStyle:{padding:"0"},attrs:{timestamp:e.timestamp}},[t._v("\n                    "+t._s(e)+"\n                ")])}),1):t._e()],1),t._v(" "),a("div",{staticClass:"el-descriptions__title"},[t._v("进度 ")]),t._v(" "),a("SaxoProgress",{key:JSON.stringify(t.data),attrs:{data:t.data}}),t._v(" "),a("el-descriptions",{staticClass:"margin-top",attrs:{title:"基础信息",column:3,size:"mini",border:""}},[t.UData.CreateDate?a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n                    创建时间\n                ")]),t._v("\n                "+t._s("  "+t.UData.CreateDate.split("T")[0])+"\n            ")],2):t._e(),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    客户名称\n                ")]),t._v("\n                "+t._s("  "+t.UData.CusFullName)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    客户类型\n                ")]),t._v("\n                "+t._s("  "+t.UData.CusType)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    区域\n                ")]),t._v("\n                "+t._s("  "+t.UData.Area)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    订单编号\n                ")]),t._v("\n                "+t._s("  "+t.UData.SOCode)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    付款状态\n                ")]),t._v("\n                "+t._s("  "+t.UData.PayStateStr)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    申请人\n                ")]),t._v("\n                "+t._s("  "+t.UData.Creater)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    财务操作人\n                ")]),t._v("\n                "+t._s("  "+t.UData.FinancialOperator)+"\n            ")],2),t._v(" "),a("el-descriptions-item",[a("template",{slot:"label"},[t._v("\n\n                    任务状态\n                ")]),t._v("\n                "+t._s("  "+t.UData.ReturnStateStr)+"\n            ")],2)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"el-descriptions__title"},[t._v("备注 ")]),t._v(" "),a("div",{staticClass:"beizhu"},[t._v(t._s(t.UData.Memo||"无"))]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"el-descriptions__title"},[t._v("金额 ")]),t._v(" "),a("br"),t._v(" "),t.UData.TotalAmount>0?a("span",[t._v("退款金额: "),a("span",{staticClass:"Amount"},[t._v(t._s(t.FinancialAmountFormat(t.UData.TotalAmount)))])]):a("span",[t._v(t._s(t.UData.InvAtRed?"未开票挂账":"已开票挂账")+" : "),a("span",{staticClass:"Amount"},[t._v(" "+t._s(t.FinancialAmountFormat(t.UData.BuyerBuyingOnCreditAmount)))])]),t._v(" "),a("br"),a("br"),t._v(" "),a("h3",[t._v("系统信息")]),t._v(" "),t.UData.SystemInfo?a("el-timeline",{staticStyle:{margin:"30px 0 0 20px"}},t._l(t.UData.SystemInfo.split("@"),function(e,n){return a("el-timeline-item",{directives:[{name:"show",rawName:"v-show",value:""!=e,expression:"activity != ''"}],key:n,attrs:{timestamp:e.timestamp}},[t._v("\n                "+t._s(e)+"\n            ")])}),1):t._e(),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"el-descriptions__title"},[t._v("设备清单 ")]),t._v(" "),a("br"),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.UData.MsoReturnGoodDtos,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:""}},[a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Describe",label:"产品描述","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"ProductCode",label:"产品编码",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"LongCode",label:"内部编码",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Brand",label:"品牌",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StorageLocation",label:"库位",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Quantity",label:"退货数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"退货金额","header-align":"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s("￥"+e.row.Amount.toFixed(2)))])]}}])})],1)],1)])},staticRenderFns:[]};var p=a("VU/8")(_,v,!1,function(t){a("uy1n")},"data-v-45cfe10b",null);e.default=p.exports},uy1n:function(t,e){}});