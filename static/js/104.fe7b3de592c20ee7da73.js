webpackJsonp([104],{Zh4o:function(t,e){},hrlx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("t4zo"),l=a.n(o),n=a("uXZL"),s=a.n(n),i={data:function(){return{timeStr:"2017-03",Data:[],today:"",title:"",ExportDate:""}},created:function(){this.dayFun()},mounted:function(){},methods:{exportExcelTo:function(t){var e=s.a.utils.table_to_book(document.querySelector("#"+t),{raw:!0}),a=s.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{l.a.saveAs(new Blob([a],{type:"application/octet-stream"}),this.ExportDate+" 客户资金记录.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,a)}return a},TimeSchedule:function(t){console.log(t);var e=this.timeStr.split("-");e[0]=Number(e[0]),e[1]=Number(e[1]),console.log(e),t?1==e[1]?(e[0]-=1,e[1]=12):e[1]-=1:12==e[1]?(e[0]+=1,e[1]=1):e[1]+=1,this.timeStr=e[0]+"-"+e[1],this.start()},itemFun:function(t,e){console.log(this.Data[e]),this.ExportDate=this.Data[e].Date,this.Data[e].pop=!0},picker:function(t){console.log(t),this.start()},getWeekDate:function(t){t=this.Data[0].Date;var e=new Date(t).getDay(),a=new Array(6,0,1,2,3,4,5)[e];console.log(a);for(var o=0;o<a;o++)this.Data.unshift({day:!1,Dtos:null,Amount:0});for(var l=42-this.Data.length,n=0;n<l;n++)this.Data.push({day:!1,Dtos:null,Amount:0});return a},dayFun:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();this.today=e+"-"+(a<10?"0"+a:a)+"-"+(o<10?"0"+o:o),console.log(this.today),this.timeStr=e+"-"+a,this.start()},start:function(){var t=this,e={data:{dt:this.timeStr},api:"get",url:this.$store.state.http+"CRM/GetCusCapitalPoolStat"};this.$https(e).then(function(e){t.Data=e.Data.CapitalPoolStatDtos;for(var a=0;a<t.Data.length;a++){var o=t.Data[a];o.day=o.Date.split("-")[2],o.pop=!1,console.log("---"),console.log(o.UsageAmount/o.Amount),o.JinDu=Number((o.UsageAmount/o.Amount*100).toFixed(2))}t.getWeekDate(),console.log(t.Data)})}},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[t._v("\n            客户资金记录\n        ")]),t._v(" "),a("div",{staticClass:"ConView"},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",size:"mini","value-format":"yyyy-MM",clearable:!1},on:{change:t.picker},model:{value:t.timeStr,callback:function(e){t.timeStr=e},expression:"timeStr"}}),t._v(" "),a("saxo-button",{staticStyle:{"margin-left":"13px"},attrs:{mini:""},on:{click:function(e){return t.TimeSchedule(!0)}}},[t._v("上个月")]),t._v(" "),a("saxo-button",{staticStyle:{"margin-left":"13px"},attrs:{mini:""},on:{click:function(e){return t.TimeSchedule(!1)}}},[t._v("下个月")])],1),t._v(" "),a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:""},on:{click:function(e){return t.dayFun()}}},[t._v("今天"),a("i",{staticClass:"el-icon-date"})])],1),t._v(" "),a("div",{staticClass:"content2"},[t._m(0),t._v(" "),a("div",{staticClass:"dateV"},t._l(t.Data,function(e,o){return a("div",{key:o,staticClass:"date",on:{click:function(a){return t.itemFun(e,o)}}},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[e.Dtos?a("el-table",{attrs:{data:e.Dtos,height:"300px"}},[a("el-table-column",{attrs:{width:"300",property:"PayName",label:"付款名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{width:"100",property:"Other",label:"隶属公司"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Source",label:"来自",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",property:"Date",label:"日期"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",property:"StateStr",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"资金量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s("￥"+e.row.Amount.toFixed(2)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s("￥"+e.row.UsageAmount.toFixed(2)))])]}}],null,!0)},[a("template",{slot:"header"},[a("span",[t._v("使用量")]),t._v(" "),a("saxo-button",{staticStyle:{float:"right"},attrs:{mini:"",type:"info"},on:{click:function(e){return t.exportExcelTo("ID"+o)}}},[t._v("导出")])],1)],2)],1):t._e(),t._v(" "),e.Dtos?a("el-table",{staticStyle:{display:"none"},attrs:{data:e.Dtos,height:"300px",id:"ID"+o}},[a("el-table-column",{attrs:{width:"300",property:"PayName",label:"付款名称","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{width:"100",property:"Other",label:"隶属公司"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Source",label:"来自",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",property:"Date",label:"日期"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",property:"StateStr",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"资金量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(e.row.Amount.toFixed(2)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(e.row.UsageAmount.toFixed(2)))])]}}],null,!0)},[a("template",{slot:"header"},[a("span",[t._v("使用量")])])],2)],1):t._e(),t._v(" "),e.day?a("div",{staticClass:"date2",style:{color:e.Date>t.today?"#ccc":""},attrs:{slot:"reference"},slot:"reference"},[e.Date==t.today?a("div",{staticClass:"gang"}):t._e(),t._v(" "),a("div",{staticClass:"day"},[e.Date==t.today?a("p",{staticStyle:{color:"#5e72e4","font-weight":"bold"}},[t._v("\n                                "+t._s(e.day)+" "),a("span",[t._v("日")])]):t._e(),t._v(" "),e.Date!=t.today?a("p",[t._v("\n                                "+t._s(e.day)+" "),a("span",[t._v("日")])]):t._e()]),t._v(" "),a("br"),t._v(" "),e.Amount?a("div",{staticClass:"com"},[a("p",{staticClass:"liang"},[t._v("资金量：￥"+t._s(e.Amount))]),t._v(" "),a("p",{staticClass:"liang"},[t._v("使用量：￥"+t._s(e.UsageAmount))]),t._v(" "),a("p",{staticClass:"liang"},[t._v("剩余量：￥"+t._s(e.SurplusAmount))])]):t._e(),t._v(" "),a("div",{staticClass:"bom"},[e.JinDu?a("div",{staticClass:"JinDu"},[a("div",{staticClass:"JinDuZi",style:{width:e.JinDu+"%",background:100==e.JinDu?"#67C23A":""}})]):t._e(),t._v(" "),e.JinDu?a("div",{staticClass:"Number"},[t._v(t._s(e.JinDu+"%"))]):t._e()])]):t._e(),t._v(" "),e.day?t._e():a("div",{staticClass:"date2",attrs:{slot:"reference"},slot:"reference"})],1)],1)}),0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"week"},[a("div",[t._v("星期一")]),t._v(" "),a("div",[t._v("星期二")]),t._v(" "),a("div",[t._v("星期三")]),t._v(" "),a("div",[t._v("星期四")]),t._v(" "),a("div",[t._v("星期五")]),t._v(" "),a("div",[t._v("星期六")]),t._v(" "),a("div",[t._v("星期日")])])}]};var c=a("VU/8")(i,r,!1,function(t){a("Zh4o")},"data-v-5d5fc075",null);e.default=c.exports}});