webpackJsonp([56],{qsrQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),o={name:"GetPermis",data:function(){return{retrieval:{productCode:"",barcodeMemo:"",man:"",desc:"",proType:"",state:"",begin:"",end:"",pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:""},TypeList:[{label:"全部",value:""},{label:"整机销售",value:"整机销售"},{label:"零配件销售",value:"零配件销售"},{label:"保养大包",value:"保养大包"}],States:[{label:"全部",value:""},{label:"未开始",value:"未开始"},{label:"进行中",value:"进行中"},{label:"已结束",value:"已结束"}],TableData:[],total:0}},created:function(){this.start()},computed:{retrievalJT:function(){return r()(this.retrieval)}},watch:{retrievalJT:function(e,t){this.WatchFenYe(e,t)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{start:function(){var e=this;this.API_GET("Product/GetProductPromotions",this.retrieval).then(function(t){e.TableData=t.Dtos;for(var a=0;a<e.TableData.length;a++){var l=e.TableData[a];l.CreateDate=e.formatDate(l.CreateDate),l.Begin=e.formatDate(l.Begin),l.End=e.formatDate(l.End),l.CommissionRatio=100*l.CommissionRatio+"%"}e.total=t.DataBars})},func:function(e,t){this.retrieval.numPerPage=e,this.retrieval.pageNum=t,this.start()},querySearch:function(e,t){var a=JSON.parse(r()(this.$store.state.Vuex.Brand));if(console.log(a),!e)return e="",t(a),!1;for(var l=e,o=a,i=[],s=0;s<o.length;s++){var n=o[s];-1!=n.value.indexOf(l)&&i.push(n)}t(i)},DelProductPromotion:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.API_POST("Product/DelProductPromotion",{ID:e.ID}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.start()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:e.start}}),e._v(" "),a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[e._v("\n            "+e._s(e.$route.meta.title)+"\n        ")]),e._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[e._v("产品编码")]),e._v(" "),a("el-input",{attrs:{placeholder:"产品编码",size:"mini"},model:{value:e.retrieval.productCode,callback:function(t){e.$set(e.retrieval,"productCode",t)},expression:"retrieval.productCode"}})],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("内部编码")]),e._v(" "),a("el-input",{attrs:{placeholder:"内部编码",size:"mini"},model:{value:e.retrieval.barcodeMemo,callback:function(t){e.$set(e.retrieval,"barcodeMemo",t)},expression:"retrieval.barcodeMemo"}})],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("品牌")]),e._v(" "),a("el-autocomplete",{staticClass:"inline-input",attrs:{id:"autocomplete",size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":e.querySearch,placeholder:"品牌",clearable:""},model:{value:e.retrieval.man,callback:function(t){e.$set(e.retrieval,"man",t)},expression:"retrieval.man"}})],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("描述")]),e._v(" "),a("el-input",{attrs:{placeholder:"描述",size:"mini"},model:{value:e.retrieval.desc,callback:function(t){e.$set(e.retrieval,"desc",t)},expression:"retrieval.desc"}})],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("状态")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择状态",size:"mini"},model:{value:e.retrieval.state,callback:function(t){e.$set(e.retrieval,"state",t)},expression:"retrieval.state"}},e._l(e.States,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"department"},[a("span",[e._v("类型")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择类型",size:"mini"},model:{value:e.retrieval.proType,callback:function(t){e.$set(e.retrieval,"proType",t)},expression:"retrieval.proType"}},e._l(e.TypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("router-link",{attrs:{to:"ProductPromotion_create"}},[a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"success"}},[e._v(" 创建")])],1)],1),e._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TableData,"header-cell-style":e.$store.state.headerCellStyle,"cell-style":e.$store.state.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"创建人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PromotionType",label:"促销类别",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Begin",label:"开始时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"End",label:"结束时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"State",label:"状态",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CommissionRatio",label:"提成比例",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Characteristics",label:"产品描述","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"ProductCode",label:"产品编号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"BarcodeMemo",label:"内部编码",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Bround",label:"品牌",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["进行中"!=t.row.State?a("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(a){return e.DelProductPromotion(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:e.total},on:{func:e.func}})],1)},staticRenderFns:[]};var s=a("VU/8")(o,i,!1,function(e){a("rGYv")},"data-v-b146bd84",null);t.default=s.exports},rGYv:function(e,t){}});