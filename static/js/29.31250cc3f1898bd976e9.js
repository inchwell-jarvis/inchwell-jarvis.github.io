webpackJsonp([29],{"0UYV":function(t,e){},"3TrU":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("d7EF"),i=a.n(n),s=a("mvHQ"),o=a.n(s),r=a("Xu46"),l=a("PXCl").Base64,u={name:"",data:function(){return{CusFullName:"",RebateData:[],RebateState:!1,form:{SourceType:"大包保养",region:"",num:0,textarea:""},GetWorkDailiys:[],WhetherToRenew:!1,MaintainRHF:!1,reverse:!0,drawer:!1,col:[{label:"序号",prop:"Pos",width:"80",sortable:!0},{label:"设备编码",prop:"ProductCode",width:"150",sortable:!0},{label:"品牌",prop:"Brand",width:"150",sortable:!0},{label:"描述",prop:"Desc",width:"",widths:!0,sortable:!0},{label:"保养单价",prop:"MaintainPrice",width:"100",sortable:!1},{label:"序列号",prop:"SN",width:"150",sortable:!0}],dropCol:[{label:"序号",prop:"Pos",width:"80",sortable:!0},{label:"设备编码",prop:"ProductCode",width:"150",sortable:!0},{label:"品牌",prop:"Brand",width:"150",sortable:!0},{label:"描述",prop:"Desc",width:"",widths:!0,sortable:!0},{label:"保养单价",prop:"MaintainPrice",width:"100",sortable:!1},{label:"序列号",prop:"SN",width:"150",sortable:!0}],CustomerType:"2",seriaNumber:[{name:"全部",value:"1"},{name:"有序列号",value:"2"},{name:"无序列号",value:"3"}],Data:[],EquDtos:[],EquDtos1:[],search:"",Datatable:[],pageNum:1,pagesize:10,total:0,productCode:"",barcodeMemo:"",man:"",desc:"",memo:"",options:[],titlebatch:"",Type:"",BelongToCustomer:!0,searchs:"",CTTAMCAS:0,loading:!1,StateStr:"",MCCollectionss:"",GetMCPlistData:[],GetMCPlistDataList:0,EquDtosList:[],EquDtos1List:[],MCOrderDtos:[],Time1:"",PreferentialAmountSD:0,MyEquipmentDatabaseState:0,code2:"",FinancialConfirmed:0,FinancialUnconfirmed:0,DataList:[],ContractWithOptionOfRenewal:!1,CapitalPoolDtos:[],Subscription:0,SaxoDrawer:!1,StartExecution:!1,execution_date:"",execution_other:"",StartExecution2:!1,execution_date2:"",DelState:!1}},filters:{TimeCode:function(t){return null==t||void 0==t||""==t?" - - ":t.split("T")[0]}},created:function(){this.CTTAMCAS=0},mounted:function(){this.start(),this.GetRebateData(),console.log(this.formatDateRange(["2023-08-15","2023-09-14"])),console.log(this.formatDateRange("2023年08月15日-2023年09月14日"))},computed:{newCapitalPoolDtos:function(){return JSON.parse(o()(this.CapitalPoolDtos))}},watch:{newCapitalPoolDtos:function(t){var e=this;this.Subscription=0,t.forEach(function(t){t.Number>0&&(e.Subscription+=Number(t.Number))})}},beforeDestroy:function(){document.onkeydown=""},methods:{submitAmendment:function(){var t=this;this.API_POST("Maintain/ApplyUpdateIMDt",{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,Str:this.formatDateRange(this.execution_date2)}).then(function(e){t.$message.success("已提交修改"),t.StartExecution2=!1,t.start()})},formatDateRange:function(t){if("string"==typeof t){var e=t.split("-"),a=i()(e,2),n=a[0],s=a[1],o=n.match(/\d+/g),r=s.match(/\d+/g);if(3!==o.length||3!==r.length)return null;var l=new Date(o[0],o[1]-1,o[2]),u=new Date(r[0],r[1]-1,r[2]);return[this.formatDate(l),this.formatDate(u)]}if(Array.isArray(t)){var c=t.map(function(t){var e=t.split("-"),a=i()(e,3),n=a[0],s=a[1],o=a[2];return n+"年"+s.padStart(2,"0")+"月"+o.padStart(2,"0")+"日"});return c[0]+"-"+c[1]}return null},formatDate:function(t){return t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")},ImplementMaintainDt:function(){var t=this;if(""==this.execution_date)return this.$message.error("请选择执行日期"),!1;this.API_POST("Maintain/ImplementMaintainDt",{id:this.$store.state.Vuex.MaintenanceContractDetailsID,Str:this.execution_date,Other:this.execution_other}).then(function(e){t.$message.success("操作成功！"),t.start(),t.StartExecution=!1})},DeleteInvoices:function(t){var e=this;this.API_POST("Finance/DelInvoice",{ID:t.ID}).then(function(t){e.$message.success("删除成功！"),e.start()})},OperationInvoice:function(t){var e=this;this.$prompt("请输入内容","操作发票",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var n=a.value;e.API_POST("Finance/ApplyHandleInvoice",{ID:t.ID,Str:n}).then(function(t){e.$message.success("操作成功"),e.start()})}).catch(function(){e.$message("取消操作发票")})},ResetMC:function(){var t=this;this.API_POST("Maintain/ResetMC",{Id:this.$store.state.Vuex.MaintenanceContractDetailsID}).then(function(e){t.$message({message:"恢复成功！",type:"success"}),t.start()})},AddMCASInvoice:function(){this.$router.push({path:"/BYbilling",query:{API:"Maintain/AddMCASInvoice",Id:this.$store.state.Vuex.MaintenanceContractDetailsID,CusId:this.Data.MCBaseInfo.CusId}})},GetRebateData:function(){var t=this,e={pageNum:1,numPerPage:9999,orderField:"",orderDirection:"",fullname:"",begin:"",end:"",sourceType:"",type:"-1",state:"-1",sourecId:this.$store.state.Vuex.MaintenanceContractDetailsID};this.API_GET("Finance/GetRebates",e).then(function(e){t.RebateData=e.Dtos;for(var a=0;a<t.RebateData.length;a++){var n=t.RebateData[a];n.CreateDate=n.CreateDate.split("T")[0],1==n.Type&&(n.Type="现金"),2==n.Type&&(n.Type="购物卡"),3==n.Type&&(n.Type="其他")}})},onSubmit:function(){var t=this;if(""==this.form.SourceType)return this.$message.warning("请选择来源业务！"),!1;if(""==this.form.region)return this.$message.warning("请选择类型！"),!1;var e={SourceId:this.$store.state.Vuex.MaintenanceContractDetailsID,Type:this.form.region,SourceType:this.form.SourceType,Amount:this.form.num,Memo:this.form.textarea};this.API_POST("Finance/AddRebate",e).then(function(e){t.RebateState=!1,t.$message.success("创建成功！"),t.GetRebateData()})},IveChosen:function(){var t=this;if(0==this.$refs.SelectedContracts.selection.length)return this.$message.warning("请至少选择一份合同！"),!1;for(var e=[],a=0;a<this.$refs.SelectedContracts.selection.length;a++){var n=this.$refs.SelectedContracts.selection[a];e.push(n.Id)}var i={MCId:this.$store.state.Vuex.MaintenanceContractDetailsID,BeRenewedIds:e};this.API_POST("Maintain/MCBeRenewed",i).then(function(e){t.ContractWithOptionOfRenewal=!1,t.start(),t.$message.success("请继续操作！")})},confirmOldContracts:function(){var t=this;this.$confirm("当前合同为续签合同还是新建合同？","提示",{confirmButtonText:"新建合同",cancelButtonText:"续签合同",type:"warning"}).then(function(){t.Receivables(4,"收款")}).catch(function(){var e={url:t.$store.state.http+"Maintain/GetMCs",api:"get",data:{pageNum:1,numPerPage:99999,orderField:"",orderDirection:"",search:"",state:"-1",cusFullName:t.Data.MCBaseInfo.CusFullName,area:"",cusType:"",begin:"",end:""}};t.$https(e).then(function(e){t.DataList=e.Data.Dtos;for(var a=0;a<t.DataList.length;a++){t.DataList[a].Id==t.$store.state.Vuex.MaintenanceContractDetailsID&&t.DataList.splice(a,1)}for(var n=0;n<t.DataList.length;n++){var i=t.DataList[n];i.CreateDate=i.CreateDate.split("T")[0],i.AcceptDate=null==i.AcceptDate?" - - ":i.AcceptDate.split("T")[0],i.PayDate=null==i.PayDate?" - - ":i.PayDate.split("T")[0]}t.ContractWithOptionOfRenewal=!0})})},querySearch:function(t,e){if(void 0==t)return t="",e(this.options),!1;if(""==t)return e(this.options),!1;for(var a=t,n=this.options,i=[],s=(a.split("")[0],0);s<n.length;s++){var o=n[s];-1!=o.value.indexOf(a)&&i.push(o)}e(i)},handleSelect:function(t){this.initss()},GetCusCapitalPool:function(){var t=this;this.CapitalPoolDtos=[],this.SaxoDrawer=!0;var e={api:"get",url:this.$store.state.http+"CRM/GetCusCapitalPool",data:{cusId:this.Data.MCBaseInfo.CusId,onlyPart:!0,includebboc:!0,includebuming:!0}};this.$https(e).then(function(e){var a=e.Data,n=a.BBOCDtos,i=a.CapitalPoolDtos;null!=n&&e.Data.BBOCDtos.forEach(function(e){e.LB="挂帐款",e.CreateDate=e.CreateDate.split("T")[0],t.$set(e,"Number",""),""!=e.SystemInfo&&null!=e.SystemInfo?e.SystemInfo2=e.SystemInfo.split("@"):element.SystemInfo2=[],t.CapitalPoolDtos.push(e)}),null!=i&&i.forEach(function(e){e.LB=e.Type,e.CreateDate=e.CreateDate.split("T")[0],t.$set(e,"Number",""),""!=e.SystemInfo&&null!=e.SystemInfo?e.SystemInfo2=e.SystemInfo.split("@"):element.SystemInfo2=[],t.CapitalPoolDtos.push(e)})})},AddMSOPaymentFun:function(){for(var t=this,e=[],a=0;a<this.CapitalPoolDtos.length;a++){var n=this.CapitalPoolDtos[a];isNaN(parseFloat(n.Number))||e.push({SourceId:n.ID,UsageAmount:Number(n.Number),From:"资金池"==n.LB||"不明款"==n.LB?1:2})}if(0==e.length)return this.$message.error("请输入使用量"),!1;var i={api:"post",url:this.$store.state.http+"Maintain/MCCollections",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,PayAmount:this.Subscription,UsageFeeDtos:e}};this.$https(i).then(function(e){t.SaxoDrawer=!1,t.$message({showClose:!0,message:"认款成功!",type:"success"}),t.start()})},MCCollections:function(){var t=this;if(""==this.MCCollectionss||0==this.MCCollectionss)return this.$message.warning('请输入收款金额！（不可为 "0" ）'),!1;if(Number(this.MCCollectionss)+Number(this.GetMCPlistDataList)>this.PreferentialAmountSD)return this.$message.warning("收款超出应收金额！剩余待收款"+(this.PreferentialAmountSD-Number(this.GetMCPlistDataList))+"元"),!1;var e={api:"post",url:this.$store.state.http+"maintain/MCCollections",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,Str:this.MCCollectionss}};this.$https(e).then(function(e){t.GetMCPlist(),t.$message.success("已发起认款！")})},GetMCPlist:function(){var t=this,e={api:"GET",url:this.$store.state.http+"maintain/GetMCPlist",data:{id:this.$store.state.Vuex.MaintenanceContractDetailsID}};this.$https(e).then(function(e){t.GetMCPlistData=e.Data,t.GetMCPlistDataList=0;for(var a=0;a<t.GetMCPlistData.length;a++){var n=t.GetMCPlistData[a];t.GetMCPlistDataList+=n.Amount,2==n.State?t.FinancialConfirmed+=n.Amount:t.FinancialUnconfirmed+=n.Amount,""!=n.SystemInfo&&null!=n.SystemInfo?n.SystemInfo2=n.SystemInfo.split("@"):n.SystemInfo2=[]}})},SkipTheMaintenanceTask:function(){var t=this,e={MCId:this.$store.state.Vuex.MaintenanceContractDetailsID,State:5};this.API_POST("Maintain/UpdateMCState",e).then(function(e){t.$message.success("已跳过保养任务！"),t.$router.push({path:"/MaintenanceManagement"})})},Receivables:function(t,e){var a=this;if(this.CTTAMCAS=0,this.loading)return!1;this.loading=!0;var n={api:"post",url:this.$store.state.http+"maintain/UpdateMCState",data:{MCId:this.$store.state.Vuex.MaintenanceContractDetailsID,State:t}};this.$https(n).then(function(t){a.$message.success(e+"成功！"),a.start(),a.loading=!1})},saveMCAS:function(t,e){var a=this;if(this.loading)return!1;this.loading=!0;var n={url:this.$store.state.http+"Maintain/SaveMC",api:"post",data:{MCBaseInfo:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,MaintainCode:this.Data.MCBaseInfo.MaintainCode,Memo:this.Data.MCBaseInfo.Memo,LinkMan:this.Data.MCBaseInfo.LinkMan,LinkManEngilsh:this.Data.MCBaseInfo.LinkManEngilsh,Mobile:this.Data.MCBaseInfo.Mobile},MCEquInfo:{YearLife:this.Data.MCEquInfo.YearLife,MaintainCount:this.Data.MCEquInfo.MaintainCount,AmountTotal:this.Data.MCEquInfo.AmountTotal,PreferentialAmount:this.Data.MCEquInfo.PreferentialAmount,PreferentialRatio:this.Data.MCEquInfo.PreferentialRatio,IsShowDiscount:this.Data.MCEquInfo.IsShowDiscount,TravelExpenses:this.Data.MCEquInfo.TravelExpenses,TraveTime:this.Data.MCEquInfo.TraveTime},ASEquInfo:{ASAmountTotal:this.Data.ASEquInfo.ASAmountTotal,ASPreferentialAmount:this.Data.ASEquInfo.ASPreferentialAmount,ASPreferentialRatio:this.Data.ASEquInfo.ASPreferentialRatio,YearOfEstablishment:this.Data.ASEquInfo.YearOfEstablishment,TotalNumberOfLifts:this.Data.ASEquInfo.TotalNumberOfLifts,QNHF:this.Data.ASEquInfo.QNHF,TotalNumberOfAirCompressor:this.Data.ASEquInfo.TotalNumberOfAirCompressor,TotalNumberOfSprayBooth:this.Data.ASEquInfo.TotalNumberOfSprayBooth}}};this.$https(n).then(function(n){if(a.CTTAMCAS=0,2==t||3==t||6==t||5==t){var i={api:"post",url:a.$store.state.http+"maintain/UpdateMCState",data:{MCId:a.$store.state.Vuex.MaintenanceContractDetailsID,State:t}};a.$https(i).then(function(t){a.$message.success(e+"成功！"),a.start(),a.loading=!1})}else a.$message.success("保存成功！"),a.start(),a.loading=!1})},saveMCASNO:function(t,e){var a={url:this.$store.state.http+"Maintain/SaveMC",api:"post",data:{MCBaseInfo:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,MaintainCode:this.Data.MCBaseInfo.MaintainCode,Memo:this.Data.MCBaseInfo.Memo,LinkMan:this.Data.MCBaseInfo.LinkMan,LinkManEngilsh:this.Data.MCBaseInfo.LinkManEngilsh,Mobile:this.Data.MCBaseInfo.Mobile},MCEquInfo:{YearLife:this.Data.MCEquInfo.YearLife,MaintainCount:this.Data.MCEquInfo.MaintainCount,AmountTotal:this.Data.MCEquInfo.AmountTotal,PreferentialAmount:this.Data.MCEquInfo.PreferentialAmount,PreferentialRatio:this.Data.MCEquInfo.PreferentialRatio,IsShowDiscount:this.Data.MCEquInfo.IsShowDiscount,TravelExpenses:this.Data.MCEquInfo.TravelExpenses,TraveTime:this.Data.MCEquInfo.TraveTime},ASEquInfo:{ASAmountTotal:this.Data.ASEquInfo.ASAmountTotal,ASPreferentialAmount:this.Data.ASEquInfo.ASPreferentialAmount,ASPreferentialRatio:this.Data.ASEquInfo.ASPreferentialRatio,YearOfEstablishment:this.Data.ASEquInfo.YearOfEstablishment,TotalNumberOfLifts:this.Data.ASEquInfo.TotalNumberOfLifts,QNHF:this.Data.ASEquInfo.QNHF,TotalNumberOfAirCompressor:this.Data.ASEquInfo.TotalNumberOfAirCompressor,TotalNumberOfSprayBooth:this.Data.ASEquInfo.TotalNumberOfSprayBooth}}};this.$https(a).then(function(t){})},ChangeASPreferentialAmount:function(){var t=this.Data.MCEquInfo.MaintainCount,e=this.Data.ASEquInfo.YearOfEstablishment,a=this.Data.ASEquInfo.TotalNumberOfLifts,n=this.Data.ASEquInfo.TotalNumberOfAirCompressor,i=this.Data.ASEquInfo.TotalNumberOfSprayBooth;if(""==e||""==a||""==n||""==i)this.$message.warning("补全AS信息！");else{var s="宝马"==this.Data.MCBaseInfo.CusType?31400:"保时捷"==this.Data.MCBaseInfo.CusType?1e5:0,o=.05*(9-((new Date).getFullYear()-this.Data.ASEquInfo.YearOfEstablishment));o<0&&(o=0),o>.3&&(o=.3);var r=.0125*(this.Data.ASEquInfo.TotalNumberOfLifts-10);r<0&&(r=0),r>.2&&(r=.2);var l=35*(1-r-o);this.Data.ASEquInfo.ASAmountTotal=(35*a*300+i*s+2e4*n)*t,this.Data.ASEquInfo.ASPreferentialAmount=((a*l*300+i*s+2e4*n)*t).toFixed(2)}},CTTAMC:function(){for(var t=0,e=this.Data.MCEquInfo.EquDtos,a=0;a<e.length;a++){var n=e[a];t+=n.Number*n.MaintainPrice*n.MaintainCount}var i=this.Data.MCEquInfo.PreferentialRatio;this.Data.MCEquInfo.AmountTotal=t+this.Data.MCEquInfo.TravelExpenses*this.Data.MCEquInfo.TraveTime,1==this.CTTAMCAS&&(this.Data.MCEquInfo.PreferentialAmount=(t*(.01*(100-i))).toFixed(2))},EditMCTN:function(t){var e=this;if(0==this.Data.MCEquInfo.TraveTime&&"Del"==t)return!1;var a={url:this.$store.state.http+"Maintain/EditMCTN",api:"post",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,Type:t,Str:this.Data.MCEquInfo.TravelExpenses}};this.$https(a).then(function(t){e.start()})},EditMCN:function(t){var e=this;if(0==this.Data.MCEquInfo.MaintainCount&&"Del"==t)return this.$message.warning("已达到最低保养次数！"),!1;var a={url:this.$store.state.http+"Maintain/EditMCN",api:"post",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,Type:t}};this.$https(a).then(function(t){e.start()})},EditMCEquMN:function(t,e){var a=this;if(0==t.MaintainCount&&"Del"==e)return this.$message.warning("已达到最低保养次数！"),!1;var n={url:this.$store.state.http+"Maintain/EditMCEquMN",api:"post",data:{Id:t.MCEquId,Type:e}};this.$https(n).then(function(t){a.start()})},EditMCEqu:function(t,e,a){var n=this;if(1==t.Number_s&&"Del"==e)return this.delescoped(t,a),!1;var i={url:this.$store.state.http+"Maintain/EditMCEqu",api:"post",data:{Id:t.MCEquId,Type:e}};this.$https(i).then(function(t){n.start()})},delescoped:function(t,e){var a=this;if(a.DelState)return this.$message.warning("正在执行上一条！"),!1;a.DelState=!0;var n={url:a.$store.state.http+"Maintain/DelEquToMC",api:"post",data:{Id:t.MCEquId}};a.$https(n).then(function(n){var i=[];i="MC"==e?a.$refs.MC.tableData:a.$refs.AS.tableData,console.log(i),i.forEach(function(e,a){e.MCEquId==t.MCEquId&&i.splice(a,1)});var s=[];i.forEach(function(t,e){s[e]={MaintainEquId:t.MCEquId,Desc:t.Desc,Pos:t.Pos,Sort:e+1}});var o={url:a.$store.state.http+"Maintain/AfreshEquSort",api:"post",data:{MaintainId:a.$store.state.Vuex.MaintenanceContractDetailsID,Dtos:s}};a.$https(o).then(function(t){setTimeout(function(){a.DelState=!1,a.start()},500)})})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},MyEquipmentDatabase:function(t,e){this.pageNum=1,this.pagesize=10,this.code2=e,this.initsss(),this.Manufacturer(),this.titlebatch="我的设备资料库",this.drawer=!0,this.Type=e,this.BelongToCustomer=t},EquipmentDatabase:function(t,e){this.pageNum=1,this.pagesize=10,this.code2=e,this.initss(),this.Manufacturer(),this.titlebatch="设备资料库",this.drawer=!0,this.Type=e,this.BelongToCustomer=t},start:function(){var t=this,e={url:this.$store.state.http+"Maintain/GetMC",api:"get",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID}};this.$https(e).then(function(e){t.Data=e.Data,t.CusFullName=t.Data.MCBaseInfo.CusFullName,t.Data.MCInvoiceDtosNumber=0;for(var a=0;a<t.Data.MCInvoiceDtos.length;a++)"发票已作废"!=t.Data.MCInvoiceDtos[a].InvoiceStateStr&&(t.Data.MCInvoiceDtosNumber+=t.Data.MCInvoiceDtos[a].Amount);t.GetWorkDailiy(),t.EquDtos1=t.mergeArr(e.Data.MCEquInfo.EquDtos),t.EquDtos=t.mergeArr(e.Data.ASEquInfo.EquDtos),console.log(JSON.parse(o()(t.EquDtos))),t.MCOrderDtos=e.Data.MCOrderDtos,t.EquDtos1List=t.mergeArr(e.Data.MCEquInfo.EquDtos),t.EquDtosList=t.mergeArr(e.Data.ASEquInfo.EquDtos),t.StateStr=t.Data.MCBaseInfo.State,"服务公司AS"==e.Data.MCBaseInfo.ContractType||"技术公司AS"==e.Data.MCBaseInfo.ContractType?t.PreferentialAmountSD=e.Data.ASEquInfo.ASPreferentialAmount+e.Data.MCEquInfo.TravelExpenses*e.Data.MCEquInfo.TraveTime:t.PreferentialAmountSD=e.Data.MCEquInfo.PreferentialAmount+e.Data.MCEquInfo.TravelExpenses*e.Data.MCEquInfo.TraveTime;var n=t;t.CTTAMC(),setTimeout(function(){n.rowDrop()},500),setTimeout(function(){n.rowDrops()},500),t.GetMCPlist(),t.CTTAMCAS=1})},mergeArr:function(t){var e=[];return t.forEach(function(t){if(t.Number_s=1,t.BelongToCustomer)return e.push(t),!0;if(0==e.length)return e.push(t),!0;var a=!0;e.forEach(function(e){if(e.ProductId==t.ProductId&&0==e.BelongToCustomer)return e.Number_s+=1,a=!1,!1}),a&&e.push(t)}),e},rowDrop:function(){var t=document.querySelector("#LEtetabe .el-table__body-wrapper tbody"),e=this;r.a.create(t,{onEnd:function(t){var a=t.newIndex,n=t.oldIndex;if(a==n)return!1;var i=e.EquDtos1List,s=i[n];i.splice(n,1),i.splice(a,0,s);for(var o=[],r=0;r<i.length;r++){var l=i[r];o[r]={MaintainEquId:l.MCEquId,Sort:r+1}}var u={url:e.$store.state.http+"Maintain/AfreshEquSort",api:"post",data:{MaintainId:e.$store.state.Vuex.MaintenanceContractDetailsID,Dtos:o}};e.$https(u).then(function(t){e.EquDtos1=[],e.start()})}})},rowDrops:function(){var t=document.querySelector("#LEtetabes .el-table__body-wrapper tbody"),e=this;r.a.create(t,{onEnd:function(t){var a=t.newIndex,n=t.oldIndex;if(a==n)return!1;var i=e.EquDtosList,s=i[n];i.splice(n,1),i.splice(a,0,s);for(var o=[],r=0;r<i.length;r++){var l=i[r];o[r]={MaintainEquId:l.MCEquId,Sort:r+1}}var u={url:e.$store.state.http+"Maintain/AfreshEquSort",api:"post",data:{MaintainId:e.$store.state.Vuex.MaintenanceContractDetailsID,Dtos:o}};e.$https(u).then(function(t){e.EquDtos=[],e.start()})}})},Manufacturer:function(){var t=this,e={url:this.$store.state.http+"System/GetBrand",api:"get"};this.$https(e).then(function(e){t.options=e.Data;for(var a=0;a<t.options.length;a++)t.options[a].value=t.options[a].Value})},initss:function(){var t=this,e={api:"get",url:this.$store.state.http+"Product/GetProducts2",data:{pageNum:this.pageNum,numPerPage:this.pagesize,orderField:"",orderDirection:"",kitflag:!1,protype:2,productCode:this.productCode,barcodeMemo:this.barcodeMemo,man:this.man,desc:this.desc,memo:this.memo,otherType:this.code2}};this.$https(e).then(function(e){t.total=e.Data.DataBars,t.Datatable=e.Data.Dtos;for(var a=0;a<t.Datatable.length;a++)t.Datatable[a].UpdateDate=t.Datatable[a].UpdateDate.split("T")[0],t.$set(t.Datatable[a],"Numberindex1",1)})},initsss:function(){var t=this,e={api:"get",url:this.$store.state.http+"CRM/GetCustomerEqus",data:{pageNum:this.pageNum,numPerPage:this.pagesize,orderField:"",orderDirection:"",search:this.searchs,cusId:this.Data.MCBaseInfo.CusId||this.$store.state.CusId,onlyhavesn:this.CustomerType,otherType:this.code2,sourceId:this.$store.state.Vuex.MaintenanceContractDetailsID}};this.$https(e).then(function(e){t.total=e.Data.DataBars,t.Datatable=e.Data.Dtos;for(var a=0;a<t.Datatable.length;a++)t.Datatable[a].Characteristics=t.Datatable[a].Desc,t.Datatable[a].UpdateDate=t.Datatable[a].BeganRunDate.split("T")[0],t.Datatable[a].Unit="无",t.Datatable[a].ProductCode=t.Datatable[a].ProdcutCode,t.Datatable[a].Manufacturer=t.Datatable[a].Brand,t.Datatable[a].BarcodeMemo=" - ",t.$set(t.Datatable[a],"Numberindex1",1)})},GetWorkDailiy:function(){var t=this,e={api:"get",url:this.$store.state.http+"PCenter/GetWorkDailiys",data:{pageNum:1,numPerPage:10,orderField:"",orderDirection:"",fullname:this.Data.MCBaseInfo.CusFullName,enginner:"",begin:"",end:"",area:"",type:"保养"}};this.$https(e).then(function(e){t.GetWorkDailiys=e.Data.WorkDailyDtos,t.GetWorkDailiys.forEach(function(t){t.CreateDate=t.CreateDate.split("T")[0],t.ServiceDate=t.ServiceDate.split("T")[0]})})},addscheck:function(){for(var t=this,e=[],a=this.$refs.multipleTable.selection,n=0;n<a.length;n++){var i=a[n];e.push({BelongToCustomer:this.BelongToCustomer,EquId:i.ID||i.Id,Type:this.Type,Number:i.Numberindex1})}var s={api:"post",url:this.$store.state.http+"Maintain/AddEquToMC",data:{MCId:this.$store.state.Vuex.MaintenanceContractDetailsID,EquToMCDtos:e}};this.$https(s).then(function(e){t.drawer=!1,t.start()})},adds:function(t){var e=this,a={api:"post",url:this.$store.state.http+"Maintain/AddEquToMC",data:{MCId:this.$store.state.Vuex.MaintenanceContractDetailsID,EquToMCDtos:[{BelongToCustomer:this.BelongToCustomer,EquId:t.ID||t.Id,Type:this.Type,Number:t.Numberindex1}]}};this.$https(a).then(function(t){e.drawer=!1,e.start()})},func:function(t,e){this.pagesize=t,this.pageNum=e,0==this.BelongToCustomer?this.initss():this.initsss(this.code2)},Numberindexadddel:function(t,e){},AddMCOrderDtos:function(){var t=this;if(""==this.Time1||null==this.Time1||void 0==this.Time1)return this.$message.warning("请选择日期！"),!1;var e={url:this.$store.state.http+"Maintain/CreateMCOrder",api:"post",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID,Str:this.Time1}};this.$https(e).then(function(e){t.start()})},httpTXFWQBYHT:function(t){var e={ID:l.encodeURI(this.$store.state.Vuex.MaintenanceContractDetailsID),token:l.encodeURI(localStorage.getItem("token"))};e.url="MC"==t||"AS"==t?l.encodeURI(this.$store.state.http+"Maintain/GetMaintainContract"):"ASs"==t?l.encodeURI(this.$store.state.http+"Maintain/GetMCYu"):l.encodeURI(this.$store.state.http+"Maintain/GetMCAppendix"),this.jump("/AS&MC/"+t+".html",e)},sortchange:function(t){var e=this;if(1==t)var a=e.$refs.MC.tableData;else a=e.$refs.AS.tableData;for(var n=[],i=0;i<a.length;i++){var s=a[i];n[i]={MaintainEquId:s.MCEquId,Desc:s.Desc,Pos:s.Pos,Sort:i+1}}var o={url:e.$store.state.http+"Maintain/AfreshEquSort",api:"post",data:{MaintainId:e.$store.state.Vuex.MaintenanceContractDetailsID,Dtos:n}};e.$https(o).then(function(t){e.EquDtos1=[],setTimeout(function(){e.start()},500)})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SaxoPage",{scopedSlots:t._u([{key:"title",fn:function(){return[-1!=[0,1,2].indexOf(t.StateStr)?a("el-button",{attrs:{size:"mini",type:"danger",loading:t.$store.state.Vuex.loading},on:{click:function(e){return t.saveMCAS(6,"撤单")}}},[t._v("撤单")]):t._e(),t._v(" "),-1!=[0,1,2].indexOf(t.StateStr)?a("el-button",{attrs:{size:"mini",type:"primary",loading:t.$store.state.Vuex.loading},on:{click:function(e){return t.saveMCAS()}}},[t._v("保存")]):t._e(),t._v(" "),-1!=[0,1,2].indexOf(t.StateStr)?a("el-button",{attrs:{size:"mini",type:"warning",loading:t.$store.state.Vuex.loading},on:{click:function(e){return t.saveMCAS(2,"向客户报价")}}},[t._v("向客户报价")]):t._e(),t._v(" "),2==t.StateStr?a("el-button",{attrs:{size:"mini",type:"danger",loading:t.$store.state.Vuex.loading},on:{click:function(e){return t.saveMCAS(3,"替客户确认报价")}}},[t._v("替客户确认报价")]):t._e()]},proxy:!0},{key:"content",fn:function(){return[a("router-view",{on:{refresh:t.start}}),t._v(" "),a("SaxoDrawer",{attrs:{show:t.SaxoDrawer,title:t.CusFullName+"(挂账款 & 不明款 & 资金池)"},on:{ShowFalse:function(e){t.SaxoDrawer=!1}}},[a("div",{staticClass:"DeawerBox"},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.CapitalPoolDtos,height:"100%"}},[a("el-table-column",{attrs:{label:"类别",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["挂帐款"==e.row.LB?a("span",[t._v(" "+t._s(e.row.LB+"("+e.row.InvoiceStateStr+")"))]):t._e(),t._v(" "),"挂帐款"!=e.row.LB?a("span",[t._v(" "+t._s(e.row.LB))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"资金量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.Amount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.UsageAmount,t.FinancialAmountSymbol(e.row.BuyingCurrency))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"创建人",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"系统信息","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top-start",title:"系统信息",trigger:"hover"}},[t._l(e.row.SystemInfo2,function(e,n){return a("p",{key:n},[t._v(t._s(e))])}),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("系统信息"),a("i",{staticClass:"el-icon-warning-outline"})])],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Memo",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{label:"使用量",fixed:"right",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",type:"number",placeholder:"请输入使用量"},model:{value:e.row.Number,callback:function(a){t.$set(e.row,"Number",a)},expression:"scope.row.Number"}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"but"},[a("div",[t._v("认款合计：￥"),a("span",[t._v(" "+t._s(t.Subscription))])]),t._v(" "),a("saxo-button",{staticClass:"butState",attrs:{mini:"",type:"primary"},on:{click:t.AddMSOPaymentFun}},[t._v("确认")])],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"开始执行",visible:t.StartExecution,width:"30%","append-to-body":!0},on:{"update:visible":function(e){t.StartExecution=e}}},[a("div",{staticStyle:{width:"100%",height:"50px"}},[a("span",{staticStyle:{width:"70px",display:"block",float:"left"}},[t._v("选择日期")]),t._v(" "),a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"date",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd"},model:{value:t.execution_date,callback:function(e){t.execution_date=e},expression:"execution_date"}})],1),t._v(" "),a("div",{staticStyle:{width:"100%",height:"100px"}},[a("span",{staticStyle:{width:"70px",display:"block",float:"left"}},[t._v("备注")]),t._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"30","show-word-limit":"",autosize:{minRows:4,maxRows:4}},model:{value:t.execution_other,callback:function(e){t.execution_other=e},expression:"execution_other"}})],1),t._v(" "),a("el-alert",{attrs:{title:"请谨慎选择日期，确认执行日期后会由系统立即给客服部发送执行邮件，无法撤回",type:"error",closable:!1}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("saxo-button",{attrs:{mini:"",type:"init"},on:{click:function(e){t.StartExecution=!1}}},[t._v("取消")]),t._v(" "),a("saxo-button",{attrs:{mini:"",type:"success"},on:{click:t.ImplementMaintainDt}},[t._v("开始执行")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改执行日期",visible:t.StartExecution2,width:"30%","append-to-body":!0},on:{"update:visible":function(e){t.StartExecution2=e}}},[a("div",{staticStyle:{width:"100%",height:"50px"}},[a("span",{staticStyle:{width:"70px",display:"block",float:"left"}},[t._v("选择日期")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"mini"},model:{value:t.execution_date2,callback:function(e){t.execution_date2=e},expression:"execution_date2"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("saxo-button",{attrs:{mini:"",type:"init"},on:{click:function(e){t.StartExecution2=!1}}},[t._v("取消")]),t._v(" "),a("saxo-button",{attrs:{mini:"",type:"success"},on:{click:t.submitAmendment}},[t._v("提交修改")])],1)]),t._v(" "),t.Data.MCBaseInfo?a("div",[a("h3",[a("span",{on:{click:function(e){return t.ResetMC()}}},[t._v("基础信息")]),t._v(" 【 "+t._s(t.Data.MCBaseInfo.MaintainCode)+" 】\n            ")]),t._v(" "),a("el-descriptions",{attrs:{size:"mini",column:4,border:""}},[a("el-descriptions-item",{attrs:{label:"客户名称"}},[t._v(t._s("  "+t.Data.MCBaseInfo.CusFullName))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"合同类型"}},[t._v(t._s("  "+t.Data.MCBaseInfo.ContractType))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"合同号"}},[t._v(t._s("  "+t.Data.MCBaseInfo.MaintainCode))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"区域"}},[t._v(t._s("  "+t.Data.MCBaseInfo.Area))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"设备数量"}},[t._v(t._s("  "+t.Data.MCBaseInfo.EquCount))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"创建日期"}},[t._v("  "+t._s(t._f("TimeCode")(t.Data.MCBaseInfo.CreateDate)))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"报价日期"}},[t._v("  "+t._s(t._f("TimeCode")(t.Data.MCBaseInfo.AcceptDate)))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"付款日期"}},[t._v("  "+t._s(t._f("TimeCode")(t.Data.MCBaseInfo.PayDate)))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"结单日期"}},[t._v("    "+t._s(t._f("TimeCode")(t.Data.MCBaseInfo.EndDate)))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"销售员"}},[t._v(t._s("  "+t.Data.MCBaseInfo.SalesPerson))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"当前状态"}},[t._v(t._s("  "+t.Data.MCBaseInfo.StateStr))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"联系人"}},[t._v(t._s("  "+t.Data.MCBaseInfo.LinkMan))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"联系人英文名"}},[t._v(t._s("  "+t.Data.MCBaseInfo.LinkManEngilsh))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"联系人手机号"}},[t._v(t._s("  "+t.Data.MCBaseInfo.Mobile))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"备注信息"}},[t._v(t._s("  "+t.Data.MCBaseInfo.Memo))]),t._v(" "),a("el-descriptions-item",{attrs:{label:"执行日期"}},[a("div",{staticStyle:{"padding-left":"10px"}},[null==t.Data.MCBaseInfo.ImplementDt?a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(e){t.StartExecution=!0}}},[t._v("开始执行")]):t._e(),t._v(" "),null!=t.Data.MCBaseInfo.ImplementDt?a("span",[t._v(t._s(t.Data.MCBaseInfo.ImplementDt))]):t._e(),t._v(" "),null!=t.Data.MCBaseInfo.ImplementDt?a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(e){t.execution_date2=t.formatDateRange(String(t.Data.MCBaseInfo.ImplementDt)),t.StartExecution2=!0}}},[t._v("修改")]):t._e()],1)])],1),t._v(" "),a("h3",[t._v("保养设备信息\n                "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.MyEquipmentDatabase(!0,"1")}}},[t._v("我的设备资料库")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.EquipmentDatabase(!1,"1")}}},[t._v("设备资料库")])],1),t._v(" "),a("div",{attrs:{id:"LEtetabe"}},[a("el-table",{ref:"MC",attrs:{data:t.EquDtos1,border:"","row-key":"id",size:"mini","header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini},on:{"sort-change":function(e){return t.sortchange(1)}}},[t._l(t.col,function(e,n){return a("el-table-column",{key:"col_"+e.label,attrs:{prop:t.dropCol[n].prop,sortable:e.sortable,width:t.dropCol[n].width,"show-overflow-tooltip":t.dropCol[n].widths,label:e.label}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"数量",width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.BelongToCustomer?t._e():a("div",{attrs:{id:"Number_input"}},[a("div",{staticClass:"div_icon_text",on:{click:function(a){return t.EditMCEqu(e.row,"Del","MC")}}},[a("i",{staticClass:"el-icon-minus"})]),t._v(" "),a("div",{staticClass:"div_icon_textConter"},[a("span",[t._v(t._s(e.row.Number_s))])]),t._v(" "),a("div",{staticClass:"div_icon_text",on:{click:function(a){return t.EditMCEqu(e.row,"Add","MC")}}},[a("i",{staticClass:"el-icon-plus"})])]),t._v(" "),e.row.BelongToCustomer?a("div",{staticStyle:{width:"100%",textalign:"center"}},[t._v("\n                                "+t._s(e.row.Number_s)+"\n                            ")]):t._e()]}}],null,!1,2396775969)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"保养次数",width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{id:"Number_input"}},[a("div",{staticClass:"div_icon_text",on:{click:function(a){return t.EditMCEquMN(e.row,"Del")}}},[a("i",{staticClass:"el-icon-minus"})]),t._v(" "),a("div",{staticClass:"div_icon_textConter"},[a("span",[t._v(t._s(e.row.MaintainCount))])]),t._v(" "),a("div",{staticClass:"div_icon_text",on:{click:function(a){return t.EditMCEquMN(e.row,"Add")}}},[a("i",{staticClass:"el-icon-plus"})])])]}}],null,!1,218488519)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(a){return t.delescoped(e.row,"MC")}}},[t._v("删除")])]}}],null,!1,1520296558)})],2)],1),t._v(" "),a("div",{staticClass:"setUp"},[a("div",{staticClass:"labelFron"},[a("span",[t._v("合同年限:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:t.Data.MCEquInfo.YearLife,callback:function(e){t.$set(t.Data.MCEquInfo,"YearLife",e)},expression:"Data.MCEquInfo.YearLife"}})],1),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("保养次数:")]),t._v(" "),a("div",{attrs:{id:"Number_input"}},[a("div",{staticClass:"div_icon_text",on:{click:function(e){return t.EditMCN("Del")}}},[a("i",{staticClass:"el-icon-minus"})]),t._v(" "),a("div",{staticClass:"div_icon_textConter"},[a("span",{staticStyle:{width:"100%"}},[t._v(t._s(t.Data.MCEquInfo.MaintainCount))])]),t._v(" "),a("div",{staticClass:"div_icon_text",on:{click:function(e){return t.EditMCN("Add")}}},[a("i",{staticClass:"el-icon-plus"})])])]),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("差旅费:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.CTTAMC},model:{value:t.Data.MCEquInfo.TravelExpenses,callback:function(e){t.$set(t.Data.MCEquInfo,"TravelExpenses",e)},expression:"Data.MCEquInfo.TravelExpenses"}})],1),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("差旅次数:")]),t._v(" "),a("div",{attrs:{id:"Number_input"}},[a("div",{staticClass:"div_icon_text",on:{click:function(e){return t.EditMCTN("Del")}}},[a("i",{staticClass:"el-icon-minus"})]),t._v(" "),a("div",{staticClass:"div_icon_textConter"},[a("span",{staticStyle:{width:"100%"}},[t._v(t._s(t.Data.MCEquInfo.TraveTime))])]),t._v(" "),a("div",{staticClass:"div_icon_text",on:{click:function(e){return t.EditMCTN("Add")}}},[a("i",{staticClass:"el-icon-plus"})])])]),t._v(" "),a("div",{staticStyle:{width:"100%"}}),t._v(" "),a("div",{staticClass:"labelFron"},[a("p",[a("span",[t._v("总金额(RMB):")]),t._v(t._s(t.FinancialAmountFormat(t.Data.MCEquInfo.AmountTotal)))])]),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("优惠比例(%):")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.CTTAMC},model:{value:t.Data.MCEquInfo.PreferentialRatio,callback:function(e){t.$set(t.Data.MCEquInfo,"PreferentialRatio",e)},expression:"Data.MCEquInfo.PreferentialRatio"}})],1),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("优惠后金额:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:t.Data.MCEquInfo.PreferentialAmount,callback:function(e){t.$set(t.Data.MCEquInfo,"PreferentialAmount",e)},expression:"Data.MCEquInfo.PreferentialAmount"}})],1),t._v(" "),a("div",{staticStyle:{width:"100%"}}),t._v(" "),a("div",{staticClass:"labelFron"},[a("p",[a("span",{staticStyle:{width:"200px"}},[t._v("是否在合同中显示折扣率:")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.Data.MCEquInfo.IsShowDiscount,callback:function(e){t.$set(t.Data.MCEquInfo,"IsShowDiscount",e)},expression:"Data.MCEquInfo.IsShowDiscount"}})],1)])]),t._v(" "),"服务公司AS"==t.Data.MCBaseInfo.ContractType||"技术公司AS"==t.Data.MCBaseInfo.ContractType?a("div",[a("h3",[t._v("大包设备信息\n                    "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.MyEquipmentDatabase(!0,"2")}}},[t._v("我的设备资料库")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.EquipmentDatabase(!1,"2")}}},[t._v("设备资料库")])],1),t._v(" "),a("div",{attrs:{id:"LEtetabes"}},[a("el-table",{ref:"AS",attrs:{data:t.EquDtos,border:"","row-key":"ids",size:"mini","header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini},on:{"sort-change":function(e){return t.sortchange(2)}}},[t._l(t.col,function(e,n){return a("el-table-column",{key:"col_"+n,attrs:{prop:t.dropCol[n].prop,sortable:e.sortable,width:t.dropCol[n].width,"show-overflow-tooltip":t.dropCol[n].widths,label:e.label}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"数量",width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.BelongToCustomer?t._e():a("div",{attrs:{id:"Number_input"}},[a("div",{staticClass:"div_icon_text",on:{click:function(a){return t.EditMCEqu(e.row,"Del","AS")}}},[a("i",{staticClass:"el-icon-minus"})]),t._v(" "),a("div",{staticClass:"div_icon_textConter"},[a("span",[t._v(t._s(e.row.Number_s))])]),t._v(" "),a("div",{staticClass:"div_icon_text",on:{click:function(a){return t.EditMCEqu(e.row,"Add","AS")}}},[a("i",{staticClass:"el-icon-plus"})])]),t._v(" "),e.row.BelongToCustomer?a("div",{staticStyle:{width:"100%",textalign:"center"}},[t._v("\n                                    "+t._s(e.row.Number_s)+"\n                                ")]):t._e()]}}],null,!1,1365504801)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(a){return t.delescoped(e.row,"AS")}}},[t._v("删除")])]}}],null,!1,685681138)})],2)],1),t._v(" "),a("div",{staticClass:"setUp"},[a("div",{staticClass:"labelFron"},[a("span",[t._v("建店年份:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.ChangeASPreferentialAmount},model:{value:t.Data.ASEquInfo.YearOfEstablishment,callback:function(e){t.$set(t.Data.ASEquInfo,"YearOfEstablishment",e)},expression:"Data.ASEquInfo.YearOfEstablishment"}})],1),t._v(" "),a("div",{staticClass:"labelFronLength"},[a("span",[t._v("去年售后维修花费:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.ChangeASPreferentialAmount},model:{value:t.Data.ASEquInfo.QNHF,callback:function(e){t.$set(t.Data.ASEquInfo,"QNHF",e)},expression:"Data.ASEquInfo.QNHF"}})],1),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("举升机数量:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.ChangeASPreferentialAmount},model:{value:t.Data.ASEquInfo.TotalNumberOfLifts,callback:function(e){t.$set(t.Data.ASEquInfo,"TotalNumberOfLifts",e)},expression:"Data.ASEquInfo.TotalNumberOfLifts"}})],1),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("空压机数量:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.ChangeASPreferentialAmount},model:{value:t.Data.ASEquInfo.TotalNumberOfAirCompressor,callback:function(e){t.$set(t.Data.ASEquInfo,"TotalNumberOfAirCompressor",e)},expression:"Data.ASEquInfo.TotalNumberOfAirCompressor"}})],1),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("烤漆房数量:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},on:{input:t.ChangeASPreferentialAmount},model:{value:t.Data.ASEquInfo.TotalNumberOfSprayBooth,callback:function(e){t.$set(t.Data.ASEquInfo,"TotalNumberOfSprayBooth",e)},expression:"Data.ASEquInfo.TotalNumberOfSprayBooth"}})],1),t._v(" "),a("div",{staticStyle:{width:"100%"}}),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("AS金额合计:")]),t._v("\n                        "+t._s(t.FinancialAmountFormat(t.Data.ASEquInfo.ASAmountTotal,""))+"\n                    ")]),t._v(" "),a("div",{staticClass:"labelFron"},[a("span",[t._v("AS优惠后金额:")]),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:t.Data.ASEquInfo.ASPreferentialAmount,callback:function(e){t.$set(t.Data.ASEquInfo,"ASPreferentialAmount",e)},expression:"Data.ASEquInfo.ASPreferentialAmount"}})],1)])]):t._e(),t._v(" "),-1!=[2,3,4,5,9].indexOf(t.StateStr)?a("h3",[t._v("下载合同")]):t._e(),t._v(" "),-1!=[2,3,4,5,9].indexOf(t.StateStr)?a("div",{staticStyle:{height:"40px"}},["服务公司MC"==t.Data.MCBaseInfo.ContractType||"技术公司MC"==t.Data.MCBaseInfo.ContractType?a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("MC")}}},[t._v("合同")]),t._v("   \n                    "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("MC2")}}},[t._v("附件2")]),t._v("   \n                    "),a("el-link",{attrs:{type:"warning"},on:{click:function(e){return t.httpTXFWQBYHT("MC2NO")}}},[t._v("附件2（不含邮寄提醒）")]),t._v("   \n                ")],1):t._e(),t._v(" "),"服务公司AS"==t.Data.MCBaseInfo.ContractType||"技术公司AS"==t.Data.MCBaseInfo.ContractType?a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("ASs")}}},[t._v("AS预报价方案")]),t._v("   \n                    "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("AS")}}},[t._v("合同")]),t._v("   \n                    "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("AS2")}}},[t._v("附件2")]),t._v("   \n                    "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("AS3")}}},[t._v("附件3")]),t._v("   \n                    "),a("el-link",{attrs:{type:"warning"},on:{click:function(e){return t.httpTXFWQBYHT("AS3NO")}}},[t._v("附件3（不含邮寄提醒）")]),t._v("   \n                ")],1):t._e()]):t._e(),t._v(" "),-1!=[4,5,9].indexOf(t.StateStr)?a("div",[a("h3",[t._v("发票清单\n                    "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.AddMCASInvoice()}}},[t._v("创建发票")])],1),t._v(" "),a("el-table",{attrs:{data:t.Data.MCInvoiceDtos,size:"mini","highlight-current-row":"",border:"","header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini}},[a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CreateDate.split("T")[0]))])]}}],null,!1,3961921737)}),t._v(" "),a("el-table-column",{attrs:{label:"发票金额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(" "+t._s(t.FinancialAmountFormat(e.row.Amount)))])]}}],null,!1,2327991445)}),t._v(" "),a("el-table-column",{attrs:{label:"发票比例",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{float:"right"}},[t._v(t._s((e.row.Amount/t.PreferentialAmountSD*100).toFixed(2)+"%"))])]}}],null,!1,854220431)}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"申请人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Confirmer",label:"财务确认人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"InvoiceStateStr",label:"发票状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ReceiverEmail",label:"收票人邮箱"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Logistics",label:"物流单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"InvCode",label:"发票号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.InvoiceState?a("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(a){return t.DeleteInvoices(e.row)}}},[t._v("删除发票")]):t._e(),t._v(" "),2==e.row.InvoiceState?a("saxo-button",{attrs:{mini:"",type:"success"},on:{click:function(a){return t.OperationInvoice(e.row)}}},[t._v("申请操作")]):t._e()]}}],null,!1,739258268)})],1),t._v(" "),a("h3",[t._v("认款记录\n                    "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.GetCusCapitalPool()}}},[t._v("认款")]),t._v(" "),a("p",{staticStyle:{float:"right",color:"#606266","font-size":"14px"}},[t._v("(财务已确认："+t._s(t.FinancialConfirmed+" 元")+" )\n                          ")]),t._v(" "),a("p",{staticStyle:{float:"right",color:"#606266","font-size":"14px"}},[t._v("(等待确认："+t._s(t.FinancialUnconfirmed+" 元")+" )\n                          ")]),t._v(" "),a("p",{staticStyle:{float:"right",color:"#606266","font-size":"14px"}},[t._v("(共计应收："+t._s(t.PreferentialAmountSD+" 元")+")   ")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.GetMCPlistData,size:"mini","highlight-current-row":"",border:"","header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini}},[a("el-table-column",{attrs:{label:"付款金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.FinancialAmountFormat(e.row.Amount))+"\n                        ")]}}],null,!1,3118794038)}),t._v(" "),a("el-table-column",{attrs:{label:"付款比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s((e.row.Amount/t.PreferentialAmountSD*100).toFixed(2)+"%")+"\n                        ")]}}],null,!1,2219880013)}),t._v(" "),a("el-table-column",{attrs:{prop:"Confirmer",label:"确认人_财务"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ConfirmDt",label:"确认日期"}}),t._v(" "),a("el-table-column",{attrs:{label:"系统信息","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top-start",title:"系统信息",trigger:"hover"}},[t._l(e.row.SystemInfo2,function(e,n){return a("p",{key:n},[t._v(t._s(e))])}),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("系统信息"),a("i",{staticClass:"el-icon-warning-outline"})])],2)]}}],null,!1,3639752531)})],1)],1):t._e(),t._v(" "),a("br"),t._v(" "),-1!=[4,5,9].indexOf(t.StateStr)?a("h3",[t._v("任务列表\n                "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"success"},on:{click:function(e){return t.AddMCOrderDtos()}}},[t._v("添加任务")]),t._v(" "),a("el-date-picker",{staticStyle:{float:"right"},attrs:{type:"date",size:"mini",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期，添加任务"},model:{value:t.Time1,callback:function(e){t.Time1=e},expression:"Time1"}}),t._v(" "),4==t.StateStr?a("el-button",{staticStyle:{float:"right",marginRight:"50px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.SkipTheMaintenanceTask()}}},[t._v("跳过保养任务")]):t._e()],1):t._e(),t._v(" "),4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{attrs:{id:"LEtetabes"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.MCOrderDtos,size:"mini","highlight-current-row":"",border:"","header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini}},[a("el-table-column",{attrs:{fixed:"",prop:"OrderCode",label:"任务编号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"EstimatedTime",label:"预计时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"ActualTime",label:"启动时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"EndTime",label:"完成时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"Enginners",label:"工程师",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"StateStr",label:"状态"}})],1),t._v(" "),a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("p",{staticStyle:{color:"#5e72e4",fontWeight:"bold",paddingLeft:"20px"}},[t._v("历史记录")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.GetWorkDailiys,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini}},[a("el-table-column",{attrs:{prop:"ServiceDate",label:"服务日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ServiceType",label:"类型",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Engineer",label:"工程师",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"LinkMan",label:"联系人",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Tel",label:"电话",width:"100"}})],1)],2)],1)],1):t._e(),t._v(" "),t.RebateData!=[]?a("h3",[t._v("返点\n                "),-1!=[4,5,9].indexOf(t.StateStr)?a("el-button",{attrs:{slot:"reference",size:"mini",type:"success"},on:{click:function(e){t.RebateState=!0}},slot:"reference"},[t._v("创建返点 ")]):t._e()],1):t._e(),t._v(" "),t.RebateData!=[]?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.RebateData,size:"mini","highlight-current-row":"",border:"","header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyleMini}},[a("el-table-column",{attrs:{prop:"CreateDate",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Type",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SourceType",label:"来源业务","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"CusFullName",label:"客户"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Amount",label:"金额","show-overflow-tooltip":!0}})],1):t._e(),t._v(" "),a("h3",[t._v("备注")]),t._v(" "),a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:5,placeholder:"请输入备注"},model:{value:t.Data.MCBaseInfo.Memo,callback:function(e){t.$set(t.Data.MCBaseInfo,"Memo",e)},expression:"Data.MCBaseInfo.Memo"}}),t._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.WhetherToRenew,callback:function(e){t.WhetherToRenew=e},expression:"WhetherToRenew"}},[a("p",[t._v("这是一段内容这是一段内容确定删除吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.WhetherToRenew=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.WhetherToRenew=!1}}},[t._v("确定")])],1)]),t._v(" "),3==t.StateStr?a("el-button",{staticStyle:{float:"right",margin:"20px"},attrs:{slot:"reference",size:"mini",type:"primary",loading:t.$store.state.Vuex.loading},on:{click:function(e){return t.confirmOldContracts()}},slot:"reference"},[t._v("收款")]):t._e(),t._v(" "),10==t.StateStr?a("el-button",{staticStyle:{float:"right",margin:"20px"},attrs:{slot:"reference",size:"mini",type:"primary",loading:t.$store.state.Vuex.loading},on:{click:function(e){return t.Receivables(4,"收款")}},slot:"reference"},[t._v("收款")]):t._e(),t._v(" "),a("el-drawer",{staticStyle:{width:"200%"},attrs:{visible:t.drawer,direction:"ltr",modal:!1,title:t.titlebatch,"before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[1==t.BelongToCustomer?a("div",{staticClass:"top_init_data",staticStyle:{marginbottom:"10px"}},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"序列号、别名、产品描述"},on:{change:function(e){return t.initsss()}},model:{value:t.searchs,callback:function(e){t.searchs=e},expression:"searchs"}}),t._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"是否有序列号"},on:{change:function(e){return t.initsss()}},model:{value:t.CustomerType,callback:function(e){t.CustomerType=e},expression:"CustomerType"}},t._l(t.seriaNumber,function(t){return a("el-option",{key:t.value+"99",attrs:{label:t.name,value:t.value}})}),1),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.initsss()}}},[t._v("检索")])],1):t._e(),t._v(" "),0==t.BelongToCustomer?a("div",{staticClass:"top_init_data",staticStyle:{marginbottom:"10px"}},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入产品编码"},on:{change:function(e){return t.initss()}},model:{value:t.productCode,callback:function(e){t.productCode=e},expression:"productCode"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入内部编码"},on:{change:function(e){return t.initss()}},model:{value:t.barcodeMemo,callback:function(e){t.barcodeMemo=e},expression:"barcodeMemo"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入产品描述"},on:{change:function(e){return t.initss()}},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}}),t._v(" "),a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入产品备注"},on:{change:function(e){return t.initss()}},model:{value:t.memo,callback:function(e){t.memo=e},expression:"memo"}}),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"200px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearch,placeholder:"请选择品牌",clearable:""},on:{select:t.handleSelect},model:{value:t.man,callback:function(e){t.man=e},expression:"man"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.initss()}}},[t._v("检索")])],1):t._e(),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{marginbottom:"10px"},attrs:{data:t.Datatable,size:"mini",height:t.$store.state.TableOptimumHeight,border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"ProductCode",label:"产品编号",width:"170"}}),t._v(" "),0==t.BelongToCustomer?a("el-table-column",{attrs:{prop:"BarcodeMemo",label:"内部编码",width:"140"}}):t._e(),t._v(" "),1==t.BelongToCustomer?a("el-table-column",{attrs:{prop:"SN",label:"序列号",width:"130"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"Manufacturer",label:"品牌",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Characteristics",label:"产品描述","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{staticStyle:{float:"left"},attrs:{fixed:"right",type:"selection",width:"55"}}),t._v(" "),0==t.BelongToCustomer?a("el-table-column",{staticStyle:{float:"left"},attrs:{fixed:"right",label:"添加数量",width:"154"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:1,size:"mini"},model:{value:e.row.Numberindex1,callback:function(a){t.$set(e.row,"Numberindex1",a)},expression:"scope.row.Numberindex1"}})]}}],null,!1,58646570)}):t._e(),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.adds(e.row)}}},[t._v("添加")])]}}],null,!1,4106511513)})],1),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addscheck()}}},[t._v("添加选择")]),t._v(" "),a("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}})],1)],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"请选择被续签的合同",visible:t.ContractWithOptionOfRenewal,"modal-append-to-body":!1,height:t.$store.state.TableOptimumHeight},on:{"update:visible":function(e){t.ContractWithOptionOfRenewal=e}}},[a("el-table",{ref:"SelectedContracts",attrs:{data:t.DataList}},[a("el-table-column",{attrs:{prop:"ContractType",label:"合同类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"MaintainCode",label:"合同号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Area",label:"区域"}}),t._v(" "),a("el-table-column",{attrs:{prop:"EquCount",label:"数量","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StateStr",label:"当前状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SalesPerson",label:"销售员"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.ContractWithOptionOfRenewal=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.IveChosen()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"创建返点",visible:t.RebateState,width:"30%","modal-append-to-body":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.RebateState=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"来源业务"}},[a("el-select",{attrs:{placeholder:"请选择来源业务",size:"mini"},model:{value:t.form.SourceType,callback:function(e){t.$set(t.form,"SourceType",e)},expression:"form.SourceType"}},[a("el-option",{attrs:{label:"大包保养",value:"大包保养"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",size:"mini"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[a("el-option",{attrs:{label:"现金",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"购物卡",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"金额"}},[a("el-input-number",{attrs:{min:0,max:99999999,label:"金额",size:"mini"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.form.textarea,callback:function(e){t.$set(t.form,"textarea",e)},expression:"form.textarea"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.RebateState=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)]},proxy:!0}])})},staticRenderFns:[]};var p=a("VU/8")(u,c,!1,function(t){a("0UYV")},"data-v-fe3b7c78",null);e.default=p.exports}});