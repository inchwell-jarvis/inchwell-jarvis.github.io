webpackJsonp([49],{I6ns:function(t,e){},wexf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),o=n("//Fk"),s=n.n(o),i=n("exGp"),l=n.n(i),c={data:function(){return{data:[],checkedCities:!1,checkedList:[],expandedRowKeys:[]}},created:function(){this.start()},mounted:function(){},computed:{},watch:{},methods:{start:function(){var t=l()(r.a.mark(function t(){var e,n,a,o=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={search:"",area:"",state:6,cusType:"",saler:"",payStatus:-1,MSOType:"",pageNum:1,numPerPage:99999,orderField:"",orderDirection:"",productCode:"",forTo:"index"},t.next=3,this.API_GET("MachineSO/GetMSOs",e);case 3:return n=t.sent,console.log(n),a=n.Dtos.map(function(t){return t.ID}),t.next=8,s.a.all(a.map(function(t){return o.GetMSO(t)}));case 8:this.data=t.sent,console.log(this.data);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),GetMSO:function(){var t=l()(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.API_GET("MachineSO/GetMSO",{msoId:e});case 2:return n=t.sent,console.log(n),t.abrupt("return",n.MSO);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),MPOApproval:function(){var t=l()(r.a.mark(function t(e,n){var a,o=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={Id:e.ID,ToState:7,other:n,Remarks:e.Remarks},t.next=3,this.API_POST("MachineSO/MSOApprovalDiscount",a,!1).then(function(t){s||(o.$message.success("审核成功！"),o.start())});case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),review:function(){var t=l()(r.a.mark(function t(e){var n=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.all(this.checkedList.map(function(t){return n.MPOApproval(t,e,!0)}));case 2:this.start(),this.$message.success("审核成功！");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),handleRowClick:function(t){console.log(this.expandedRowKeys),this.expandedRowKeys.includes(t.ID)?this.expandedRowKeys=this.expandedRowKeys.filter(function(e){return e!==t.ID}):this.expandedRowKeys.push(t.ID)}},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("SaxoPage",{scopedSlots:t._u([{key:"title",fn:function(){return[t.checkedList.length>0?n("saxo-button",{attrs:{mini:"",type:"primary"},on:{click:function(e){return t.review(1)}}},[t._v("审核通过 ("+t._s(t.checkedList.length)+")")]):t._e(),t._v(" "),t.checkedList.length>0?n("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(e){return t.review(0)}}},[t._v("审核驳回 ("+t._s(t.checkedList.length)+")")]):t._e()]},proxy:!0},{key:"content",fn:function(){return[n("el-table",{staticStyle:{width:"100%"},attrs:{"expand-row-keys":t.expandedRowKeys,data:t.data,"row-key":function(t){return t.ID},"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"},on:{"row-click":t.handleRowClick,"selection-change":function(e){t.checkedList=e}}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"device_information"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.MachineSOEquDtos,stripe:"",size:"mini"}},[n("el-table-column",{attrs:{prop:"Describe",label:"设备描述","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{prop:"Brand",label:"品牌",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Quantity",label:"数量",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Discount",label:"折扣",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"原价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(e.row.OriginalPrice)))])]}}],null,!0)}),t._v(" "),n("el-table-column",{attrs:{label:"折扣价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(e.row.DiscountPrice)))])]}}],null,!0)})],1)],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"CusFullName",label:"客户名称","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{prop:"SOCode",label:"订单编号",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"CreateDateStr",label:"创建时间",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Discount",label:"折扣",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"原价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(e.row.OriginalAmount)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"折扣价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(e.row.DiscountAmount)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"SalerName",label:"销售员",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("saxo-button",{attrs:{mini:"",type:"danger"},on:{click:function(n){return t.MPOApproval(e.row,0)}}},[t._v("驳回")]),t._v(" "),n("saxo-button",{attrs:{mini:"",type:"primary"},on:{click:function(n){return t.MPOApproval(e.row,1)}}},[t._v("批准")])]}}])})],1)]},proxy:!0}])})],1)},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(t){n("I6ns")},"data-v-c8ed6e94",null);e.default=d.exports}});