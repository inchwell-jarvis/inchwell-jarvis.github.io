webpackJsonp([31],{"2f9m":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("mvHQ"),r=a.n(l),i=a("t4zo"),n=a.n(i),s=a("uXZL"),o=a.n(s),c={data:function(){return{retrieval:{pageNum:1,numPerPage:this.$store.state.NewDisplayNumber,orderField:"",orderDirection:"",month:"",name:"",area:"",state:"-1"},Data:[],DataStr:[],total:0,StateList:[{name:"全部",value:"-1"},{name:"已初核",value:"1"},{name:"已复核",value:"2"}]}},computed:{retrievalJT:function(){return r()(this.retrieval)}},watch:{retrievalJT:function(t,e){this.WatchFenYe(t,e)?this.$refs.SaxoFenYe.ReviseConNumber1():this.start()}},methods:{tableRowClassName:function(t){return 1==t.row.Status?"color568248533242":""},start:function(){var t=this;this.retrieval.month=this.retrieval.month||"",this.API_GET("PCenter/GetKPIs",this.retrieval).then(function(e){t.Data=e.Dtos,t.total=e.DataBars;for(var a=0;a<t.Data.length;a++){var l=t.Data[a];0==l.IsManQin?l.IsManQinStr="否":1==l.IsManQin?l.IsManQinStr="是":l.IsManQinStr="无",1==l.Status?l.StatusStr="已初核":l.StatusStr="已复核",l.JaJa="",null!=l.SpecialJia&&""!=l.SpecialJia&&(l.JaJa+="["+l.SpecialJiaM+" 加 "+l.SpecialJia+"]"),null!=l.SpecialJian&&""!=l.SpecialJia&&(l.JaJa+="["+l.SpecialJianM+" 减 "+l.SpecialJian+"]")}})},func:function(t,e){this.retrieval.numPerPage=t,this.retrieval.pageNum=e,this.start()},look:function(t){this.$router.push({path:"view-performance-appraisal",query:{ID:t.Id}})},edit:function(t){this.$router.push({path:"edit-performance-appraisal",query:{ID:t.Id}})},Excel:function(){var t=this,e=JSON.parse(r()(this.retrieval));e.pageNum=1,e.numPerPage=999,this.API_GET("PCenter/GetKPIs",e).then(function(e){t.DataStr=e.Dtos;for(var a=0;a<t.DataStr.length;a++){var l=t.DataStr[a];0==l.IsManQin?l.IsManQinStr="否":1==l.IsManQin?l.IsManQinStr="是":l.IsManQinStr="无",1==l.Status?l.StatusStr="已初核":l.StatusStr="已复核",l.JaJa="",null!=l.SpecialJia&&""!=l.SpecialJia&&(l.JaJa+="["+l.SpecialJiaM+" 加 "+l.SpecialJia+"]"),null!=l.SpecialJian&&""!=l.SpecialJia&&(l.JaJa+="["+l.SpecialJianM+" 减 "+l.SpecialJian+"]")}var r=t;setTimeout(function(){r.exportExcel()},500)})},exportExcel:function(){var t=o.a.utils.table_to_book(document.getElementById("#out-table"),{raw:!0}),e=o.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{n.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"绩效审核.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e}},created:function(){this.start()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:function(e){return t.start()}}}),t._v(" "),a("div",{staticClass:"retrieve"},[a("div",{staticClass:"leftSpan"},[t._v("\n            "+t._s(t.$route.meta.title)+"\n\n            "),a("i",{staticClass:"el-icon-printer",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.Excel()}}})]),t._v(" "),a("div",{staticClass:"ConView"},[a("div",{staticClass:"department"},[a("span",[t._v("姓名")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",size:"mini"},model:{value:t.retrieval.name,callback:function(e){t.$set(t.retrieval,"name",e)},expression:"retrieval.name"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("月份")]),t._v(" "),a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择月",size:"mini"},model:{value:t.retrieval.month,callback:function(e){t.$set(t.retrieval,"month",e)},expression:"retrieval.month"}})],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("选择状态：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择状态",size:"mini"},model:{value:t.retrieval.state,callback:function(e){t.$set(t.retrieval,"state",e)},expression:"retrieval.state"}},t._l(t.StateList,function(t){return a("el-option",{key:t.Value,attrs:{label:t.name,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"department"},[a("span",[t._v("区域")]),t._v(" "),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择区域"},model:{value:t.retrieval.area,callback:function(e){t.$set(t.retrieval,"area",e)},expression:"retrieval.area"}},t._l(t.$store.state.Vuex.Area,function(t){return a("el-option",{key:t.Value,attrs:{label:t.Value,value:t.Value}})}),1)],1)]),t._v(" "),a("router-link",{attrs:{to:"/create-performance-appraisal"}},[a("saxo-button",{staticStyle:{float:"right","margin-top":"13px"},attrs:{mini:"",type:"success"}},[t._v("创 建")])],1)],1),t._v(" "),a("div",{staticClass:"content2"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"Date",label:"月份",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Quyu",label:"区域",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EmployeeName",label:"工程师",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Pone",label:"初核分数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Cone",label:"复合分数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsManQinStr",label:"满勤"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JaJa",label:"加减"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StatusStr",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.Status?a("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-search"},on:{click:function(a){return t.look(e.row)}}}):t._e(),t._v(" "),1==e.row.Status?a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}}):t._e()]}}])})],1)],1),t._v(" "),a("div",{staticClass:"content",staticStyle:{display:"none"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.DataStr,size:"mini",id:"#out-table",height:this.$store.state.TableOptimumHeight,"row-class-name":t.tableRowClassName,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"Date",label:"月份",width:"90",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Quyu",label:"区域",width:"100",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EmployeeName",label:"工程师",width:"90",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Pone",label:"初核分数",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Cone",label:"复合分数",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"IsManQinStr",label:"满勤",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JaJa",label:"加减"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StatusStr",label:"状态",width:"120"}})],1)],1),t._v(" "),a("SaxoFenYe",{ref:"SaxoFenYe",attrs:{total:t.total},on:{func:t.func}})],1)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(t){a("odM5")},null,null);e.default=p.exports},odM5:function(t,e){}});