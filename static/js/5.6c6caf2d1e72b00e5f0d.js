webpackJsonp([5],{"1Qje":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("t4zo"),o=a.n(n),l=a("uXZL"),r=a.n(l),i=a("PXCl").Base64,s={data:function(){return{search:{pageNum:"1",numPerPage:"10",orderField:"",orderDirection:"",search:"",state:"-1"},options:[{label:"全部",value:"-1"},{label:"采购申请中",value:"0"},{label:"已确认",value:"1"},{label:"全部发货",value:"2"},{label:"全部收货",value:"3"},{label:"已结单",value:"4"},{label:"已撤单",value:"5"},{label:"部分发货",value:"6"},{label:"部分收货",value:"7"}],Data:[],total:0}},computed:{},watch:{},methods:{init:function(){var t=this,e={api:"get",url:this.$store.state.http+"PO/GetPOs",data:this.search};this.$https(e).then(function(e){console.log(e),t.Data=e.Data.PoMiniDtos,t.total=e.Data.DataBars;for(var a=0;a<t.Data.length;a++){var n=t.Data[a];null!=n.SendDate?n.SendDate=n.SendDate.split("T")[0]:n.SendDate=" - - ",1==n.PayType?n.PayType="预付":n.PayType="到付",null!=n.ReceiptDate?n.ReceiptDate=n.ReceiptDate.split("T")[0]:n.ReceiptDate=" - - "}})},func:function(t,e){this.search.numPerPage=t,this.search.pageNum=e,this.init()},exportExcel:function(){var t=r.a.utils.table_to_book(document.getElementById("#out-table"),{raw:!0}),e=r.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{o.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"未命名.xlsx")}catch(t){"undefined"!=typeof console&&console.log(t,e)}return e},Add:function(){this.$router.push({path:"/AddPurchase"})},Dit:function(t){this.$store.state.Vuex.Id=t.Id,this.$router.push({path:"/DitPurchase"})},Look:function(t){this.$store.state.Vuex.Id=t.Id,this.$router.push({path:"/LookPurchase"})},ResetPo:function(t){var e=this;console.log(t);var a={api:"post",url:this.$store.state.http+"PO/ResetPo",data:{Id:t.Id}};this.$https(a).then(function(a){e.$message.success(t.POCode+"单号的状态恢复！")})},ExportExcelPo:function(t){var e={url:i.encodeURI(this.$store.state.http+"PO/ExportExcelPo"),ID:i.encodeURI(t.Id),token:i.encodeURI(localStorage.getItem("token"))};this.jump("PDF/ExportExcelPo.html",e)}},created:function(){this.search.numPerPage=this.$store.state.DisplayNumber,this.init()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view",{on:{refresh:t.init}}),t._v(" "),a("div",{staticClass:"TopSerch",staticStyle:{padding:"5px"}},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"合同号、销售"},on:{change:function(e){return t.init(1)}},model:{value:t.search.search,callback:function(e){t.$set(t.search,"search",e)},expression:"search.search"}}),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择状态"},on:{change:function(e){return t.init(1)}},model:{value:t.search.state,callback:function(e){t.$set(t.search,"state",e)},expression:"search.state"}},t._l(t.options,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.init()}}},[t._v("检索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.Add()}}},[t._v("创建")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.exportExcel()}}},[t._v("导出Excel")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,size:"mini",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"POCode",label:"采购单号","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"PayType",label:"付款方式",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"发起人",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SendDate",label:"发货日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ReceiptDate",label:"收货日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.SentStatus?a("div",{staticStyle:{background:"#ff9999"}},[t._v("\n          "+t._s(e.row.SentStatusStr)+"\n        ")]):t._e(),t._v(" "),"6"==e.row.SentStatus?a("div",{staticStyle:{background:"#f5db91"}},[t._v("\n          "+t._s(e.row.SentStatusStr)+"\n        ")]):t._e(),t._v(" "),"1"!=e.row.SentStatus&&"6"!=e.row.SentStatus?a("div",[t._v("\n          "+t._s(e.row.SentStatusStr)+"\n        ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"付款",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.PayStatus?a("div",{staticStyle:{background:"#ff9999"}},[t._v("\n          "+t._s(e.row.PayStatusStr)+"\n        ")]):t._e(),t._v(" "),3!=e.row.PayStatus?a("div",[t._v("\n          "+t._s(e.row.PayStatusStr)+"\n        ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{staticStyle:{float:"left"},attrs:{fixed:"right",label:"优惠后金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.row.Amount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.ExportExcelPo(e.row)}}},[t._v("报价单")]),t._v(" "),"已结单"==e.row.SentStatusStr||"已撤单"==e.row.SentStatusStr?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.Look(e.row)}}},[t._v("查看")]):t._e(),t._v(" "),"已结单"!=e.row.SentStatusStr&&"已撤单"!=e.row.SentStatusStr?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.Dit(e.row)}}},[t._v("编辑")]):t._e()]}}])})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%",display:"none"},attrs:{data:t.Data,size:"mini",id:"#out-table",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"POCode",label:"采购单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"PayType",label:"付款方式",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Creater",label:"发起人",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SendDate",label:"发货日期",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ReceiptDate",label:"收货日期",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SentStatusStr",label:"状态",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"PayStatusStr",label:"付款",width:"100"}})],1),t._v(" "),a("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}})],1)},staticRenderFns:[]};var c=a("VU/8")(s,u,!1,function(t){a("9+tm")},"data-v-7e3f7d78",null);e.default=c.exports},"9+tm":function(t,e){}});