webpackJsonp([242],{"8Arl":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("//Fk"),o=e.n(a),l={data:function(){return{Data:[],day:""}},created:function(){this.day=this.GetDate(),this.GET_BMW_SALES_STAFF_ACCOUNT()},mounted:function(){},computed:{},watch:{},methods:{exportExcel:function(t){var n=this,e=this.$refs.tableb2.selection;if(console.log(e),!e.length)return this.$message.warning("未选择数据"),!1;var a="<tr>\n                            <th>姓名</th>\n                            <th>月份</th>\n                            <th>实际销售额</th>\n                            <th>目标销售额</th>\n                            <th>完成比例</th>\n                            <th>销售奖金</th>\n                            <th>连续奖金</th>\n                            <th>扣除奖金</th>\n                            <th>最终奖金</th>\n                        </tr>";e.forEach(function(e){a+="<tr>\n                            <td>"+e.Name+"</td>\n                            <td>"+e.Month+"&nbsp;</td>\n                            <td>"+n.FinancialAmountFormat(e.Sales,"")+"</td>\n                            <td>"+n.FinancialAmountFormat(e.TargetSales,"")+"</td>\n                            <td>"+e.CompletionRatio+"%</td>\n                            <td>"+n.FinancialAmountFormat(e.SalerBonus,"")+"</td>\n                            <td>"+n.FinancialAmountFormat(e.ContinuousComplete.Bonus,"")+"</td>\n                            <td>"+n.FinancialAmountFormat(e.DeductBonus,"")+"</td>\n                            <td>"+n.FinancialAmountFormat(e.TotalBonus,"")+"</td>                        \n                        </tr>\n                        ",t&&(a+="\n                            \n                        <tr>\n                            <th></th>\n                            <th>类型</th>  \n                            <th>客户名称</th>  \n                            <th>合同号</th>  \n                            <th>确认日期</th>  \n                            <th>合同金额</th>  \n                            <th>返点金额</th>  \n                            <th>有效金额</th>\n                            <th>提成人</th>  \n                            <th>比例</th>  \n                            <th>奖金</th>  \n                        </tr>",e.Dtos.forEach(function(t){a+="<tr>\n                                        <td></td>\n                                        <td>"+t.MSOType+"</td>\n                                        <td>"+t.CusFullName+"</td>\n                                        <td>"+t.ContractCode+"</td>\n                                        <td>"+n.formatDate(t.ConfirmDate)+"</td>\n                                        <td>"+n.FinancialAmountFormat(t.ContractAmount,"")+"</td>\n                                        <td>"+n.FinancialAmountFormat(t.RebateAmount,"")+"</td>\n                                        <td>"+n.FinancialAmountFormat(Number(t.ContractAmount)-Number(t.RebateAmount),"")+"</td>\n                                        <td>"+t.PrizeWinners+"</td>\n                                        <td>"+100*Number(t.BonusBili)+"%</td>\n                                        <td>"+n.FinancialAmountFormat(Number(t.Bonus),"")+"</td>\n                                    </tr>"}),a+="<tr><td></td></tr><tr><td></td></tr>")}),this.downloadTable(a,"宝马整机日常销售奖金")},GET_BMW_SALES_STAFF_ACCOUNT:function(){var t=this;this.API_GET("System/GetEmployeeMini",{type:10,IsEnable:-1}).then(function(n){t.Data=[];var e=n.map(function(n){return t.GetASBonus(n.UserName)});o.a.all(e).then(function(n){console.log(n),t.Data=n})})},GetASBonus:function(t){var n=this;return new o.a(function(e,a){n.API_GET("Finance/GetMSODSBonus",{cusType:1,username:t,day:n.day+"-25"}).then(function(t){e(t)})})},enumeration:function(t){console.log(t),this.$router.push({path:"Bmw_Sales_Bonus_MX",query:t})}},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},r={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("SaxoPage",{scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"department",staticStyle:{"z-index":"99"}},[e("span",[t._v("日期")]),t._v(" "),e("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择日期",size:"mini",clearable:!1},on:{change:function(n){return t.GET_BMW_SALES_STAFF_ACCOUNT()}},model:{value:t.day,callback:function(n){t.day=n},expression:"day"}})],1),t._v(" "),e("saxo-button",{attrs:{mini:"",type:"info"},on:{click:function(n){return t.exportExcel(!1)}}},[t._v("导出当前")]),t._v(" "),e("saxo-button",{attrs:{mini:"",type:"info"},on:{click:function(n){return t.exportExcel(!0)}}},[t._v("导出明细")])]},proxy:!0},{key:"content",fn:function(){return[e("router-view"),t._v(" "),e("el-table",{ref:"tableb2",staticStyle:{width:"100%"},attrs:{data:t.Data,"header-cell-style":t.$store.state.headerCellStyle,"cell-style":t.$store.state.cellStyle,stripe:"",height:"100%"}},[e("el-table-column",{attrs:{prop:"Name",label:"姓名","show-overflow-tooltip":!0}}),t._v(" "),e("el-table-column",{attrs:{prop:"Month",label:"月份",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{label:"实际销售额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(n.row.Sales)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"目标销售额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(n.row.TargetSales)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"完成比例",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(n.row.CompletionRatio+"%"))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"销售奖金",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(n.row.SalerBonus)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"连续奖金",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(n.row.ContinuousComplete.Bonus)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"扣除奖金",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(n.row.DeductBonus)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"最终奖金",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{float:"right"}},[t._v(t._s(t.FinancialAmountFormat(n.row.TotalBonus)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("saxo-button",{attrs:{mini:"",type:"primary"},on:{click:function(e){return t.enumeration(n.row)}}},[t._v("明细")])]}}])})],1)]},proxy:!0}])})},staticRenderFns:[]},i=e("VU/8")(l,r,!1,null,null,null);n.default=i.exports}});