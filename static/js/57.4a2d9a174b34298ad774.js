webpackJsonp([57],{"77Ob":function(t,e){},eowL:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{data:[],pageNum:1,pagesize:10,total:0,search:"",ToolObjectId:"",dialogTableVisible:!1,ToolProId:"",Storehouse:"",Name:"",Memo:"",dangqian:!1,Godo:"",item:[],StoreHttp:""}},created:function(){this.pagesize=this.$store.state.DisplayNumber,this.initdata()},methods:{initdata:function(){var t=this;if("kehu"!=localStorage.getItem("sf"))return!1;var e={api:"get",url:this.$store.state.http+"CusTool/GetToolObjects",header:this.$store.state.token,data:{cusId:JSON.parse(localStorage.getItem("Logo")).CusId,search:this.search,pageNum:this.pageNum,numPerPage:this.pagesize,InStore:"",orderField:"",orderDirection:""}};this.$https(e).then(function(e){t.total=e.Data.DataBars,t.data=e.Data.Dtos,console.log(e.Data.Dtos)})},func:function(t,e){this.pagesize=t,this.pageNum=e,this.initdata()},AddData:function(){this.dialogTableVisible=!0,this.$refs.success.start(),this.StoreHttp=""},dale:function(){this.dialogTableVisible=!1,this.$refs.success.start(),this.delete()},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(o){t(),e.delete()}).catch(function(t){})},getaddtrue:function(){var t=this;if(this.dangqian){var e={ToolObjectId:this.ToolObjectId,ToolProId:this.ToolProId,Storehouse:this.Storehouse,Name:this.Name,Memo:this.Memo};return this.API_POST("CusTool/UpdateToolObject",e).then(function(e){t.dialogTableVisible=!1,t.initdata(),t.delete()}),!1}if(""==this.ToolProId||""==this.Storehouse||""==this.Name)return this.$message({message:"检查必须项",type:"warning"}),!1;var o={url:this.$store.state.http+"CusTool/AddToolObject",api:"post",data:{ToolObjectId:"",ToolProId:this.ToolProId,Storehouse:this.Storehouse,Name:this.Name,Memo:this.Memo,FixedAssetsCode:"固定资产"}};this.$https(o).then(function(e){console.log(e),t.dialogTableVisible=!1,t.initdata(),t.delete()})},querySearch:function(t,e){console.log(t);var o={data:{search:t,enable:!0,pageNum:1,numPerPage:100,orderField:"",orderDirection:""},api:"get",url:this.$store.state.http+"CusTool/GetCusTools",header:this.$store.state.token};this.$https(o).then(function(t){console.log(t.Data.Dtos);if(0==t.Data.Dtos.length)return e([]),!1;for(var o=0;o<t.Data.Dtos.length;o++)t.Data.Dtos[o].value="["+t.Data.Dtos[o].ProductCode+"] - "+t.Data.Dtos[o].ProductDesc;console.log(t.Data.Dtos),e(t.Data.Dtos)})},handleSelect:function(t){null!=t.ImageUrl?this.StoreHttp=this.$store.state.Filehttp+"CusTool/"+t.ImageUrl:this.StoreHttp="",this.item=[],console.log(t),this.item[0]=t,this.ToolProId=t.ID},switchs:function(t){var e=this;console.log(t);var o={data:{Id:t.ToolObjectId},api:"post",url:this.$store.state.http+"CusTool/SetToolObject"};this.$https(o).then(function(t){e.$message({showClose:!0,type:"success",message:"修改状态成功"})})},edit:function(t){console.log(t),this.dialogTableVisible=!0,this.ToolProId=t.ToolProId,this.ToolObjectId=t.ToolObjectId,this.Storehouse=t.Storehouse,this.Name=t.Name,this.Memo=t.Memo,this.Godo=t.ProductDesc,this.dangqian=!0,""!=t.ImageUrl?this.StoreHttp=this.$store.state.Filehttp+"CusTool/"+t.ImageUrl:this.StoreHttp=""},delete:function(){this.ToolObjectId="",this.ToolProId="",this.Storehouse="",this.Name="",this.Memo="",this.Godo="",this.dangqian=!1,this.item=[]}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box"},[o("div",{staticClass:"TopSerch"},[o("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),o("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.initdata()}}},[t._v("检索")]),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.AddData()}}},[t._v("添加")])],1),t._v(" "),o("saxo-pop",{ref:"success",attrs:{type:"success",title:"添加工具",width:"800px"},on:{close:function(e){return t.$refs.success.start()}}},[o("div",{staticClass:"dial",staticStyle:{width:"100%",height:"500px"}},[t.dangqian?t._e():o("div",{staticClass:"li"},[o("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"100%"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearch,placeholder:"请输入内容",clearable:""},on:{select:t.handleSelect},model:{value:t.ToolObjectId,callback:function(e){t.ToolObjectId=e},expression:"ToolObjectId "}},[o("template",{slot:"prepend"},[t._v("当前工具")])],2)],1),t._v(" "),t.dangqian?o("div",{staticClass:"li"},[o("el-input",{attrs:{size:"mini",disabled:!0,placeholder:"请输入内容"},model:{value:t.Godo,callback:function(e){t.Godo=e},expression:"Godo"}},[o("template",{slot:"prepend"},[t._v("当前工具")])],2)],1):t._e(),t._v(" "),t.item[0]?o("div",{staticClass:"lis"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.item,size:"mini"}},[o("el-table-column",{attrs:{prop:"ProductCode",label:"编码",width:"160px"}}),t._v(" "),o("el-table-column",{attrs:{prop:"ProductDesc",label:"说明","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{prop:"Unit",label:"单位",width:"80px"}}),t._v(" "),o("el-table-column",{attrs:{prop:"ToolLabel",label:"标签",width:"80px"}}),t._v(" "),o("el-table-column",{attrs:{prop:"UnitPrice",label:"单价",width:"80px"}})],1)],1):t._e(),t._v(" "),o("div",{staticClass:"li"},[o("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.Storehouse,callback:function(e){t.Storehouse=e},expression:"Storehouse"}},[o("template",{slot:"prepend"},[t._v("库位")])],2)],1),t._v(" "),o("div",{staticClass:"li"},[o("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}},[o("template",{slot:"prepend"},[t._v("别名")])],2)],1),t._v(" "),o("div",{staticClass:"li"},[o("el-input",{attrs:{placeholder:"请输入备注 （非必填）",size:"mini"},model:{value:t.Memo,callback:function(e){t.Memo=e},expression:"Memo"}},[o("template",{slot:"prepend"},[t._v("备注")])],2)],1),t._v(" "),o("img",{attrs:{src:t.StoreHttp,alt:""}})]),t._v(" "),o("div",{staticStyle:{width:"100%","text-align":"right"}},[o("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.dale()}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.getaddtrue()}}},[t._v("确 定")])],1)]),t._v(" "),o("div",{staticClass:"content"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,size:"mini",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[o("el-table-column",{attrs:{"show-overflow-tooltip":!0,fixed:"",prop:"ProductCode",label:"工具编号",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"ProductDesc",label:"工具描述"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"Storehouse",label:"库位",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"Name",label:"别名",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"可用性",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button-group",[o("el-switch",{staticClass:"an",attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return t.switchs(e.row)}},model:{value:e.row.Enable,callback:function(o){t.$set(e.row,"Enable",o)},expression:"scope.row.Enable"}})],1)]}}])}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button-group",[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.edit(e.row)}}},[t._v("编辑")])],1)]}}])})],1)],1),t._v(" "),o("SaxoFenYe",{attrs:{total:t.total},on:{func:t.func}})],1)},staticRenderFns:[]};var i=o("VU/8")(s,a,!1,function(t){o("77Ob")},"data-v-ab406a90",null);e.default=i.exports}});